import{o as ke,b as Le,a as ye,_ as Qf,g as Ve,k as Ng,h as q_,v as Dg,F as Au,e as Ru,n as Lg,x as Ug,y as ju,r as po,p as jl,t as mo,f as Pt,z as $l,A as Qd,B as Fg,c as Bg,w as au,j as xg,C as Wg,D as Ml,G as Xd,E as uu,q as H_,s as z_,H as f,I as Vg}from"./index-f50d6d08.js";import{a as qg}from"./axios-a342f982.js";import{s as su}from"./transform-4a56bf00.js";import{o as Hg}from"./ordinal-0ac01f5e.js";import{a as Jd,l as zg,m as Yg,b as Gg,c as Kg,d as Zg}from"./linear-2c590633.js";import{c as eh}from"./create-8bd90eea.js";import{s as Qg,m as Xg}from"./manyBody-52170d67.js";import{l as Jg,x as e0,y as t0,d as r0}from"./y-d5417789.js";import"./value-0eb832c3.js";import"./nodrag-71d5223e.js";import"./pointer-b52b12f8.js";const n0=["stroke","fill"],o0=ye("path",{d:"m617.24 354a126.36 126.36 0 0 0 -10.86-103.79 127.8 127.8 0 0 0 -137.65-61.32 126.36 126.36 0 0 0 -95.31-42.49 127.81 127.81 0 0 0 -121.92 88.49 126.4 126.4 0 0 0 -84.5 61.3 127.82 127.82 0 0 0 15.72 149.86 126.36 126.36 0 0 0 10.86 103.79 127.81 127.81 0 0 0 137.65 61.32 126.36 126.36 0 0 0 95.31 42.49 127.81 127.81 0 0 0 121.96-88.54 126.4 126.4 0 0 0 84.5-61.3 127.82 127.82 0 0 0 -15.76-149.81zm-190.66 266.49a94.79 94.79 0 0 1 -60.85-22c.77-.42 2.12-1.16 3-1.7l101-58.34a16.42 16.42 0 0 0 8.3-14.37v-142.39l42.69 24.65a1.52 1.52 0 0 1 .83 1.17v117.92a95.18 95.18 0 0 1 -94.97 95.06zm-204.24-87.23a94.74 94.74 0 0 1 -11.34-63.7c.75.45 2.06 1.25 3 1.79l101 58.34a16.44 16.44 0 0 0 16.59 0l123.31-71.2v49.3a1.53 1.53 0 0 1 -.61 1.31l-102.1 58.95a95.16 95.16 0 0 1 -129.85-34.79zm-26.57-220.49a94.71 94.71 0 0 1 49.48-41.68c0 .87-.05 2.41-.05 3.48v116.68a16.41 16.41 0 0 0 8.29 14.36l123.31 71.19-42.69 24.65a1.53 1.53 0 0 1 -1.44.13l-102.11-59a95.16 95.16 0 0 1 -34.79-129.81zm350.74 81.62-123.31-71.2 42.69-24.64a1.53 1.53 0 0 1 1.44-.13l102.11 58.95a95.08 95.08 0 0 1 -14.69 171.55c0-.88 0-2.42 0-3.49v-116.68a16.4 16.4 0 0 0 -8.24-14.36zm42.49-63.95c-.75-.46-2.06-1.25-3-1.79l-101-58.34a16.46 16.46 0 0 0 -16.59 0l-123.31 71.2v-49.3a1.53 1.53 0 0 1 .61-1.31l102.1-58.9a95.07 95.07 0 0 1 141.19 98.44zm-267.11 87.87-42.7-24.65a1.52 1.52 0 0 1 -.83-1.17v-117.92a95.07 95.07 0 0 1 155.9-73c-.77.42-2.11 1.16-3 1.7l-101 58.34a16.41 16.41 0 0 0 -8.3 14.36zm23.19-50 54.92-31.72 54.92 31.7v63.42l-54.92 31.7-54.92-31.7z"},null,-1),i0=[o0],a0={__name:"IconOpenAI",props:{color:{type:String,default:"#00DC82"}},setup(e){return(r,t)=>(ke(),Le("svg",{width:"100%",height:"100%",stroke:e.color,fill:e.color,"stroke-width":"0",viewBox:"140 140 520 520",xmlns:"http://www.w3.org/2000/svg"},i0,8,n0))}},u0=["fill","stroke"],s0=ye("path",{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"},null,-1),c0=ye("path",{"fill-rule":"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"},null,-1),l0=[s0,c0],f0={__name:"IconPerson",props:{color:{type:String,default:"#00DC82"}},setup(e){return(r,t)=>(ke(),Le("svg",{fill:e.color,stroke:e.color,width:"100%",height:"100%","stroke-width":"0",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},l0,8,u0))}};const d0={class:"load-texture-container"},h0={class:"inner"},v0={__name:"LoadingText",setup(e){const r=Ve(new Array(7).fill(0)),t=Ve(!1),n=Ve(null);return Ng(t,o=>{if(o){let i=0;n.value=setInterval(()=>{r.value=r.value.map((a,s)=>2*Math.sin(i+2*Math.PI*((s+1)/8))),i++},100)}else clearInterval(n.value)}),q_(()=>{t.value=!0}),Dg(()=>{t.value=!1}),(o,i)=>(ke(),Le("div",d0,[ye("div",h0,[(ke(!0),Le(Au,null,Ru(r.value,(a,s)=>(ke(),Le("div",{key:s,class:"item",style:Lg({transform:`translateY(${a}px)`})},null,4))),128))])]))}},_0=Qf(v0,[["__scopeId","data-v-888337db"]]);const p0=e=>(H_("data-v-3fccf2dd"),e=e(),z_(),e),m0=["onKeyup"],y0={key:0,class:"sender"},b0={key:0,class:"avatar"},g0={key:1,class:"avatar"},O0={class:"sender-name"},E0=["src"],w0={class:"image-gallery"},T0=["href"],S0=["src","alt"],P0=["href"],C0={class:"image-price"},I0={key:0,class:"loading-text"},A0={class:"more-question"},R0={class:"input"},j0={class:"box-card"},$0=["disabled"],M0=p0(()=>ye("div",{class:"footer"},null,-1)),th="http://192.168.50.189:5520",k0={__name:"chatbox",emits:["customEvent"],setup(e,{emit:r}){const n=Ug("appData",()=>{const X="openai-assistant-appdata";let U="",K="";const $=localStorage.getItem(X);if($){const oe=JSON.parse($);U=oe.name,K=oe.id}const q={role:"system",user_id:null,content:"你好，欢迎使用香氛问答机器人，有任何问题都请问我吧!",image:null,created_at:Date.now()},Y=Ve(U),D=Ve(K);let N=Ve([q]);function Z(oe){N.value.push(oe)}function ge(oe){Y.value=oe,localStorage.setItem(X,JSON.stringify({name:oe,id:D.value}))}function W(oe){D.value=oe,localStorage.setItem(X,JSON.stringify({name:Y.value,id:oe}))}return{name:Y,id:D,messageList:N,setName:ge,setId:W,AppendMessage:Z}})();let o="/simulate_json";const i=Ve(""),a=Ve(null),s=Ve(null),c=Ve(""),u=Ve(""),l=Ve(!1),h=["primary","success","warning"],_=Ve(""),y=Ve(null),b=r;function O(){const X=["hello","你好","木质东方调香水推荐","你知道哪款香水的味道是橘子味吗？","橘子味香水推荐","介绍三款迷人的香水","请问什么香水闻起来是冷的呀？以及什么香材会有冷感？","有没有符合下面图片意境的香水？http://192.168.50.189:5520/demo1.jpg","有没有类似图片中这种感觉的香水？http://192.168.50.189:5520/guoshanche.jpg"],U=X[Math.floor(Math.random()*X.length)];u.value=U,console.log(new Date().toLocaleString(),"随机生成消息",U)}function P(){o==="/simulate_json"?o="/chat":o="/simulate_json",console.log(new Date().toLocaleString(),"改变接口类型为",o),uu({message:"改变了接口类型为:"+o,type:"info"}),console.log(new Date().toLocaleString(),"接口类型已切换")}const I=X=>{b("customEvent",X)};function j(){return Date.now().toString()+Math.random().toString(26).slice(2)}const S=X=>{console.log(new Date().toLocaleString(),"开始上传文件，收到的组件传入参数是",X);const U=X.file;console.log(new Date().toLocaleString(),"文件名称是",U.name);const K=new FileReader;K.onloadend=()=>{const $=K.result;console.log(new Date().toLocaleString(),"文件base64内容是",$),_.value=$},K.readAsDataURL(U)},A=X=>{},T=()=>{uu({message:"最多只能上传一个文件！",type:"warning"})},F=()=>{uu({message:"上传文件失败！",type:"error"})},z=()=>{uu({message:"上传文件成功",type:"success"})};async function x(X){console.log(new Date().toLocaleString(),"发送消息到Chat接口",X),l.value=!0,n.AppendMessage(X),u.value="",le();try{const U={user_id:X.user_id,content:X.content,image:X.image},K=await qg.post(`${th}${o}`,U),$=K.data.data.content,q=K.data.data.func_name,Y=K.data.data.func_params;q&&I({func_name:q,func_params:Y});let D=K.data.data.picture;D=D.map(ge=>(ge.img=`${th}/${ge.img}`,ge));const N=K.data.data.more_question;i.value=N;let Z={role:"assistant",images:D,user_id:null,content:$,created_at:Date.now()};n.AppendMessage(Z),console.log(new Date().toLocaleString(),"AI回复消息",$)}catch(U){console.log(U.name,U.message)}finally{l.value=!1}}function re(){if(l.value)return;console.log(new Date().toLocaleString(),"用户开始发送消息");const X={role:"user",user_id:c.value,content:u.value,image:_.value,created_at:Date.now()};x(X),u.value="",_.value="",y.value.clearFiles(),le()}function le(){console.log(new Date().toLocaleString(),"滚动屏幕"),setTimeout(()=>{a.value.scrollTop=a.value.scrollHeight},300)}function be(X,U){return console.log(new Date().toLocaleString(),"获取背景样式"),X==="system"?"system":X==="assistant"?"bot":U!==c.value?"other":"user"}const ne=ju(()=>(console.log(new Date().toLocaleString(),"计算messages"),n.messageList.sort((X,U)=>X.created_at>U.created_at?1:X.created_at<U.created_at?-1:0)));function me(X){u.value=X,re()}return q_(()=>{n.id!==""?c.value=n.id:(c.value=j(),n.setId(c.value))}),(X,U)=>{const K=po("el-button"),$=po("Picture"),q=po("el-icon"),Y=po("el-upload"),D=po("ArrowRightBold");return ke(),Le("div",{class:"container",onKeyup:[Ml(Xd(P,["ctrl"]),["f"]),Ml(Xd(O,["ctrl"]),["1"])]},[ye("div",{class:"messages",ref_key:"messageRef",ref:a},[(ke(!0),Le(Au,null,Ru(ne.value,N=>(ke(),Le("div",{class:"message-item",key:N.id},[ye("div",{class:jl(N.user_id===c.value?"rowNormal":"rowReverse")},[ye("div",{class:jl(["message-contents",{marginLeft:N.user_id!==c.value,marginRight:N.user_id===c.value}])},[ye("div",{class:jl(["message-text",be(N.role,N.user_id)])},mo(N.content),3)],2),N.role!=="system"?(ke(),Le("div",y0,[N.role==="user"?(ke(),Le("div",b0,[Pt(f0)])):(ke(),Le("div",g0,[Pt(a0)])),ye("div",O0,[ye("span",null,mo(N.name),1)])])):$l("",!0)],2),ye("div",null,[N.image?(ke(),Le("img",{key:0,src:N.image,class:"image"},null,8,E0)):$l("",!0)]),Qd(ye("div",w0,[(ke(!0),Le(Au,null,Ru(N.images,Z=>(ke(),Le("div",{key:Z.title,class:"image-item"},[ye("a",{href:Z.url},[ye("img",{src:Z.img,alt:Z.title,class:"image"},null,8,S0)],8,T0),ye("a",{class:"image-title",href:Z.url},mo(Z.title),9,P0),ye("a",C0,"价格："+mo(Z.price),1)]))),128))],512),[[Fg,N.user_id!==c.value]])]))),128)),l.value?(ke(),Le("div",I0,[Pt(_0)])):$l("",!0),ye("div",A0,[(ke(!0),Le(Au,null,Ru(i.value,(N,Z)=>(ke(),Bg(K,{key:Z,type:h[Z],onClick:ge=>me(N)},{default:au(()=>[xg(mo(N),1)]),_:2},1032,["type","onClick"]))),128))])],512),ye("div",R0,[Qd(ye("input",{ref_key:"inputRef",ref:s,onKeyup:Ml(re,["enter"]),placeholder:"输入问题",class:"input-text",type:"text","onUpdate:modelValue":U[0]||(U[0]=N=>u.value=N)},null,544),[[Wg,u.value]]),ye("div",j0,[Pt(Y,{class:"upload-file","show-file-list":!0,limit:1,"http-request":S,"before-upload":A,ref_key:"uploadFile",ref:y,"on-exceed":T,"on-success":z,"on-error":F,accept:"image/*"},{default:au(()=>[Pt(q,null,{default:au(()=>[Pt($)]),_:1})]),_:1},512),ye("button",{disabled:!u.value||l.value,onClick:re,class:"button"},[Pt(q,null,{default:au(()=>[Pt(D)]),_:1})],8,$0)])]),M0],40,m0)}}},N0=Qf(k0,[["__scopeId","data-v-3fccf2dd"]]);function D0(e,r){return Array.from(r,t=>e[t])}function L0(e,...r){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[t]=r;if(t&&t.length!==2||r.length>1){const n=Uint32Array.from(e,(o,i)=>i);return r.length>1?(r=r.map(o=>e.map(o)),n.sort((o,i)=>{for(const a of r){const s=yf(a[o],a[i]);if(s)return s}})):(t=e.map(t),n.sort((o,i)=>yf(t[o],t[i]))),D0(e,n)}return e.sort(U0(t))}function U0(e=Jd){if(e===Jd)return yf;if(typeof e!="function")throw new TypeError("compare is not a function");return(r,t)=>{const n=e(r,t);return n||n===0?n:(e(t,t)===0)-(e(r,r)===0)}}function yf(e,r){return(e==null||!(e>=e))-(r==null||!(r>=r))||(e<r?-1:e>r?1:0)}var Y_={},Rt={},H={},he={},F0=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(he,"__esModule",{value:!0});he.PROTOCOL_ERROR=he.SESSION_EXPIRED=he.SERVICE_UNAVAILABLE=he.Neo4jError=he.isRetriableError=he.newError=void 0;var G_="ServiceUnavailable";he.SERVICE_UNAVAILABLE=G_;var K_="SessionExpired";he.SESSION_EXPIRED=K_;var B0="ProtocolError";he.PROTOCOL_ERROR=B0;var x0="N/A",Xf=function(e){F0(r,e);function r(t,n,o){var i=e.call(this,t,o!=null?{cause:o}:void 0)||this;return i.constructor=r,i.__proto__=r.prototype,i.code=n,i.name="Neo4jError",i.retriable=q0(n),i}return r.isRetriable=function(t){return t!=null&&t instanceof r&&t.retriable},r}(Error);he.Neo4jError=Xf;function W0(e,r,t){return new Xf(e,r??x0,t)}he.newError=W0;var V0=Xf.isRetriable;he.isRetriableError=V0;function q0(e){return e===G_||e===K_||z0(e)||H0(e)}function H0(e){return(e==null?void 0:e.includes("TransientError"))===!0}function z0(e){return e==="Neo.ClientError.Security.AuthorizationExpired"}var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.toString=Ne.toNumber=Ne.inSafeRange=Ne.isInt=Ne.int=void 0;var yo=he,rh=new Map,tr=function(){function e(r,t){this.low=r??0,this.high=t??0}return e.prototype.inSafeRange=function(){return this.greaterThanOrEqual(e.MIN_SAFE_VALUE)&&this.lessThanOrEqual(e.MAX_SAFE_VALUE)},e.prototype.toInt=function(){return this.low},e.prototype.toNumber=function(){return this.high*Ar+(this.low>>>0)},e.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(Ar)+BigInt(this.low>>>0);var r=this.negate();return BigInt(-1)*(BigInt(r.high>>>0)*BigInt(Ar)+BigInt(r.low>>>0))},e.prototype.toNumberOrInfinity=function(){return this.lessThan(e.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(e.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},e.prototype.toString=function(r){if(r=r??10,r<2||r>36)throw RangeError("radix out of range: "+r.toString());if(this.isZero())return"0";var t;if(this.isNegative())if(this.equals(e.MIN_VALUE)){var n=e.fromNumber(r),o=this.div(n);return t=o.multiply(n).subtract(this),o.toString(r)+t.toInt().toString(r)}else return"-"+this.negate().toString(r);var i=e.fromNumber(Math.pow(r,6));t=this;for(var a="";;){var s=t.div(i),c=t.subtract(s.multiply(i)).toInt()>>>0,u=c.toString(r);if(t=s,t.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},e.prototype.valueOf=function(){return this.toBigInt()},e.prototype.getHighBits=function(){return this.high},e.prototype.getLowBits=function(){return this.low},e.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(e.MIN_VALUE)?64:this.negate().getNumBitsAbs();var r=this.high!==0?this.high:this.low,t=0;for(t=31;t>0&&!(r&1<<t);t--);return this.high!==0?t+33:t+1},e.prototype.isZero=function(){return this.high===0&&this.low===0},e.prototype.isNegative=function(){return this.high<0},e.prototype.isPositive=function(){return this.high>=0},e.prototype.isOdd=function(){return(this.low&1)===1},e.prototype.isEven=function(){return(this.low&1)===0},e.prototype.equals=function(r){var t=e.fromValue(r);return this.high===t.high&&this.low===t.low},e.prototype.notEquals=function(r){return!this.equals(r)},e.prototype.lessThan=function(r){return this.compare(r)<0},e.prototype.lessThanOrEqual=function(r){return this.compare(r)<=0},e.prototype.greaterThan=function(r){return this.compare(r)>0},e.prototype.greaterThanOrEqual=function(r){return this.compare(r)>=0},e.prototype.compare=function(r){var t=e.fromValue(r);if(this.equals(t))return 0;var n=this.isNegative(),o=t.isNegative();return n&&!o?-1:!n&&o?1:this.subtract(t).isNegative()?-1:1},e.prototype.negate=function(){return this.equals(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)},e.prototype.add=function(r){var t=e.fromValue(r),n=this.high>>>16,o=this.high&65535,i=this.low>>>16,a=this.low&65535,s=t.high>>>16,c=t.high&65535,u=t.low>>>16,l=t.low&65535,h=0,_=0,y=0,b=0;return b+=a+l,y+=b>>>16,b&=65535,y+=i+u,_+=y>>>16,y&=65535,_+=o+c,h+=_>>>16,_&=65535,h+=n+s,h&=65535,e.fromBits(y<<16|b,h<<16|_)},e.prototype.subtract=function(r){var t=e.fromValue(r);return this.add(t.negate())},e.prototype.multiply=function(r){if(this.isZero())return e.ZERO;var t=e.fromValue(r);if(t.isZero())return e.ZERO;if(this.equals(e.MIN_VALUE))return t.isOdd()?e.MIN_VALUE:e.ZERO;if(t.equals(e.MIN_VALUE))return this.isOdd()?e.MIN_VALUE:e.ZERO;if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(ih)&&t.lessThan(ih))return e.fromNumber(this.toNumber()*t.toNumber());var n=this.high>>>16,o=this.high&65535,i=this.low>>>16,a=this.low&65535,s=t.high>>>16,c=t.high&65535,u=t.low>>>16,l=t.low&65535,h=0,_=0,y=0,b=0;return b+=a*l,y+=b>>>16,b&=65535,y+=i*l,_+=y>>>16,y&=65535,y+=a*u,_+=y>>>16,y&=65535,_+=o*l,h+=_>>>16,_&=65535,_+=i*u,h+=_>>>16,_&=65535,_+=a*c,h+=_>>>16,_&=65535,h+=n*l+o*u+i*c+a*s,h&=65535,e.fromBits(y<<16|b,h<<16|_)},e.prototype.div=function(r){var t=e.fromValue(r);if(t.isZero())throw(0,yo.newError)("division by zero");if(this.isZero())return e.ZERO;var n,o,i;if(this.equals(e.MIN_VALUE)){if(t.equals(e.ONE)||t.equals(e.NEG_ONE))return e.MIN_VALUE;if(t.equals(e.MIN_VALUE))return e.ONE;var a=this.shiftRight(1);return n=a.div(t).shiftLeft(1),n.equals(e.ZERO)?t.isNegative()?e.ONE:e.NEG_ONE:(o=this.subtract(t.multiply(n)),i=n.add(o.div(t)),i)}else if(t.equals(e.MIN_VALUE))return e.ZERO;if(this.isNegative())return t.isNegative()?this.negate().div(t.negate()):this.negate().div(t).negate();if(t.isNegative())return this.div(t.negate()).negate();for(i=e.ZERO,o=this;o.greaterThanOrEqual(t);){n=Math.max(1,Math.floor(o.toNumber()/t.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),c=s<=48?1:Math.pow(2,s-48),u=e.fromNumber(n),l=u.multiply(t);l.isNegative()||l.greaterThan(o);)n-=c,u=e.fromNumber(n),l=u.multiply(t);u.isZero()&&(u=e.ONE),i=i.add(u),o=o.subtract(l)}return i},e.prototype.modulo=function(r){var t=e.fromValue(r);return this.subtract(this.div(t).multiply(t))},e.prototype.not=function(){return e.fromBits(~this.low,~this.high)},e.prototype.and=function(r){var t=e.fromValue(r);return e.fromBits(this.low&t.low,this.high&t.high)},e.prototype.or=function(r){var t=e.fromValue(r);return e.fromBits(this.low|t.low,this.high|t.high)},e.prototype.xor=function(r){var t=e.fromValue(r);return e.fromBits(this.low^t.low,this.high^t.high)},e.prototype.shiftLeft=function(r){var t=e.toNumber(r);return(t&=63)===0?e.ZERO:t<32?e.fromBits(this.low<<t,this.high<<t|this.low>>>32-t):e.fromBits(0,this.low<<t-32)},e.prototype.shiftRight=function(r){var t=e.toNumber(r),n=e.toNumber(r);return(t&=63)===0?e.ZERO:n<32?e.fromBits(this.low>>>t|this.high<<32-t,this.high>>t):e.fromBits(this.high>>t-32,this.high>=0?0:-1)},e.isInteger=function(r){return(r==null?void 0:r.__isInteger__)===!0},e.fromInt=function(r){var t;if(r=r|0,r>=-128&&r<128&&(t=rh.get(r),t!=null))return t;var n=new e(r,r<0?-1:0);return r>=-128&&r<128&&rh.set(r,n),n},e.fromBits=function(r,t){return new e(r,t)},e.fromNumber=function(r){return isNaN(r)||!isFinite(r)?e.ZERO:r<=-oh?e.MIN_VALUE:r+1>=oh?e.MAX_VALUE:r<0?e.fromNumber(-r).negate():new e(r%Ar|0,r/Ar|0)},e.fromString=function(r,t,n){var o=n===void 0?{}:n,i=o.strictStringValidation;if(r.length===0)throw(0,yo.newError)("number format error: empty string");if(r==="NaN"||r==="Infinity"||r==="+Infinity"||r==="-Infinity")return e.ZERO;if(t=t??10,t<2||t>36)throw(0,yo.newError)("radix out of range: "+t.toString());var a;if((a=r.indexOf("-"))>0)throw(0,yo.newError)('number format error: interior "-" character: '+r);if(a===0)return e.fromString(r.substring(1),t).negate();for(var s=e.fromNumber(Math.pow(t,8)),c=e.ZERO,u=0;u<r.length;u+=8){var l=Math.min(8,r.length-u),h=r.substring(u,u+l),_=parseInt(h,t);if(i===!0&&!G0(h,_,t))throw(0,yo.newError)('number format error: "'.concat(h,'" is NaN in radix ').concat(t,": ").concat(r));if(l<8){var y=e.fromNumber(Math.pow(t,l));c=c.multiply(y).add(e.fromNumber(_))}else c=c.multiply(s),c=c.add(e.fromNumber(_))}return c},e.fromValue=function(r,t){return t===void 0&&(t={}),r instanceof e?r:typeof r=="number"?(t.ceilFloat===!0&&(r=Math.ceil(r)),e.fromNumber(r)):typeof r=="string"?e.fromString(r,void 0,t):typeof r=="bigint"?e.fromString(r.toString()):new e(r.low,r.high)},e.toNumber=function(r){switch(typeof r){case"number":return r;case"bigint":return Number(r);default:return e.fromValue(r).toNumber()}},e.toString=function(r,t){return e.fromValue(r).toString(t)},e.inSafeRange=function(r){return e.fromValue(r).inSafeRange()},e.ZERO=e.fromInt(0),e.ONE=e.fromInt(1),e.NEG_ONE=e.fromInt(-1),e.MAX_VALUE=e.fromBits(-1,2147483647),e.MIN_VALUE=e.fromBits(0,-2147483648),e.MIN_SAFE_VALUE=e.fromBits(1,-2097152),e.MAX_SAFE_VALUE=e.fromBits(-1,2097151),e.__isInteger__=!0,e}();function Y0(e,r,t){var n=e.toString(r),o=Math.max(t-n.length,0),i="0".repeat(o);return"".concat(i).concat(n)}function G0(e,r,t){return!Number.isNaN(e)&&!Number.isNaN(r)&&Y0(r,t,e.length)===e.toLowerCase()}Object.defineProperty(tr.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var nh=65536,K0=1<<24,Ar=nh*nh,Z0=Ar*Ar,oh=Z0/2,ih=tr.fromInt(K0),Q0=tr.fromValue;Ne.int=Q0;var X0=tr.isInteger;Ne.isInt=X0;var J0=tr.inSafeRange;Ne.inSafeRange=J0;var eO=tr.toNumber;Ne.toNumber=eO;var tO=tr.toString;Ne.toString=tO;Ne.default=tr;var pe={},Jf={},te={},Sn={},jt={};Object.defineProperty(jt,"__esModule",{value:!0});jt.getBrokenObjectReason=jt.isBrokenObject=jt.createBrokenObject=void 0;var Z_="__isBrokenObject__",Q_="__reason__";function rO(e,r){r===void 0&&(r={});var t=function(){throw e};return new Proxy(r,{get:function(n,o){if(o===Z_)return!0;if(o===Q_)return e;if(o==="toJSON")return;t()},set:t,apply:t,construct:t,defineProperty:t,deleteProperty:t,getOwnPropertyDescriptor:t,getPrototypeOf:t,has:t,isExtensible:t,ownKeys:t,preventExtensions:t,setPrototypeOf:t})}jt.createBrokenObject=rO;function nO(e){return e!==null&&typeof e=="object"&&e[Z_]===!0}jt.isBrokenObject=nO;function oO(e){return e[Q_]}jt.getBrokenObjectReason=oO;Object.defineProperty(Sn,"__esModule",{value:!0});Sn.stringify=void 0;var ah=jt;function iO(e){return JSON.stringify(e,function(r,t){return(0,ah.isBrokenObject)(t)?{__isBrokenObject__:!0,__reason__:(0,ah.getBrokenObjectReason)(t)}:typeof t=="bigint"?"".concat(t,"n"):t})}Sn.stringify=iO;var aO=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(te,"__esModule",{value:!0});te.ENCRYPTION_OFF=te.ENCRYPTION_ON=te.equals=te.validateQueryAndParameters=te.assertValidDate=te.assertNumberOrInteger=te.assertNumber=te.assertString=te.assertObject=te.isString=te.isObject=te.isEmptyObjectOrNull=void 0;var uO=Ne,Mr=Sn,sO="ENCRYPTION_ON";te.ENCRYPTION_ON=sO;var cO="ENCRYPTION_OFF";te.ENCRYPTION_OFF=cO;function lO(e){if(e===null)return!0;if(!es(e))return!1;for(var r in e)if(e[r]!==void 0)return!1;return!0}te.isEmptyObjectOrNull=lO;function es(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null}te.isObject=es;function fO(e,r,t){var n,o,i="",a=r??{},s=(n=t==null?void 0:t.skipAsserts)!==null&&n!==void 0?n:!1;return typeof e=="string"?i=e:e instanceof String?i=e.toString():typeof e=="object"&&e.text!=null&&(i=e.text,a=(o=e.parameters)!==null&&o!==void 0?o:{}),s||(pO(i),mO(a)),{validatedQuery:i,params:a}}te.validateQueryAndParameters=fO;function dO(e,r){if(!es(e))throw new TypeError(r+" expected to be an object but was: "+(0,Mr.stringify)(e));return e}te.assertObject=dO;function X_(e,r){if(!J_(e))throw new TypeError((0,Mr.stringify)(r)+" expected to be string but was: "+(0,Mr.stringify)(e));return e}te.assertString=X_;function hO(e,r){if(typeof e!="number")throw new TypeError(r+" expected to be a number but was: "+(0,Mr.stringify)(e));return e}te.assertNumber=hO;function vO(e,r){if(typeof e!="number"&&typeof e!="bigint"&&!(0,uO.isInt)(e))throw new TypeError(r+" expected to be either a number or an Integer object but was: "+(0,Mr.stringify)(e));return e}te.assertNumberOrInteger=vO;function _O(e,r){if(Object.prototype.toString.call(e)!=="[object Date]")throw new TypeError(r+" expected to be a standard JavaScript Date but was: "+(0,Mr.stringify)(e));if(Number.isNaN(e.getTime()))throw new TypeError(r+" expected to be valid JavaScript Date but its time was NaN: "+(0,Mr.stringify)(e));return e}te.assertValidDate=_O;function pO(e){if(X_(e,"Cypher query"),e.trim().length===0)throw new TypeError("Cypher query is expected to be a non-empty string.")}function mO(e){if(!es(e)){var r=e.constructor!=null?" "+e.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:".concat(r," ").concat(JSON.stringify(e)))}}function J_(e){return Object.prototype.toString.call(e)==="[object String]"}te.isString=J_;function ep(e,r){var t,n;if(e===r)return!0;if(e===null||r===null)return!1;if(typeof e=="object"&&typeof r=="object"){var o=Object.keys(e),i=Object.keys(r);if(o.length!==i.length)return!1;try{for(var a=aO(o),s=a.next();!s.done;s=a.next()){var c=s.value;if(!ep(e[c],r[c]))return!1}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!0}return!1}te.equals=ep;(function(e){var r=f&&f.__createBinding||(Object.create?function(E,R,M,B){B===void 0&&(B=M);var ee=Object.getOwnPropertyDescriptor(R,M);(!ee||("get"in ee?!R.__esModule:ee.writable||ee.configurable))&&(ee={enumerable:!0,get:function(){return R[M]}}),Object.defineProperty(E,B,ee)}:function(E,R,M,B){B===void 0&&(B=M),E[B]=R[M]}),t=f&&f.__setModuleDefault||(Object.create?function(E,R){Object.defineProperty(E,"default",{enumerable:!0,value:R})}:function(E,R){E.default=R}),n=f&&f.__importStar||function(E){if(E&&E.__esModule)return E;var R={};if(E!=null)for(var M in E)M!=="default"&&Object.prototype.hasOwnProperty.call(E,M)&&r(R,E,M);return t(R,E),R};Object.defineProperty(e,"__esModule",{value:!0}),e.floorMod=e.floorDiv=e.assertValidZoneId=e.assertValidNanosecond=e.assertValidSecond=e.assertValidMinute=e.assertValidHour=e.assertValidDay=e.assertValidMonth=e.assertValidYear=e.timeZoneOffsetInSeconds=e.totalNanoseconds=e.newDate=e.toStandardDate=e.isoStringToStandardDate=e.dateToIsoString=e.timeZoneOffsetToIsoString=e.timeToIsoString=e.durationToIsoString=e.dateToEpochDay=e.localDateTimeToEpochSecond=e.localTimeToNanoOfDay=e.normalizeNanosecondsForDuration=e.normalizeSecondsForDuration=e.SECONDS_PER_DAY=e.DAYS_PER_400_YEAR_CYCLE=e.DAYS_0000_TO_1970=e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE=e.NANOS_PER_MILLISECOND=e.NANOS_PER_SECOND=e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE=e.MINUTES_PER_HOUR=e.NANOSECOND_OF_SECOND_RANGE=e.SECOND_OF_MINUTE_RANGE=e.MINUTE_OF_HOUR_RANGE=e.HOUR_OF_DAY_RANGE=e.DAY_OF_MONTH_RANGE=e.MONTH_OF_YEAR_RANGE=e.YEAR_RANGE=void 0;var o=n(Ne),i=he,a=te,s=function(){function E(R,M){this._minNumber=R,this._maxNumber=M,this._minInteger=(0,o.int)(R),this._maxInteger=(0,o.int)(M)}return E.prototype.contains=function(R){if((0,o.isInt)(R)&&R instanceof o.default)return R.greaterThanOrEqual(this._minInteger)&&R.lessThanOrEqual(this._maxInteger);if(typeof R=="bigint"){var M=(0,o.int)(R);return M.greaterThanOrEqual(this._minInteger)&&M.lessThanOrEqual(this._maxInteger)}else return R>=this._minNumber&&R<=this._maxNumber},E.prototype.toString=function(){return"[".concat(this._minNumber,", ").concat(this._maxNumber,"]")},E}();e.YEAR_RANGE=new s(-999999999,999999999),e.MONTH_OF_YEAR_RANGE=new s(1,12),e.DAY_OF_MONTH_RANGE=new s(1,31),e.HOUR_OF_DAY_RANGE=new s(0,23),e.MINUTE_OF_HOUR_RANGE=new s(0,59),e.SECOND_OF_MINUTE_RANGE=new s(0,59),e.NANOSECOND_OF_SECOND_RANGE=new s(0,999999999),e.MINUTES_PER_HOUR=60,e.SECONDS_PER_MINUTE=60,e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE*e.MINUTES_PER_HOUR,e.NANOS_PER_SECOND=1e9,e.NANOS_PER_MILLISECOND=1e6,e.NANOS_PER_MINUTE=e.NANOS_PER_SECOND*e.SECONDS_PER_MINUTE,e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE*e.MINUTES_PER_HOUR,e.DAYS_0000_TO_1970=719528,e.DAYS_PER_400_YEAR_CYCLE=146097,e.SECONDS_PER_DAY=86400;function c(E,R){return(0,o.int)(E).add(Y(R,e.NANOS_PER_SECOND))}e.normalizeSecondsForDuration=c;function u(E){return D(E,e.NANOS_PER_SECOND)}e.normalizeNanosecondsForDuration=u;function l(E,R,M,B){E=(0,o.int)(E),R=(0,o.int)(R),M=(0,o.int)(M),B=(0,o.int)(B);var ee=E.multiply(e.NANOS_PER_HOUR);return ee=ee.add(R.multiply(e.NANOS_PER_MINUTE)),ee=ee.add(M.multiply(e.NANOS_PER_SECOND)),ee.add(B)}e.localTimeToNanoOfDay=l;function h(E,R,M,B,ee,Pe,ze){var Ye=_(E,R,M),it=$(B,ee,Pe);return Ye.multiply(e.SECONDS_PER_DAY).add(it)}e.localDateTimeToEpochSecond=h;function _(E,R,M){E=(0,o.int)(E),R=(0,o.int)(R),M=(0,o.int)(M);var B=E.multiply(365);return E.greaterThanOrEqual(0)?B=B.add(E.add(3).div(4).subtract(E.add(99).div(100)).add(E.add(399).div(400))):B=B.subtract(E.div(-4).subtract(E.div(-100)).add(E.div(-400))),B=B.add(R.multiply(367).subtract(362).div(12)),B=B.add(M.subtract(1)),R.greaterThan(2)&&(B=B.subtract(1),q(E)||(B=B.subtract(1))),B.subtract(e.DAYS_0000_TO_1970)}e.dateToEpochDay=_;function y(E,R,M,B){var ee=W(E),Pe=W(R),ze=N(M,B);return"P".concat(ee,"M").concat(Pe,"DT").concat(ze,"S")}e.durationToIsoString=y;function b(E,R,M,B){var ee=W(E,2),Pe=W(R,2),ze=W(M,2),Ye=Z(B);return"".concat(ee,":").concat(Pe,":").concat(ze).concat(Ye)}e.timeToIsoString=b;function O(E){if(E=(0,o.int)(E),E.equals(0))return"Z";var R=E.isNegative();R&&(E=E.multiply(-1));var M=R?"-":"+",B=W(E.div(e.SECONDS_PER_HOUR),2),ee=W(E.div(e.SECONDS_PER_MINUTE).modulo(e.MINUTES_PER_HOUR),2),Pe=E.modulo(e.SECONDS_PER_MINUTE),ze=Pe.equals(0)?null:W(Pe,2);return ze!=null?"".concat(M).concat(B,":").concat(ee,":").concat(ze):"".concat(M).concat(B,":").concat(ee)}e.timeZoneOffsetToIsoString=O;function P(E,R,M){var B=ge(E),ee=W(R,2),Pe=W(M,2);return"".concat(B,"-").concat(ee,"-").concat(Pe)}e.dateToIsoString=P;function I(E){return new Date(E)}e.isoStringToStandardDate=I;function j(E){return new Date(E)}e.toStandardDate=j;function S(E){return new Date(E)}e.newDate=S;function A(E,R){R=R??0;var M=E.getMilliseconds()*e.NANOS_PER_MILLISECOND;return oe(R,M)}e.totalNanoseconds=A;function T(E){var R=E.getSeconds()>=E.getUTCSeconds()?E.getSeconds()-E.getUTCSeconds():E.getSeconds()-E.getUTCSeconds()+60,M=E.getTimezoneOffset();return M===0?0+R:-1*M*e.SECONDS_PER_MINUTE+R}e.timeZoneOffsetInSeconds=T;function F(E){return K(E,e.YEAR_RANGE,"Year")}e.assertValidYear=F;function z(E){return K(E,e.MONTH_OF_YEAR_RANGE,"Month")}e.assertValidMonth=z;function x(E){return K(E,e.DAY_OF_MONTH_RANGE,"Day")}e.assertValidDay=x;function re(E){return K(E,e.HOUR_OF_DAY_RANGE,"Hour")}e.assertValidHour=re;function le(E){return K(E,e.MINUTE_OF_HOUR_RANGE,"Minute")}e.assertValidMinute=le;function be(E){return K(E,e.SECOND_OF_MINUTE_RANGE,"Second")}e.assertValidSecond=be;function ne(E){return K(E,e.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")}e.assertValidNanosecond=ne;var me=new Map,X=function(E,R){return(0,i.newError)("".concat(R,' is expected to be a valid ZoneId but was: "').concat(E,'"'))};function U(E,R){var M=me.get(R);if(M!==!0){if(M===!1)throw X(R,E);try{Intl.DateTimeFormat(void 0,{timeZone:R}),me.set(R,!0)}catch{throw me.set(R,!1),X(R,E)}}}e.assertValidZoneId=U;function K(E,R,M){if((0,a.assertNumberOrInteger)(E,M),!R.contains(E))throw(0,i.newError)("".concat(M," is expected to be in range ").concat(R.toString()," but was: ").concat(E.toString()));return E}function $(E,R,M){E=(0,o.int)(E),R=(0,o.int)(R),M=(0,o.int)(M);var B=E.multiply(e.SECONDS_PER_HOUR);return B=B.add(R.multiply(e.SECONDS_PER_MINUTE)),B.add(M)}function q(E){return E=(0,o.int)(E),E.modulo(4).equals(0)?E.modulo(100).equals(0)?!!E.modulo(400).equals(0):!0:!1}function Y(E,R){E=(0,o.int)(E),R=(0,o.int)(R);var M=E.div(R);return E.isPositive()!==R.isPositive()&&M.multiply(R).notEquals(E)&&(M=M.subtract(1)),M}e.floorDiv=Y;function D(E,R){return E=(0,o.int)(E),R=(0,o.int)(R),E.subtract(Y(E,R).multiply(R))}e.floorMod=D;function N(E,R){E=(0,o.int)(E),R=(0,o.int)(R);var M,B,ee=E.isNegative(),Pe=R.greaterThan(0);return ee&&Pe?E.equals(-1)?M="-0":M=E.add(1).toString():M=E.toString(),Pe&&(ee?B=Z(R.negate().add(2*e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND)):B=Z(R.add(e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND))),B!=null?M+B:M}function Z(E){return E=(0,o.int)(E),E.equals(0)?"":"."+W(E,9)}function ge(E){var R=(0,o.int)(E);return R.isNegative()||R.greaterThan(9999)?W(R,6,{usePositiveSign:!0}):W(R,4)}function W(E,R,M){E=(0,o.int)(E);var B=E.isNegative();B&&(E=E.negate());var ee=E.toString();if(R!=null)for(;ee.length<R;)ee="0"+ee;return B?"-"+ee:(M==null?void 0:M.usePositiveSign)===!0?"+"+ee:ee}function oe(E,R){return E instanceof o.default?E.add(R):typeof E=="bigint"?E+BigInt(R):E+R}})(Jf);var yO=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),bO=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),tp=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&yO(r,e,t);return bO(r,e),r},gO=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(pe,"__esModule",{value:!0});pe.isDateTime=pe.DateTime=pe.isLocalDateTime=pe.LocalDateTime=pe.isDate=pe.Date=pe.isTime=pe.Time=pe.isLocalTime=pe.LocalTime=pe.isDuration=pe.Duration=void 0;var Q=tp(Jf),At=te,OO=he,jr=tp(Ne),Pn={value:!0,enumerable:!1,configurable:!1,writable:!1},rp="__isDuration__",np="__isLocalTime__",op="__isTime__",ip="__isDate__",ap="__isLocalDateTime__",up="__isDateTime__",sp=function(){function e(r,t,n,o){this.months=(0,At.assertNumberOrInteger)(r,"Months"),this.days=(0,At.assertNumberOrInteger)(t,"Days"),(0,At.assertNumberOrInteger)(n,"Seconds"),(0,At.assertNumberOrInteger)(o,"Nanoseconds"),this.seconds=Q.normalizeSecondsForDuration(n,o),this.nanoseconds=Q.normalizeNanosecondsForDuration(o),Object.freeze(this)}return e.prototype.toString=function(){return Q.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},e}();pe.Duration=sp;Object.defineProperty(sp.prototype,rp,Pn);function EO(e){return Cn(e,rp)}pe.isDuration=EO;var cp=function(){function e(r,t,n,o){this.hour=Q.assertValidHour(r),this.minute=Q.assertValidMinute(t),this.second=Q.assertValidSecond(n),this.nanosecond=Q.assertValidNanosecond(o),Object.freeze(this)}return e.fromStandardDate=function(r,t){Go(r,t);var n=Q.totalNanoseconds(r,t);return new e(r.getHours(),r.getMinutes(),r.getSeconds(),n instanceof jr.default?n.toInt():typeof n=="bigint"?(0,jr.int)(n).toInt():n)},e.prototype.toString=function(){return Q.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},e}();pe.LocalTime=cp;Object.defineProperty(cp.prototype,np,Pn);function wO(e){return Cn(e,np)}pe.isLocalTime=wO;var lp=function(){function e(r,t,n,o,i){this.hour=Q.assertValidHour(r),this.minute=Q.assertValidMinute(t),this.second=Q.assertValidSecond(n),this.nanosecond=Q.assertValidNanosecond(o),this.timeZoneOffsetSeconds=(0,At.assertNumberOrInteger)(i,"Time zone offset in seconds"),Object.freeze(this)}return e.fromStandardDate=function(r,t){return Go(r,t),new e(r.getHours(),r.getMinutes(),r.getSeconds(),(0,jr.toNumber)(Q.totalNanoseconds(r,t)),Q.timeZoneOffsetInSeconds(r))},e.prototype.toString=function(){return Q.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+Q.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},e}();pe.Time=lp;Object.defineProperty(lp.prototype,op,Pn);function TO(e){return Cn(e,op)}pe.isTime=TO;var fp=function(){function e(r,t,n){this.year=Q.assertValidYear(r),this.month=Q.assertValidMonth(t),this.day=Q.assertValidDay(n),Object.freeze(this)}return e.fromStandardDate=function(r){return Go(r),new e(r.getFullYear(),r.getMonth()+1,r.getDate())},e.prototype.toStandardDate=function(){return Q.isoStringToStandardDate(this.toString())},e.prototype.toString=function(){return Q.dateToIsoString(this.year,this.month,this.day)},e}();pe.Date=fp;Object.defineProperty(fp.prototype,ip,Pn);function SO(e){return Cn(e,ip)}pe.isDate=SO;var dp=function(){function e(r,t,n,o,i,a,s){this.year=Q.assertValidYear(r),this.month=Q.assertValidMonth(t),this.day=Q.assertValidDay(n),this.hour=Q.assertValidHour(o),this.minute=Q.assertValidMinute(i),this.second=Q.assertValidSecond(a),this.nanosecond=Q.assertValidNanosecond(s),Object.freeze(this)}return e.fromStandardDate=function(r,t){return Go(r,t),new e(r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),(0,jr.toNumber)(Q.totalNanoseconds(r,t)))},e.prototype.toStandardDate=function(){return Q.isoStringToStandardDate(this.toString())},e.prototype.toString=function(){return vp(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},e}();pe.LocalDateTime=dp;Object.defineProperty(dp.prototype,ap,Pn);function PO(e){return Cn(e,ap)}pe.isLocalDateTime=PO;var hp=function(){function e(r,t,n,o,i,a,s,c,u){this.year=Q.assertValidYear(r),this.month=Q.assertValidMonth(t),this.day=Q.assertValidDay(n),this.hour=Q.assertValidHour(o),this.minute=Q.assertValidMinute(i),this.second=Q.assertValidSecond(a),this.nanosecond=Q.assertValidNanosecond(s);var l=gO(IO(c,u),2),h=l[0],_=l[1];this.timeZoneOffsetSeconds=h,this.timeZoneId=_??void 0,Object.freeze(this)}return e.fromStandardDate=function(r,t){return Go(r,t),new e(r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),(0,jr.toNumber)(Q.totalNanoseconds(r,t)),Q.timeZoneOffsetInSeconds(r),null)},e.prototype.toStandardDate=function(){return Q.toStandardDate(this._toUTC())},e.prototype.toString=function(){var r,t=vp(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),n=this.timeZoneOffsetSeconds!=null?Q.timeZoneOffsetToIsoString((r=this.timeZoneOffsetSeconds)!==null&&r!==void 0?r:0):"",o=this.timeZoneId!=null?"[".concat(this.timeZoneId,"]"):"";return t+n+o},e.prototype._toUTC=function(){var r;if(this.timeZoneOffsetSeconds===void 0)throw new Error("Requires DateTime created with time zone offset");var t=Q.localDateTimeToEpochSecond(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),n=t.subtract((r=this.timeZoneOffsetSeconds)!==null&&r!==void 0?r:0);return(0,jr.int)(n).multiply(1e3).add((0,jr.int)(this.nanosecond).div(1e6)).toNumber()},e}();pe.DateTime=hp;Object.defineProperty(hp.prototype,up,Pn);function CO(e){return Cn(e,up)}pe.isDateTime=CO;function Cn(e,r){return e!=null&&e[r]===!0}function vp(e,r,t,n,o,i,a){return Q.dateToIsoString(e,r,t)+"T"+Q.timeToIsoString(n,o,i,a)}function IO(e,r){var t=e!=null,n=r!=null&&r!=="";if(!t&&!n)throw(0,OO.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: ".concat(e," and id: ").concat(r));var o=[void 0,void 0];return t&&((0,At.assertNumberOrInteger)(e,"Time zone offset in seconds"),o[0]=e),n&&((0,At.assertString)(r,"Time zone ID"),Q.assertValidZoneId("Time zone ID",r),o[1]=r),o}function Go(e,r){(0,At.assertValidDate)(e,"Standard date"),r!=null&&(0,At.assertNumberOrInteger)(r,"Nanosecond")}var Oe={};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.isPathSegment=Oe.PathSegment=Oe.isPath=Oe.Path=Oe.isUnboundRelationship=Oe.UnboundRelationship=Oe.isRelationship=Oe.Relationship=Oe.isNode=Oe.Node=void 0;var ed=Sn,Ko={value:!0,enumerable:!1,configurable:!1,writable:!1},_p="__isNode__",pp="__isRelationship__",mp="__isUnboundRelationship__",yp="__isPath__",bp="__isPathSegment__";function Zo(e,r){return e!=null&&e[r]===!0}var gp=function(){function e(r,t,n,o){this.identity=r,this.labels=t,this.properties=n,this.elementId=Do(o,function(){return r.toString()})}return e.prototype.toString=function(){for(var r="("+this.elementId,t=0;t<this.labels.length;t++)r+=":"+this.labels[t];var n=Object.keys(this.properties);if(n.length>0){r+=" {";for(var t=0;t<n.length;t++)t>0&&(r+=","),r+=n[t]+":"+(0,ed.stringify)(this.properties[n[t]]);r+="}"}return r+=")",r},e}();Oe.Node=gp;Object.defineProperty(gp.prototype,_p,Ko);function AO(e){return Zo(e,_p)}Oe.isNode=AO;var Du=function(){function e(r,t,n,o,i,a,s,c){this.identity=r,this.start=t,this.end=n,this.type=o,this.properties=i,this.elementId=Do(a,function(){return r.toString()}),this.startNodeElementId=Do(s,function(){return t.toString()}),this.endNodeElementId=Do(c,function(){return n.toString()})}return e.prototype.toString=function(){var r="("+this.startNodeElementId+")-[:"+this.type,t=Object.keys(this.properties);if(t.length>0){r+=" {";for(var n=0;n<t.length;n++)n>0&&(r+=","),r+=t[n]+":"+(0,ed.stringify)(this.properties[t[n]]);r+="}"}return r+="]->("+this.endNodeElementId+")",r},e}();Oe.Relationship=Du;Object.defineProperty(Du.prototype,pp,Ko);function RO(e){return Zo(e,pp)}Oe.isRelationship=RO;var Op=function(){function e(r,t,n,o){this.identity=r,this.type=t,this.properties=n,this.elementId=Do(o,function(){return r.toString()})}return e.prototype.bind=function(r,t){return new Du(this.identity,r,t,this.type,this.properties,this.elementId)},e.prototype.bindTo=function(r,t){return new Du(this.identity,r.identity,t.identity,this.type,this.properties,this.elementId,r.elementId,t.elementId)},e.prototype.toString=function(){var r="-[:"+this.type,t=Object.keys(this.properties);if(t.length>0){r+=" {";for(var n=0;n<t.length;n++)n>0&&(r+=","),r+=t[n]+":"+(0,ed.stringify)(this.properties[t[n]]);r+="}"}return r+="]->",r},e}();Oe.UnboundRelationship=Op;Object.defineProperty(Op.prototype,mp,Ko);function jO(e){return Zo(e,mp)}Oe.isUnboundRelationship=jO;var Ep=function(){function e(r,t,n){this.start=r,this.relationship=t,this.end=n}return e}();Oe.PathSegment=Ep;Object.defineProperty(Ep.prototype,bp,Ko);function $O(e){return Zo(e,bp)}Oe.isPathSegment=$O;var wp=function(){function e(r,t,n){this.start=r,this.end=t,this.segments=n,this.length=n.length}return e}();Oe.Path=wp;Object.defineProperty(wp.prototype,yp,Ko);function MO(e){return Zo(e,yp)}Oe.isPath=MO;function Do(e,r){return e??r()}var td={},kl=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Nl=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},Dl=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(td,"__esModule",{value:!0});var uh=he;function kO(e){var r={};return e.forEach(function(t,n){r[t]=n}),r}var NO=function(){function e(r,t,n){this.keys=r,this.length=r.length,this._fields=t,this._fieldLookup=n??kO(r)}return e.prototype.forEach=function(r){var t,n;try{for(var o=Nl(this.entries()),i=o.next();!i.done;i=o.next()){var a=Dl(i.value,2),s=a[0],c=a[1];r(c,s,this)}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},e.prototype.map=function(r){var t,n,o=[];try{for(var i=Nl(this.entries()),a=i.next();!a.done;a=i.next()){var s=Dl(a.value,2),c=s[0],u=s[1];o.push(r(u,c,this))}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return o},e.prototype.entries=function(){var r;return kl(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,[this.keys[r],this._fields[r]]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype.values=function(){var r;return kl(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,this._fields[r]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype[Symbol.iterator]=function(){var r;return kl(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,this._fields[r]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype.toObject=function(){var r,t,n={};try{for(var o=Nl(this.entries()),i=o.next();!i.done;i=o.next()){var a=Dl(i.value,2),s=a[0],c=a[1];n[s]=c}}catch(u){r={error:u}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(r)throw r.error}}return n},e.prototype.get=function(r){var t;if(typeof r!="number"){if(t=this._fieldLookup[r],t===void 0)throw(0,uh.newError)("This record has no field with key '".concat(r.toString(),"', available keys are: [")+this.keys.toString()+"].")}else t=r;if(t>this._fields.length-1||t<0)throw(0,uh.newError)("This record has no field with index '"+t.toString()+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[t]},e.prototype.has=function(r){return typeof r=="number"?r>=0&&r<this._fields.length:this._fieldLookup[r]!==void 0},e}();td.default=NO;var pn={};Object.defineProperty(pn,"__esModule",{value:!0});pn.isPoint=pn.Point=void 0;var cu=te,Tp="__isPoint__",Sp=function(){function e(r,t,n,o){this.srid=(0,cu.assertNumberOrInteger)(r,"SRID"),this.x=(0,cu.assertNumber)(t,"X coordinate"),this.y=(0,cu.assertNumber)(n,"Y coordinate"),this.z=o==null?o:(0,cu.assertNumber)(o,"Z coordinate"),Object.freeze(this)}return e.prototype.toString=function(){return this.z!=null&&!isNaN(this.z)?"Point{srid=".concat(mr(this.srid),", x=").concat(mr(this.x),", y=").concat(mr(this.y),", z=").concat(mr(this.z),"}"):"Point{srid=".concat(mr(this.srid),", x=").concat(mr(this.x),", y=").concat(mr(this.y),"}")},e}();pn.Point=Sp;function mr(e){return Number.isInteger(e)?e.toString()+".0":e.toString()}Object.defineProperty(Sp.prototype,Tp,{value:!0,enumerable:!1,configurable:!1,writable:!1});function DO(e){var r=e;return e!=null&&r[Tp]===!0}pn.isPoint=DO;var Ee={},LO=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),UO=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),FO=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&LO(r,e,t);return UO(r,e),r};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.notificationCategory=Ee.notificationSeverityLevel=Ee.Stats=Ee.QueryStatistics=Ee.ProfiledPlan=Ee.Plan=Ee.Notification=Ee.ServerInfo=Ee.queryType=void 0;var sh=FO(Ne),BO=function(){function e(r,t,n,o){var i,a,s;this.query={text:r,parameters:t},this.queryType=n.type,this.counters=new Pp((i=n.stats)!==null&&i!==void 0?i:{}),this.updateStatistics=this.counters,this.plan=n.plan!=null||n.profile!=null?new bf((a=n.plan)!==null&&a!==void 0?a:n.profile):!1,this.profile=n.profile!=null?new gf(n.profile):!1,this.notifications=this._buildNotifications(n.notifications),this.server=new Ip(n.server,o),this.resultConsumedAfter=n.result_consumed_after,this.resultAvailableAfter=n.result_available_after,this.database={name:(s=n.db)!==null&&s!==void 0?s:null}}return e.prototype._buildNotifications=function(r){return r==null?[]:r.map(function(t){return new Cp(t)})},e.prototype.hasPlan=function(){return this.plan instanceof bf},e.prototype.hasProfile=function(){return this.profile instanceof gf},e}(),bf=function(){function e(r){this.operatorType=r.operatorType,this.identifiers=r.identifiers,this.arguments=r.args,this.children=r.children!=null?r.children.map(function(t){return new e(t)}):[]}return e}();Ee.Plan=bf;var gf=function(){function e(r){this.operatorType=r.operatorType,this.identifiers=r.identifiers,this.arguments=r.args,this.dbHits=nn("dbHits",r),this.rows=nn("rows",r),this.pageCacheMisses=nn("pageCacheMisses",r),this.pageCacheHits=nn("pageCacheHits",r),this.pageCacheHitRatio=nn("pageCacheHitRatio",r),this.time=nn("time",r),this.children=r.children!=null?r.children.map(function(t){return new e(t)}):[]}return e.prototype.hasPageCacheStats=function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0},e}();Ee.ProfiledPlan=gf;var xO=function(){function e(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0}return e}();Ee.Stats=xO;var Pp=function(){function e(r){var t=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(r).forEach(function(n){var o=n.replace(/(-\w)/g,function(i){return i[1].toUpperCase()});o in t._stats?t._stats[o]=fn(r[n]):o==="systemUpdates"?t._systemUpdates=fn(r[n]):o==="containsSystemUpdates"?t._containsSystemUpdates=r[n]:o==="containsUpdates"&&(t._containsUpdates=r[n])}),this._stats=Object.freeze(this._stats)}return e.prototype.containsUpdates=function(){var r=this;return this._containsUpdates!==void 0?this._containsUpdates:Object.keys(this._stats).reduce(function(t,n){return t+r._stats[n]},0)>0},e.prototype.updates=function(){return this._stats},e.prototype.containsSystemUpdates=function(){return this._containsSystemUpdates!==void 0?this._containsSystemUpdates:this._systemUpdates>0},e.prototype.systemUpdates=function(){return this._systemUpdates},e}();Ee.QueryStatistics=Pp;var ts={WARNING:"WARNING",INFORMATION:"INFORMATION",UNKNOWN:"UNKNOWN"};Ee.notificationSeverityLevel=ts;Object.freeze(ts);var WO=Object.values(ts),rs={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",DEPRECATION:"DEPRECATION",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",GENERIC:"GENERIC",UNKNOWN:"UNKNOWN"};Ee.notificationCategory=rs;Object.freeze(rs);var VO=Object.values(rs),Cp=function(){function e(r){this.code=r.code,this.title=r.title,this.description=r.description,this.severity=r.severity,this.position=e._constructPosition(r.position),this.severityLevel=WO.includes(r.severity)?r.severity:ts.UNKNOWN,this.rawSeverityLevel=r.severity,this.category=VO.includes(r.category)?r.category:rs.UNKNOWN,this.rawCategory=r.category}return e._constructPosition=function(r){return r==null?{}:{offset:fn(r.offset),line:fn(r.line),column:fn(r.column)}},e}();Ee.Notification=Cp;var Ip=function(){function e(r,t){r!=null&&(this.address=r.address,this.agent=r.version),this.protocolVersion=t}return e}();Ee.ServerInfo=Ip;function fn(e){return e instanceof sh.default?e.toNumber():typeof e=="bigint"?(0,sh.int)(e).toNumber():e}function nn(e,r,t){if(t===void 0&&(t=0),r!==!1&&e in r){var n=r[e];return fn(n)}else return t}var qO={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"};Ee.queryType=qO;Ee.default=BO;var kr={};Object.defineProperty(kr,"__esModule",{value:!0});kr.notificationFilterDisabledCategory=kr.notificationFilterMinimumSeverityLevel=void 0;var Ap={OFF:"OFF",WARNING:"WARNING",INFORMATION:"INFORMATION"};kr.notificationFilterMinimumSeverityLevel=Ap;Object.freeze(Ap);var Rp={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",DEPRECATION:"DEPRECATION",GENERIC:"GENERIC"};kr.notificationFilterDisabledCategory=Rp;Object.freeze(Rp);var HO=function(){function e(){throw this.minimumSeverityLevel=void 0,this.disabledCategories=void 0,new Error("Not implemented")}return e}();kr.default=HO;var Qo={},ae={},zt={};Object.defineProperty(zt,"__esModule",{value:!0});zt.FailedObserver=zt.CompletedObserver=void 0;var zO=function(){function e(){}return e.prototype.subscribe=function(r){Lo(r,r.onKeys,[]),Lo(r,r.onCompleted,{})},e.prototype.cancel=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.prepareToHandleSingleResponse=function(){},e.prototype.markCompleted=function(){},e.prototype.onError=function(r){throw new Error("CompletedObserver not supposed to call onError",{cause:r})},e}();zt.CompletedObserver=zO;var YO=function(){function e(r){var t=r.error,n=r.onError;this._error=t,this._beforeError=n,this._observers=[],this.onError(t)}return e.prototype.subscribe=function(r){Lo(r,r.onError,this._error),this._observers.push(r)},e.prototype.onError=function(r){Lo(this,this._beforeError,r),this._observers.forEach(function(t){return Lo(t,t.onError,r)})},e.prototype.cancel=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.markCompleted=function(){},e.prototype.prepareToHandleSingleResponse=function(){},e}();zt.FailedObserver=YO;function Lo(e,r,t){r!=null&&r.bind(e)(t)}var rr={},GO=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),KO=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),ZO=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&GO(r,e,t);return KO(r,e),r},QO=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},XO=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(rr,"__esModule",{value:!0});rr.Bookmarks=void 0;var ch=ZO(te),JO="bookmarks",jp=function(){function e(r){this._values=t1(r)}return e.empty=function(){return e1},e.prototype.isEmpty=function(){return this._values.length===0},e.prototype.values=function(){return this._values},e.prototype[Symbol.iterator]=function(){return this._values[Symbol.iterator]()},e.prototype.asBeginTransactionParameters=function(){var r;return this.isEmpty()?{}:(r={},r[JO]=this._values,r)},e}();rr.Bookmarks=jp;var e1=new jp(null);function t1(e){if(e==null||e==="")return[];if(ch.isString(e))return[e];if(Array.isArray(e)){for(var r=new Set,t=$p(e),n=0;n<t.length;n++){var o=t[n];if(o!=null){if(!ch.isString(o))throw new TypeError("Bookmark value should be a string, given: '".concat(o,"'"));r.add(o)}}return XO([],QO(r),!1)}throw new TypeError("Bookmarks should either be a string or a string array, given: '".concat(e,"'"))}function $p(e){return e.reduce(function(r,t){return Array.isArray(t)?r.concat($p(t)):r.concat(t)},[])}var G={};Object.defineProperty(G,"__esModule",{value:!0});G.TELEMETRY_APIS=G.BOLT_PROTOCOL_V5_4=G.BOLT_PROTOCOL_V5_3=G.BOLT_PROTOCOL_V5_2=G.BOLT_PROTOCOL_V5_1=G.BOLT_PROTOCOL_V5_0=G.BOLT_PROTOCOL_V4_4=G.BOLT_PROTOCOL_V4_3=G.BOLT_PROTOCOL_V4_2=G.BOLT_PROTOCOL_V4_1=G.BOLT_PROTOCOL_V4_0=G.BOLT_PROTOCOL_V3=G.BOLT_PROTOCOL_V2=G.BOLT_PROTOCOL_V1=G.DEFAULT_POOL_MAX_SIZE=G.DEFAULT_POOL_ACQUISITION_TIMEOUT=G.DEFAULT_CONNECTION_TIMEOUT_MILLIS=G.ACCESS_MODE_WRITE=G.ACCESS_MODE_READ=G.FETCH_ALL=void 0;var r1=-1;G.FETCH_ALL=r1;var n1=60*1e3;G.DEFAULT_POOL_ACQUISITION_TIMEOUT=n1;var o1=100;G.DEFAULT_POOL_MAX_SIZE=o1;var i1=3e4;G.DEFAULT_CONNECTION_TIMEOUT_MILLIS=i1;var a1="READ";G.ACCESS_MODE_READ=a1;var u1="WRITE";G.ACCESS_MODE_WRITE=u1;var s1=1;G.BOLT_PROTOCOL_V1=s1;var c1=2;G.BOLT_PROTOCOL_V2=c1;var l1=3;G.BOLT_PROTOCOL_V3=l1;var f1=4;G.BOLT_PROTOCOL_V4_0=f1;var d1=4.1;G.BOLT_PROTOCOL_V4_1=d1;var h1=4.2;G.BOLT_PROTOCOL_V4_2=h1;var v1=4.3;G.BOLT_PROTOCOL_V4_3=v1;var _1=4.4;G.BOLT_PROTOCOL_V4_4=_1;var p1=5;G.BOLT_PROTOCOL_V5_0=p1;var m1=5.1;G.BOLT_PROTOCOL_V5_1=m1;var y1=5.2;G.BOLT_PROTOCOL_V5_2=y1;var b1=5.3;G.BOLT_PROTOCOL_V5_3=b1;var g1=5.4;G.BOLT_PROTOCOL_V5_4=g1;var O1={MANAGED_TRANSACTION:0,UNMANAGED_TRANSACTION:1,AUTO_COMMIT_TRANSACTION:2,EXECUTE_QUERY:3};G.TELEMETRY_APIS=O1;var lt={},In={},E1=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),on;Object.defineProperty(In,"__esModule",{value:!0});In.Logger=void 0;var Mp=he,Of="error",Ef="warn",Vo="info",wf="debug",w1=Vo,Lu=(on={},on[Of]=0,on[Ef]=1,on[Vo]=2,on[wf]=3,on),kp=function(){function e(r,t){this._level=r,this._loggerFunction=t}return e.create=function(r){if((r==null?void 0:r.logging)!=null){var t=r.logging,n=P1(t),o=C1(t);return new e(n,o)}return this.noOp()},e.noOp=function(){return S1},e.prototype.isErrorEnabled=function(){return lu(this._level,Of)},e.prototype.error=function(r){this.isErrorEnabled()&&this._loggerFunction(Of,r)},e.prototype.isWarnEnabled=function(){return lu(this._level,Ef)},e.prototype.warn=function(r){this.isWarnEnabled()&&this._loggerFunction(Ef,r)},e.prototype.isInfoEnabled=function(){return lu(this._level,Vo)},e.prototype.info=function(r){this.isInfoEnabled()&&this._loggerFunction(Vo,r)},e.prototype.isDebugEnabled=function(){return lu(this._level,wf)},e.prototype.debug=function(r){this.isDebugEnabled()&&this._loggerFunction(wf,r)},e}();In.Logger=kp;var T1=function(e){E1(r,e);function r(){return e.call(this,Vo,function(t,n){})||this}return r.prototype.isErrorEnabled=function(){return!1},r.prototype.error=function(t){},r.prototype.isWarnEnabled=function(){return!1},r.prototype.warn=function(t){},r.prototype.isInfoEnabled=function(){return!1},r.prototype.info=function(t){},r.prototype.isDebugEnabled=function(){return!1},r.prototype.debug=function(t){},r}(kp),S1=new T1;function lu(e,r){return Lu[e]>=Lu[r]}function P1(e){if((e==null?void 0:e.level)!=null){var r=e.level,t=Lu[r];if(t==null&&t!==0)throw(0,Mp.newError)("Illegal logging level: ".concat(r,". Supported levels are: ").concat(Object.keys(Lu).toString()));return r}return w1}function C1(e){var r,t;if((e==null?void 0:e.logger)!=null){var n=e.logger;if(n!=null&&typeof n=="function")return n}throw(0,Mp.newError)("Illegal logger function: ".concat((t=(r=e==null?void 0:e.logger)===null||r===void 0?void 0:r.toString())!==null&&t!==void 0?t:"undefined"))}var Np=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Uo=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Fo=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(lt,"__esModule",{value:!0});lt.EMPTY_CONNECTION_HOLDER=lt.ReadOnlyConnectionHolder=lt.ConnectionHolder=void 0;var I1=he,A1=te,R1=G,lh=rr,j1=In,rd=function(){function e(r){var t=r.mode,n=r.database,o=n===void 0?"":n,i=r.bookmarks,a=r.connectionProvider,s=r.impersonatedUser,c=r.onDatabaseNameResolved,u=r.getConnectionAcquistionBookmarks,l=r.auth,h=r.log;this._mode=t??R1.ACCESS_MODE_WRITE,this._closed=!1,this._database=o!=null?(0,A1.assertString)(o,"database"):"",this._bookmarks=i??lh.Bookmarks.empty(),this._connectionProvider=a,this._impersonatedUser=s,this._referenceCount=0,this._connectionPromise=Promise.resolve(null),this._onDatabaseNameResolved=c,this._auth=l,this._log=h,this._logError=this._logError.bind(this),this._getConnectionAcquistionBookmarks=u??function(){return Promise.resolve(lh.Bookmarks.empty())}}return e.prototype.mode=function(){return this._mode},e.prototype.database=function(){return this._database},e.prototype.setDatabase=function(r){this._database=r},e.prototype.bookmarks=function(){return this._bookmarks},e.prototype.connectionProvider=function(){return this._connectionProvider},e.prototype.referenceCount=function(){return this._referenceCount},e.prototype.initializeConnection=function(){if(this._referenceCount===0&&this._connectionProvider!=null)this._connectionPromise=this._createConnectionPromise(this._connectionProvider);else return this._referenceCount++,!1;return this._referenceCount++,!0},e.prototype._createConnectionPromise=function(r){return Uo(this,void 0,void 0,function(){var t,n,o;return Fo(this,function(i){switch(i.label){case 0:return n=(t=r).acquireConnection,o={accessMode:this._mode,database:this._database},[4,this._getBookmarks()];case 1:return[4,n.apply(t,[(o.bookmarks=i.sent(),o.impersonatedUser=this._impersonatedUser,o.onDatabaseNameResolved=this._onDatabaseNameResolved,o.auth=this._auth,o)])];case 2:return[2,i.sent()]}})})},e.prototype._getBookmarks=function(){return Uo(this,void 0,void 0,function(){return Fo(this,function(r){switch(r.label){case 0:return[4,this._getConnectionAcquistionBookmarks()];case 1:return[2,r.sent()]}})})},e.prototype.getConnection=function(){return this._connectionPromise},e.prototype.releaseConnection=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount--,this._referenceCount===0?this._releaseConnection():this._connectionPromise)},e.prototype.close=function(r){return this._closed=!0,this._referenceCount===0?this._connectionPromise:(this._referenceCount=0,this._releaseConnection(r))},e.prototype.log=function(){return this._log},e.prototype._releaseConnection=function(r){return this._connectionPromise=this._connectionPromise.then(function(t){return t!=null?t.isOpen()&&(t.hasOngoingObservableRequests()||r===!0)?t.resetAndFlush().catch(k1).then(function(){return t.release().then(function(){return null})}):t.release().then(function(){return null}):Promise.resolve(null)}).catch(this._logError),this._connectionPromise},e.prototype._logError=function(r){return this._log.isWarnEnabled()&&this._log.warn("ConnectionHolder got an error while releasing the connection. Error ".concat(r,". Stacktrace: ").concat(r.stack)),null},e}();lt.ConnectionHolder=rd;var Dp=function(e){Np(r,e);function r(t){var n=e.call(this,{mode:t.mode(),database:t.database(),bookmarks:t.bookmarks(),getConnectionAcquistionBookmarks:t._getConnectionAcquistionBookmarks,connectionProvider:t.connectionProvider(),log:t.log()})||this;return n._connectionHolder=t,n}return r.prototype.initializeConnection=function(){return this._connectionHolder.referenceCount()!==0},r.prototype.getConnection=function(){return this._connectionHolder.getConnection()},r.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},r.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},r}(rd);lt.ReadOnlyConnectionHolder=Dp;lt.default=Dp;var $1=function(e){Np(r,e);function r(){return e.call(this,{log:j1.Logger.create({})})||this}return r.prototype.mode=function(){},r.prototype.database=function(){},r.prototype.initializeConnection=function(){return!0},r.prototype.getConnection=function(){return Uo(this,void 0,void 0,function(){return Fo(this,function(t){switch(t.label){case 0:return[4,Promise.reject((0,I1.newError)("This connection holder does not serve connections"))];case 1:return[2,t.sent()]}})})},r.prototype.releaseConnection=function(){return Uo(this,void 0,void 0,function(){return Fo(this,function(t){switch(t.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,t.sent()]}})})},r.prototype.close=function(){return Uo(this,void 0,void 0,function(){return Fo(this,function(t){switch(t.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,t.sent()]}})})},r}(rd),M1=new $1;lt.EMPTY_CONNECTION_HOLDER=M1;function k1(e){return null}var An={},N1=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),D1=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),L1=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&N1(r,e,t);return D1(r,e),r};Object.defineProperty(An,"__esModule",{value:!0});An.TxConfig=void 0;var qo=L1(te),U1=he,F1=Ne,Lp=function(){function e(r,t){q1(r),this.timeout=x1(r,t),this.metadata=V1(r)}return e.empty=function(){return B1},e.prototype.isEmpty=function(){return Object.values(this).every(function(r){return r==null})},e}();An.TxConfig=Lp;var B1=new Lp({});function x1(e,r){if(qo.isObject(e)&&e.timeout!=null){qo.assertNumberOrInteger(e.timeout,"Transaction timeout"),W1(e)&&(r==null?void 0:r.isInfoEnabled())===!0&&(r==null||r.info("Transaction timeout expected to be an integer, got: ".concat(e.timeout,". The value will be rounded up.")));var t=(0,F1.int)(e.timeout,{ceilFloat:!0});if(t.isNegative())throw(0,U1.newError)("Transaction timeout should not be negative");return t}return null}function W1(e){return typeof e.timeout=="number"&&!Number.isInteger(e.timeout)}function V1(e){if(qo.isObject(e)&&e.metadata!=null){var r=e.metadata;if(qo.assertObject(r,"config.metadata"),Object.keys(r).length!==0)return r}return null}function q1(e){e!=null&&qo.assertObject(e,"Transaction config")}var Xo={},Tf=f&&f.__assign||function(){return Tf=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Tf.apply(this,arguments)},H1=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},z1=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Y1=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},G1=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(Xo,"__esModule",{value:!0});Xo.TransactionExecutor=void 0;var bo=he,K1=G,Z1=30*1e3,Q1=1e3,X1=2,J1=.2;function eE(e,r){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];return setTimeout.apply(void 0,G1([e,r],Y1(t),!1))}function tE(e){return clearTimeout(e)}var rE=function(){function e(r,t,n,o,i){i===void 0&&(i={setTimeout:eE,clearTimeout:tE}),this._maxRetryTimeMs=fu(r,Z1),this._initialRetryDelayMs=fu(t,Q1),this._multiplier=fu(n,X1),this._jitterFactor=fu(o,J1),this._setTimeout=i.setTimeout,this._clearTimeout=i.clearTimeout,this._inFlightTimeoutIds=[],this.pipelineBegin=!1,this.telemetryApi=K1.TELEMETRY_APIS.MANAGED_TRANSACTION,this._verifyAfterConstruction()}return e.prototype.execute=function(r,t,n){var o=this,i={apiTransactionConfig:{api:this.telemetryApi,onTelemetrySuccess:function(){i.apiTransactionConfig=void 0}}};return new Promise(function(a,s){o._executeTransactionInsidePromise(r,t,a,s,n,i).catch(s)}).catch(function(a){var s=Date.now(),c=o._initialRetryDelayMs;return o._retryTransactionPromise(r,t,a,s,c,n,i)})},e.prototype.close=function(){var r=this;this._inFlightTimeoutIds.forEach(function(t){return r._clearTimeout(t)}),this._inFlightTimeoutIds=[]},e.prototype._retryTransactionPromise=function(r,t,n,o,i,a,s){var c=this,u=Date.now()-o;return u>this._maxRetryTimeMs||!(0,bo.isRetriableError)(n)?Promise.reject(n):new Promise(function(l,h){var _=c._computeDelayWithJitter(i),y=c._setTimeout(function(){c._inFlightTimeoutIds=c._inFlightTimeoutIds.filter(function(b){return b!==y}),c._executeTransactionInsidePromise(r,t,l,h,a,s).catch(h)},_);c._inFlightTimeoutIds.push(y)}).catch(function(l){var h=i*c._multiplier;return c._retryTransactionPromise(r,t,l,o,h,a,s)})},e.prototype._executeTransactionInsidePromise=function(r,t,n,o,i,a){return H1(this,void 0,void 0,function(){var s,c,u,l,h,_,y,b=this;return z1(this,function(O){switch(O.label){case 0:return O.trys.push([0,4,,5]),c=r((a==null?void 0:a.apiTransactionConfig)!=null?Tf({},a==null?void 0:a.apiTransactionConfig):void 0),this.pipelineBegin?(u=c,[3,3]):[3,1];case 1:return[4,c];case 2:u=O.sent(),O.label=3;case 3:return s=u,[3,5];case 4:return l=O.sent(),o(l),[2];case 5:return h=i??function(P){return P},_=h(s),y=this._safeExecuteTransactionWork(_,t),y.then(function(P){return b._handleTransactionWorkSuccess(P,s,n,o)}).catch(function(P){return b._handleTransactionWorkFailure(P,s,o)}),[2]}})})},e.prototype._safeExecuteTransactionWork=function(r,t){try{var n=t(r);return Promise.resolve(n)}catch(o){return Promise.reject(o)}},e.prototype._handleTransactionWorkSuccess=function(r,t,n,o){t.isOpen()?t.commit().then(function(){n(r)}).catch(function(i){o(i)}):n(r)},e.prototype._handleTransactionWorkFailure=function(r,t,n){t.isOpen()?t.rollback().catch(function(o){}).then(function(){return n(r)}).catch(n):n(r)},e.prototype._computeDelayWithJitter=function(r){var t=r*this._jitterFactor,n=r-t,o=r+t;return Math.random()*(o-n)+n},e.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,bo.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs.toString());if(this._initialRetryDelayMs<0)throw(0,bo.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs.toString());if(this._multiplier<1)throw(0,bo.newError)("Multiplier should be >= 1.0: "+this._multiplier.toString());if(this._jitterFactor<0||this._jitterFactor>1)throw(0,bo.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor.toFixed())},e}();Xo.TransactionExecutor=rE;function fu(e,r){return e??r}var Je={},Uu=f&&f.__assign||function(){return Uu=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Uu.apply(this,arguments)},Up=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(Je,"__esModule",{value:!0});Je.Url=Je.formatIPv6Address=Je.formatIPv4Address=Je.defaultPortForScheme=Je.parseDatabaseUrl=void 0;var nE=te,oE=7687,iE=7474,aE=7473,Fp=function(){function e(r,t,n,o,i){this.scheme=r,this.host=t,this.port=n,this.hostAndPort=o,this.query=i}return e}();Je.Url=Fp;function uE(e){var r;(0,nE.assertString)(e,"URL");var t=cE(e),n=yE(t.url),o=t.schemeMissing?null:lE(n.scheme),i=fE(n.host),a=_E(i),s=dE(n.port,o),c="".concat(a,":").concat(s),u=hE((r=n.query)!==null&&r!==void 0?r:sE(n.resourceName),e);return new Fp(o,i,s,c,u)}Je.parseDatabaseUrl=uE;function sE(e){if(typeof e!="string")return null;var r=Up(e.split("?"),2),t=r[1];return t}function cE(e){return e=e.trim(),e.includes("://")?{schemeMissing:!1,url:e}:{schemeMissing:!0,url:"none://".concat(e)}}function lE(e){return e!=null?(e=e.trim(),e.charAt(e.length-1)===":"&&(e=e.substring(0,e.length-1)),e):null}function fE(e,r){if(e==null)throw new Error("Unable to extract host from null or undefined URL");return e.trim()}function dE(e,r){var t=typeof e=="string"?parseInt(e,10):e;return t!=null&&!isNaN(t)?t:xp(r)}function hE(e,r){var t=e!=null?vE(e):null,n={};return t!=null&&t.split("&").forEach(function(o){var i=o.split("=");if(i.length!==2)throw new Error("Invalid parameters: '".concat(i.toString(),"' in URL '").concat(r,"'."));var a=fh(i[0],"key",r),s=fh(i[1],"value",r);if(n[a]!==void 0)throw new Error("Duplicated query parameters with key '".concat(a,"' in URL '").concat(r,"'"));n[a]=s}),n}function vE(e){return e=(e??"").trim(),(e==null?void 0:e.charAt(0))==="?"&&(e=e.substring(1,e.length)),e}function fh(e,r,t){if(e=(e??"").trim(),e==="")throw new Error("Illegal empty ".concat(r," in URL query '").concat(t,"'"));return e}function Bp(e){var r=e.charAt(0)==="[",t=e.charAt(e.length-1)==="]";if(!r&&!t)return"[".concat(e,"]");if(r&&t)return e;throw new Error("Illegal IPv6 address ".concat(e))}function _E(e){if(e===""||e==null)throw new Error("Illegal host ".concat(e));var r=e.includes(":");return r?Bp(e):e}function pE(e,r){return"".concat(e,":").concat(r)}Je.formatIPv4Address=pE;function mE(e,r){var t=Bp(e);return"".concat(t,":").concat(r)}Je.formatIPv6Address=mE;function xp(e){return e==="http"?iE:e==="https"?aE:oE}Je.defaultPortForScheme=xp;function yE(e){function r(s,c){var u=s.indexOf(c);return u>=0?[s.substring(0,u),s[u],s.substring(u+1)]:[s,"",""]}function t(s,c){var u=s.lastIndexOf(c);return u>=0?[s.substring(0,u),s[u],s.substring(u+1)]:["","",s]}function n(s,c,u){var l=r(s,c),h=r(l[2],u);return[h[0],h[2]]}function o(s){var c={},u;u=t(s,"@"),u[1]==="@"&&(c.userInfo=decodeURIComponent(u[0]),s=u[2]);var l=Up(n(s,"[","]"),2),h=l[0],_=l[1];return h!==""?(c.host=h,u=r(_,":")):(u=r(s,":"),c.host=u[0]),u[1]===":"&&(c.port=u[2]),c}var i={},a;return a=r(e,":"),a[1]===":"&&(i.scheme=decodeURIComponent(a[0]),e=a[2]),a=r(e,"#"),a[1]==="#"&&(i.fragment=decodeURIComponent(a[2]),e=a[0]),a=r(e,"?"),a[1]==="?"&&(i.query=a[2],e=a[0]),e.startsWith("//")?(a=r(e.substr(2),"/"),i=Uu(Uu({},i),o(a[0])),i.path=a[1]+a[2]):i.path=e,i}var Jo={},bE=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),gE=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),OE=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&bE(r,e,t);return gE(r,e),r};Object.defineProperty(Jo,"__esModule",{value:!0});Jo.ServerAddress=void 0;var Ll=te,EE=OE(Je),wE=function(){function e(r,t,n,o){this._host=(0,Ll.assertString)(r,"host"),this._resolved=t!=null?(0,Ll.assertString)(t,"resolved"):null,this._port=(0,Ll.assertNumber)(n,"port"),this._hostPort=o,this._stringValue=t!=null?"".concat(o,"(").concat(t,")"):"".concat(o)}return e.prototype.host=function(){return this._host},e.prototype.resolvedHost=function(){return this._resolved!=null?this._resolved:this._host},e.prototype.port=function(){return this._port},e.prototype.resolveWith=function(r){return new e(this._host,r,this._port,this._hostPort)},e.prototype.asHostPort=function(){return this._hostPort},e.prototype.asKey=function(){return this._hostPort},e.prototype.toString=function(){return this._stringValue},e.fromUrl=function(r){var t=EE.parseDatabaseUrl(r);return new e(t.host,null,t.port,t.hostAndPort)},e}();Jo.ServerAddress=wE;var mn={},nd={};Object.defineProperty(nd,"__esModule",{value:!0});var TE=function(){function e(){}return e.prototype.resolve=function(){throw new Error("Abstract function")},e.prototype._resolveToItself=function(r){return Promise.resolve([r])},e}();nd.default=TE;var ns={};Object.defineProperty(ns,"__esModule",{value:!0});var SE=Jo;function PE(e){return Promise.resolve([e])}var CE=function(){function e(r){this._resolverFunction=r??PE}return e.prototype.resolve=function(r){var t=this;return new Promise(function(n){return n(t._resolverFunction(r.asHostPort()))}).then(function(n){if(!Array.isArray(n))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+"Each address is '<host>:<port>'. Got: ".concat(n));return n.map(function(o){return SE.ServerAddress.fromUrl(o)})})},e}();ns.default=CE;var Wp=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(mn,"__esModule",{value:!0});mn.ConfiguredCustomResolver=mn.BaseHostNameResolver=void 0;var IE=Wp(nd);mn.BaseHostNameResolver=IE.default;var AE=Wp(ns);mn.ConfiguredCustomResolver=AE.default;var Vp={},os={};Object.defineProperty(os,"__esModule",{value:!0});os.fromVersion=void 0;function RE(e,r){r===void 0&&(r=function(){return{get userAgent(){var i;return i==null?void 0:i.userAgent}}});var t=r(),n=t.userAgent!=null?t.userAgent.split("(")[1].split(")")[0]:void 0,o=t.userAgent||void 0;return{product:"neo4j-javascript/".concat(e),platform:n,languageDetails:o}}os.fromVersion=RE;(function(e){var r=f&&f.__createBinding||(Object.create?function(n,o,i,a){a===void 0&&(a=i);var s=Object.getOwnPropertyDescriptor(o,i);(!s||("get"in s?!o.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(n,a,s)}:function(n,o,i,a){a===void 0&&(a=i),n[a]=o[i]}),t=f&&f.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&r(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),t(os,e)})(Vp);var jE=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),$E=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Ze=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&jE(r,e,t);return $E(r,e),r};Object.defineProperty(ae,"__esModule",{value:!0});ae.boltAgent=ae.objectUtil=ae.resolver=ae.serverAddress=ae.urlUtil=ae.logger=ae.transactionExecutor=ae.txConfig=ae.connectionHolder=ae.constants=ae.bookmarks=ae.observer=ae.temporalUtil=ae.util=void 0;var ME=Ze(te);ae.util=ME;var kE=Ze(Jf);ae.temporalUtil=kE;var NE=Ze(zt);ae.observer=NE;var DE=Ze(rr);ae.bookmarks=DE;var LE=Ze(G);ae.constants=LE;var UE=Ze(lt);ae.connectionHolder=UE;var FE=Ze(An);ae.txConfig=FE;var BE=Ze(Xo);ae.transactionExecutor=BE;var xE=Ze(In);ae.logger=xE;var WE=Ze(Je);ae.urlUtil=WE;var VE=Ze(Jo);ae.serverAddress=VE;var qE=Ze(mn);ae.resolver=qE;var HE=Ze(jt);ae.objectUtil=HE;var zE=Ze(Vp);ae.boltAgent=zE;var yr=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},br=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},YE=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},qp;Object.defineProperty(Qo,"__esModule",{value:!0});var GE=YE(Ee),Hp=ae,go=he,KE=Hp.connectionHolder.EMPTY_CONNECTION_HOLDER,ZE=function(e){console.log("Uncaught error when processing result: "+e)},QE=function(e){},XE=function(e){},JE=function(){function e(r,t,n,o,i){i===void 0&&(i={high:Number.MAX_VALUE,low:Number.MAX_VALUE}),this[qp]="Result",this._stack=ew(),this._streamObserverPromise=r,this._p=null,this._query=t,this._parameters=n??{},this._connectionHolder=o??KE,this._keys=null,this._summary=null,this._error=null,this._watermarks=i}return e.prototype.keys=function(){var r=this;return this._keys!==null?Promise.resolve(this._keys):this._error!==null?Promise.reject(this._error):new Promise(function(t,n){r._streamObserverPromise.then(function(o){return o.subscribe(r._decorateObserver({onKeys:function(i){return t(i)},onError:function(i){return n(i)}}))}).catch(n)})},e.prototype.summary=function(){var r=this;return this._summary!==null?Promise.resolve(this._summary):this._error!==null?Promise.reject(this._error):new Promise(function(t,n){r._streamObserverPromise.then(function(o){o.cancel(),o.subscribe(r._decorateObserver({onCompleted:function(i){return t(i)},onError:function(i){return n(i)}}))}).catch(n)})},e.prototype._getOrCreatePromise=function(){var r=this;return this._p==null&&(this._p=new Promise(function(t,n){var o=[],i={onNext:function(a){o.push(a)},onCompleted:function(a){t({records:o,summary:a})},onError:function(a){n(a)}};r.subscribe(i)})),this._p},e.prototype[Symbol.asyncIterator]=function(){var r=this;if(!this.isOpen()){var t=(0,go.newError)("Result is already consumed");return{next:function(){return Promise.reject(t)},peek:function(){return Promise.reject(t)}}}var n={paused:!0,firstRun:!0,finished:!1},o=function(){var s,c;if(n.streaming!=null){var u=(c=(s=n.queuedObserver)===null||s===void 0?void 0:s.size)!==null&&c!==void 0?c:0,l=u>=r._watermarks.high,h=u<=r._watermarks.low;l&&!n.paused?(n.paused=!0,n.streaming.pause()):(h&&n.paused||n.firstRun&&!l)&&(n.firstRun=!1,n.paused=!1,n.streaming.resume())}},i=function(){return yr(r,void 0,void 0,function(){var s;return br(this,function(c){switch(c.label){case 0:return n.queuedObserver!==void 0?[3,2]:(n.queuedObserver=this._createQueuedResultObserver(o),s=n,[4,this._subscribe(n.queuedObserver,!0).catch(function(){})]);case 1:s.streaming=c.sent(),o(),c.label=2;case 2:return[2,n.queuedObserver]}})})},a=function(s){if(s===void 0)throw(0,go.newError)("InvalidState: Result stream finished without Summary",go.PROTOCOL_ERROR);return!0};return{next:function(){return yr(r,void 0,void 0,function(){var s,c;return br(this,function(u){switch(u.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:n.summary}]:[4,i()];case 1:return s=u.sent(),[4,s.dequeue()];case 2:return c=u.sent(),c.done===!0&&(n.finished=c.done,n.summary=c.value),[2,c]}})})},return:function(s){return yr(r,void 0,void 0,function(){var c,u,l;return br(this,function(h){switch(h.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:s??n.summary}]:((l=n.streaming)===null||l===void 0||l.cancel(),[4,i()]);case 1:return c=h.sent(),[4,c.dequeueUntilDone()];case 2:return u=h.sent(),n.finished=!0,u.value=s??u.value,n.summary=u.value,[2,u]}})})},peek:function(){return yr(r,void 0,void 0,function(){var s;return br(this,function(c){switch(c.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:n.summary}]:[4,i()];case 1:return s=c.sent(),[4,s.head()];case 2:return[2,c.sent()]}})})}}},e.prototype.then=function(r,t){return this._getOrCreatePromise().then(r,t)},e.prototype.catch=function(r){return this._getOrCreatePromise().catch(r)},e.prototype.finally=function(r){return this._getOrCreatePromise().finally(r)},e.prototype.subscribe=function(r){this._subscribe(r).catch(function(){})},e.prototype.isOpen=function(){return this._summary===null&&this._error===null},e.prototype._subscribe=function(r,t){t===void 0&&(t=!1);var n=this._decorateObserver(r);return this._streamObserverPromise.then(function(o){return t&&o.pause(),o.subscribe(n),o}).catch(function(o){return n.onError!=null&&n.onError(o),Promise.reject(o)})},e.prototype._decorateObserver=function(r){var t=this,n,o,i,a=(n=r.onCompleted)!==null&&n!==void 0?n:QE,s=(o=r.onError)!==null&&o!==void 0?o:ZE,c=(i=r.onKeys)!==null&&i!==void 0?i:XE,u=function(_){t._releaseConnectionAndGetSummary(_).then(function(y){return t._summary!==null?a.call(r,t._summary):(t._summary=y,a.call(r,y))}).catch(s)},l=function(_){t._connectionHolder.releaseConnection().then(function(){tw(_,t._stack),t._error=_,s.call(r,_)}).catch(s)},h=function(_){return t._keys=_,c.call(r,_)};return{onNext:r.onNext!=null?r.onNext.bind(r):void 0,onKeys:h,onCompleted:u,onError:l}},e.prototype._cancel=function(){this._summary===null&&this._error===null&&this._streamObserverPromise.then(function(r){return r.cancel()}).catch(function(){})},e.prototype._releaseConnectionAndGetSummary=function(r){var t=Hp.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),n=t.validatedQuery,o=t.params,i=this._connectionHolder;return i.getConnection().then(function(a){return i.releaseConnection().then(function(){return a==null?void 0:a.getProtocolVersion()})},function(a){}).then(function(a){return new GE.default(n,o,r,a)})},e.prototype._createQueuedResultObserver=function(r){var t=this;function n(){var u={};return u.promise=new Promise(function(l,h){u.resolve=l,u.reject=h}),u}function o(u){return u instanceof Error}function i(){var u;return yr(this,void 0,void 0,function(){var l;return br(this,function(h){switch(h.label){case 0:if(a.length>0){if(l=(u=a.shift())!==null&&u!==void 0?u:(0,go.newError)("Unexpected empty buffer",go.PROTOCOL_ERROR),r(),o(l))throw l;return[2,l]}return s.resolvable=n(),[4,s.resolvable.promise];case 1:return[2,h.sent()]}})})}var a=[],s={resolvable:null},c={onNext:function(u){c._push({done:!1,value:u})},onCompleted:function(u){c._push({done:!0,value:u})},onError:function(u){c._push(u)},_push:function(u){if(s.resolvable!==null){var l=s.resolvable;s.resolvable=null,o(u)?l.reject(u):l.resolve(u)}else a.push(u),r()},dequeue:i,dequeueUntilDone:function(){return yr(t,void 0,void 0,function(){var u;return br(this,function(l){switch(l.label){case 0:return[4,i()];case 1:return u=l.sent(),u.done===!0?[2,u]:[3,0];case 2:return[2]}})})},head:function(){return yr(t,void 0,void 0,function(){var u,u,l;return br(this,function(h){switch(h.label){case 0:if(a.length>0){if(u=a[0],o(u))throw u;return[2,u]}s.resolvable=n(),h.label=1;case 1:return h.trys.push([1,3,4,5]),[4,s.resolvable.promise];case 2:return u=h.sent(),a.unshift(u),[2,u];case 3:throw l=h.sent(),a.unshift(l),l;case 4:return r(),[7];case 5:return[2]}})})},get size(){return a.length}};return c},e}();qp=Symbol.toStringTag;function ew(){var e=new Error("");return e.stack!=null?e.stack.replace(/^Error(\n\r)*/,""):null}function tw(e,r){r!=null&&(e.stack=e.toString()+`
`+r)}Qo.default=JE;var is={};Object.defineProperty(is,"__esModule",{value:!0});var rw=function(){function e(r,t,n){this.keys=r,this.records=t,this.summary=n}return e}();is.default=rw;var ei={};Object.defineProperty(ei,"__esModule",{value:!0});ei.Releasable=void 0;var nw=function(){function e(){}return e.prototype.release=function(){throw new Error("Not implemented")},e}();ei.Releasable=nw;var ow=function(){function e(){}return e.prototype.acquireConnection=function(r){throw Error("Not implemented")},e.prototype.supportsMultiDb=function(){throw Error("Not implemented")},e.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},e.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},e.prototype.supportsSessionAuth=function(){throw Error("Not implemented")},e.prototype.verifyConnectivityAndGetServerInfo=function(r){throw Error("Not implemented")},e.prototype.verifyAuthentication=function(r){throw Error("Not implemented")},e.prototype.getNegotiatedProtocolVersion=function(){throw Error("Not Implemented")},e.prototype.close=function(){throw Error("Not implemented")},e}();ei.default=ow;var od={};Object.defineProperty(od,"__esModule",{value:!0});var iw=function(){function e(){}return e.prototype.beginTransaction=function(r){throw new Error("Not implemented")},e.prototype.run=function(r,t,n){throw new Error("Not implemented")},e.prototype.commitTransaction=function(r){throw new Error("Not implemented")},e.prototype.rollbackTransaction=function(r){throw new Error("Not implemented")},e.prototype.resetAndFlush=function(){throw new Error("Not implemented")},e.prototype.isOpen=function(){throw new Error("Not implemented")},e.prototype.getProtocolVersion=function(){throw new Error("Not implemented")},e.prototype.hasOngoingObservableRequests=function(){throw new Error("Not implemented")},e}();od.default=iw;var as={},dh=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},hh=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},aw=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(as,"__esModule",{value:!0});var uw=te,Bo=lt,$u=rr,sw=An,at=zt,st=he,zp=aw(Qo),cw=function(){function e(r){var t=r.connectionHolder,n=r.onClose,o=r.onBookmarks,i=r.onConnection,a=r.reactive,s=r.fetchSize,c=r.impersonatedUser,u=r.highRecordWatermark,l=r.lowRecordWatermark,h=r.notificationFilter,_=r.apiTelemetryConfig,y=this;this._connectionHolder=t,this._reactive=a,this._state=ct.ACTIVE,this._onClose=n,this._onBookmarks=o,this._onConnection=i,this._onError=this._onErrorCallback.bind(this),this._fetchSize=s,this._onComplete=this._onCompleteCallback.bind(this),this._results=[],this._impersonatedUser=c,this._lowRecordWatermak=l,this._highRecordWatermark=u,this._bookmarks=$u.Bookmarks.empty(),this._notificationFilter=h,this._apiTelemetryConfig=_,this._acceptActive=function(){},this._activePromise=new Promise(function(b,O){y._acceptActive=b})}return e.prototype._begin=function(r,t,n){var o=this;this._connectionHolder.getConnection().then(function(i){return dh(o,void 0,void 0,function(){var a,s=this;return hh(this,function(c){switch(c.label){case 0:return this._onConnection(),i==null?[3,2]:(a=this,[4,r()]);case 1:return a._bookmarks=c.sent(),[2,i.beginTransaction({bookmarks:this._bookmarks,txConfig:t,mode:this._connectionHolder.mode(),database:this._connectionHolder.database(),impersonatedUser:this._impersonatedUser,notificationFilter:this._notificationFilter,apiTelemetryConfig:this._apiTelemetryConfig,beforeError:function(u){n!=null&&n.onError(u),s._onError(u).catch(function(){})},afterComplete:function(u){n!=null&&n.onComplete(u),s._onComplete(u)}})];case 2:throw(0,st.newError)("No connection available")}})})}).catch(function(i){n!=null&&n.onError(i),o._onError(i).catch(function(){})}).finally(function(){return o._acceptActive()})},e.prototype.run=function(r,t){var n=(0,uw.validateQueryAndParameters)(r,t),o=n.validatedQuery,i=n.params,a=this._state.run(o,i,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize,highRecordWatermark:this._highRecordWatermark,lowRecordWatermark:this._lowRecordWatermak,preparationJob:this._activePromise});return this._results.push(a),a},e.prototype.commit=function(){var r=this,t=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:function(n){return r._onCompleteCallback(n,r._bookmarks)},onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=t.state,this._onClose(),new Promise(function(n,o){t.result.subscribe({onCompleted:function(){return n()},onError:function(i){return o(i)}})})},e.prototype.rollback=function(){var r=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=r.state,this._onClose(),new Promise(function(t,n){r.result.subscribe({onCompleted:function(){return t()},onError:function(o){return n(o)}})})},e.prototype.isOpen=function(){return this._state===ct.ACTIVE},e.prototype.close=function(){return dh(this,void 0,void 0,function(){return hh(this,function(r){switch(r.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._onErrorCallback=function(r){return this._state=ct.FAILED,this._onClose(),this._results.forEach(function(t){t.isOpen()&&t._streamObserverPromise.then(function(n){return n.onError(r)}).catch(function(n){})}),this._connectionHolder.releaseConnection()},e.prototype._onCompleteCallback=function(r,t){this._onBookmarks(new $u.Bookmarks(r==null?void 0:r.bookmark),t??$u.Bookmarks.empty(),r==null?void 0:r.db)},e}(),ct={ACTIVE:{commit:function(e){var r=e.connectionHolder,t=e.onError,n=e.onComplete,o=e.onConnection,i=e.pendingResults,a=e.preparationJob;return{result:vh(!0,r,t,n,o,i,a),state:ct.SUCCEEDED}},rollback:function(e){var r=e.connectionHolder,t=e.onError,n=e.onComplete,o=e.onConnection,i=e.pendingResults,a=e.preparationJob;return{result:vh(!1,r,t,n,o,i,a),state:ct.ROLLED_BACK}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError,i=t.onComplete,a=t.onConnection,s=t.reactive,c=t.fetchSize,u=t.highRecordWatermark,l=t.lowRecordWatermark,h=t.preparationJob,_=h??Promise.resolve(),y=n.getConnection().then(function(b){return _.then(function(){return b})}).then(function(b){if(a(),b!=null)return b.run(e,r,{bookmarks:$u.Bookmarks.empty(),txConfig:sw.TxConfig.empty(),beforeError:o,afterComplete:i,reactive:s,fetchSize:c,highRecordWatermark:u,lowRecordWatermark:l});throw(0,st.newError)("No connection available")}).catch(function(b){return new at.FailedObserver({error:b,onError:o})});return mt(y,e,r,n,u,l)}},FAILED:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:mt(new at.FailedObserver({error:(0,st.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:t}),"COMMIT",{},r,0,0),state:ct.FAILED}},rollback:function(e){var r=e.connectionHolder;return e.onError,e.onComplete,{result:mt(new at.CompletedObserver,"ROLLBACK",{},r,0,0),state:ct.FAILED}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError;return t.onComplete,mt(new at.FailedObserver({error:(0,st.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:o}),e,r,n,0,0)}},SUCCEEDED:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:mt(new at.FailedObserver({error:(0,st.newError)("Cannot commit this transaction, because it has already been committed."),onError:t}),"COMMIT",{},Bo.EMPTY_CONNECTION_HOLDER,0,0),state:ct.SUCCEEDED,connectionHolder:r}},rollback:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:mt(new at.FailedObserver({error:(0,st.newError)("Cannot rollback this transaction, because it has already been committed."),onError:t}),"ROLLBACK",{},Bo.EMPTY_CONNECTION_HOLDER,0,0),state:ct.SUCCEEDED,connectionHolder:r}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError;return t.onComplete,mt(new at.FailedObserver({error:(0,st.newError)("Cannot run query in this transaction, because it has already been committed."),onError:o}),e,r,n,0,0)}},ROLLED_BACK:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:mt(new at.FailedObserver({error:(0,st.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:t}),"COMMIT",{},r,0,0),state:ct.ROLLED_BACK}},rollback:function(e){var r=e.connectionHolder;return e.onError,e.onComplete,{result:mt(new at.FailedObserver({error:(0,st.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},r,0,0),state:ct.ROLLED_BACK}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError;return t.onComplete,mt(new at.FailedObserver({error:(0,st.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:o}),e,r,n,0,0)}}};function vh(e,r,t,n,o,i,a){var s=a??Promise.resolve(),c=r.getConnection().then(function(u){return s.then(function(){return u})}).then(function(u){return o(),i.forEach(function(l){return l._cancel()}),Promise.all(i.map(function(l){return l.summary()})).then(function(l){if(u!=null)return e?u.commitTransaction({beforeError:t,afterComplete:n}):u.rollbackTransaction({beforeError:t,afterComplete:n});throw(0,st.newError)("No connection available")})}).catch(function(u){return new at.FailedObserver({error:u,onError:t})});return new zp.default(c,e?"COMMIT":"ROLLBACK",{},r,{high:Number.MAX_VALUE,low:Number.MAX_VALUE})}function mt(e,r,t,n,o,i){return n===void 0&&(n=Bo.EMPTY_CONNECTION_HOLDER),new zp.default(Promise.resolve(e),r,t,new Bo.ReadOnlyConnectionHolder(n??Bo.EMPTY_CONNECTION_HOLDER),{low:i,high:o})}as.default=cw;var us={};Object.defineProperty(us,"__esModule",{value:!0});var lw=function(){function e(r){var t=r.run;this._run=t}return e.fromTransaction=function(r){return new e({run:r.run.bind(r)})},e.prototype.run=function(r,t){return this._run(r,t)},e}();us.default=lw;var ss={},fw=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fu=f&&f.__assign||function(){return Fu=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Fu.apply(this,arguments)},dw=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Yp;Object.defineProperty(ss,"__esModule",{value:!0});var hw=dw(as),vw=function(e){fw(r,e);function r(t){var n=t.connectionHolder,o=t.onClose,i=t.onBookmarks,a=t.onConnection,s=t.reactive,c=t.fetchSize,u=t.impersonatedUser,l=t.highRecordWatermark,h=t.lowRecordWatermark,_=t.notificationFilter,y=t.apiTelemetryConfig,b=e.call(this,{connectionHolder:n,onClose:o,onBookmarks:i,onConnection:a,reactive:s,fetchSize:c,impersonatedUser:u,highRecordWatermark:l,lowRecordWatermark:h,notificationFilter:_,apiTelemetryConfig:y})||this;return b[Yp]="TransactionPromise",b}return r.prototype.then=function(t,n){return this._getOrCreateBeginPromise().then(t,n)},r.prototype.catch=function(t){return this._getOrCreateBeginPromise().catch(t)},r.prototype.finally=function(t){return this._getOrCreateBeginPromise().finally(t)},r.prototype._getOrCreateBeginPromise=function(){var t=this;return this._beginPromise==null&&(this._beginPromise=new Promise(function(n,o){t._resolve=n,t._reject=o,t._beginError!=null&&o(t._beginError),t._beginMetadata!=null&&n(t._toTransaction())})),this._beginPromise},r.prototype._toTransaction=function(){return Fu(Fu({},this),{run:e.prototype.run.bind(this),commit:e.prototype.commit.bind(this),rollback:e.prototype.rollback.bind(this),close:e.prototype.close.bind(this),isOpen:e.prototype.isOpen.bind(this),_begin:this._begin.bind(this)})},r.prototype._begin=function(t,n){return e.prototype._begin.call(this,t,n,{onError:this._onBeginError.bind(this),onComplete:this._onBeginMetadata.bind(this)})},r.prototype._onBeginError=function(t){this._beginError=t,this._reject!=null&&this._reject(t)},r.prototype._onBeginMetadata=function(t){this._beginMetadata=t??{},this._resolve!=null&&this._resolve(this._toTransaction())},r}(hw.default);Yp=Symbol.toStringTag;ss.default=vw;var cs={},Oo=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Eo=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},du=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},hu=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))},id=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cs,"__esModule",{value:!0});var _w=zt,pw=te,Ke=G,gr=he,mw=id(Qo),_h=lt,yw=Xo,wo=rr,Wt=An,bw=id(ss),gw=id(us),Ow=function(){function e(r){var t=r.mode,n=r.connectionProvider,o=r.bookmarks,i=r.database,a=r.config,s=r.reactive,c=r.fetchSize,u=r.impersonatedUser,l=r.bookmarkManager,h=r.notificationFilter,_=r.auth,y=r.log;this._mode=t,this._database=i,this._reactive=s,this._fetchSize=c,this._onDatabaseNameResolved=this._onDatabaseNameResolved.bind(this),this._getConnectionAcquistionBookmarks=this._getConnectionAcquistionBookmarks.bind(this),this._readConnectionHolder=new _h.ConnectionHolder({mode:Ke.ACCESS_MODE_READ,auth:_,database:i,bookmarks:o,connectionProvider:n,impersonatedUser:u,onDatabaseNameResolved:this._onDatabaseNameResolved,getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:y}),this._writeConnectionHolder=new _h.ConnectionHolder({mode:Ke.ACCESS_MODE_WRITE,auth:_,database:i,bookmarks:o,connectionProvider:n,impersonatedUser:u,onDatabaseNameResolved:this._onDatabaseNameResolved,getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:y}),this._open=!0,this._hasTx=!1,this._impersonatedUser=u,this._lastBookmarks=o??wo.Bookmarks.empty(),this._configuredBookmarks=this._lastBookmarks,this._transactionExecutor=Ew(a),this._databaseNameResolved=this._database!=="";var b=this._calculateWatermaks();this._lowRecordWatermark=b.low,this._highRecordWatermark=b.high,this._results=[],this._bookmarkManager=l,this._notificationFilter=h,this._log=y}return e.prototype.run=function(r,t,n){var o=this,i=(0,pw.validateQueryAndParameters)(r,t),a=i.validatedQuery,s=i.params,c=n!=null?new Wt.TxConfig(n,this._log):Wt.TxConfig.empty(),u=this._run(a,s,function(l){return Oo(o,void 0,void 0,function(){var h,_=this;return Eo(this,function(y){switch(y.label){case 0:return[4,this._bookmarks()];case 1:return h=y.sent(),this._assertSessionIsOpen(),[2,l.run(a,s,{bookmarks:h,txConfig:c,mode:this._mode,database:this._database,apiTelemetryConfig:{api:Ke.TELEMETRY_APIS.AUTO_COMMIT_TRANSACTION},impersonatedUser:this._impersonatedUser,afterComplete:function(b){return _._onCompleteCallback(b,h)},reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter})]}})})});return this._results.push(u),u},e.prototype._run=function(r,t,n){var o=this._acquireAndConsumeConnection(n),i=o.connectionHolder,a=o.resultPromise,s=a.catch(function(u){return Promise.resolve(new _w.FailedObserver({error:u}))}),c={high:this._highRecordWatermark,low:this._lowRecordWatermark};return new mw.default(s,r,t,i,c)},e.prototype._acquireConnection=function(r){var t=this,n=this._acquireAndConsumeConnection(r),o=n.connectionHolder,i=n.resultPromise;return i.then(function(a){return Oo(t,void 0,void 0,function(){return Eo(this,function(s){switch(s.label){case 0:return[4,o.releaseConnection()];case 1:return s.sent(),[2,a]}})})})},e.prototype._acquireAndConsumeConnection=function(r){var t,n=this._connectionHolderWithMode(this._mode);return this._open?!this._hasTx&&n.initializeConnection()?t=n.getConnection().then(function(o){return r(o)}):t=Promise.reject((0,gr.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):t=Promise.reject((0,gr.newError)("Cannot run query in a closed session.")),{connectionHolder:n,resultPromise:t}},e.prototype.beginTransaction=function(r){var t=r,n=Wt.TxConfig.empty();return t!=null&&(n=new Wt.TxConfig(t,this._log)),this._beginTransaction(this._mode,n,{api:Ke.TELEMETRY_APIS.UNMANAGED_TRANSACTION})},e.prototype._beginTransaction=function(r,t,n){var o=this;if(!this._open)throw(0,gr.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,gr.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var i=e._validateSessionMode(r),a=this._connectionHolderWithMode(i);a.initializeConnection(),this._hasTx=!0;var s=new bw.default({connectionHolder:a,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmarks:function(c,u,l){return o._updateBookmarks(c,u,l)},onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,apiTelemetryConfig:n});return s._begin(function(){return o._bookmarks()},t),s},e.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,gr.newError)("You cannot run more transactions on a closed session.")},e.prototype._transactionClosed=function(){this._hasTx=!1},e.prototype.lastBookmark=function(){return this.lastBookmarks()},e.prototype.lastBookmarks=function(){return this._lastBookmarks.values()},e.prototype._bookmarks=function(){var r;return Oo(this,void 0,void 0,function(){var t;return Eo(this,function(n){switch(n.label){case 0:return[4,(r=this._bookmarkManager)===null||r===void 0?void 0:r.getBookmarks()];case 1:return t=n.sent(),t===void 0?[2,this._lastBookmarks]:[2,new wo.Bookmarks(hu(hu([],du(t),!1),du(this._configuredBookmarks),!1))]}})})},e.prototype.readTransaction=function(r,t){var n=new Wt.TxConfig(t,this._log);return this._runTransaction(Ke.ACCESS_MODE_READ,n,r)},e.prototype.writeTransaction=function(r,t){var n=new Wt.TxConfig(t,this._log);return this._runTransaction(Ke.ACCESS_MODE_WRITE,n,r)},e.prototype._runTransaction=function(r,t,n){var o=this;return this._transactionExecutor.execute(function(i){return o._beginTransaction(r,t,i)},n)},e.prototype.executeRead=function(r,t){var n=new Wt.TxConfig(t,this._log);return this._executeInTransaction(Ke.ACCESS_MODE_READ,n,r)},e.prototype.executeWrite=function(r,t){var n=new Wt.TxConfig(t,this._log);return this._executeInTransaction(Ke.ACCESS_MODE_WRITE,n,r)},e.prototype._executeInTransaction=function(r,t,n){var o=this;return this._transactionExecutor.execute(function(i){return o._beginTransaction(r,t,i)},n,gw.default.fromTransaction)},e.prototype._onDatabaseNameResolved=function(r){if(!this._databaseNameResolved){var t=r??"";this._database=t,this._readConnectionHolder.setDatabase(t),this._writeConnectionHolder.setDatabase(t),this._databaseNameResolved=!0}},e.prototype._getConnectionAcquistionBookmarks=function(){var r;return Oo(this,void 0,void 0,function(){var t;return Eo(this,function(n){switch(n.label){case 0:return[4,(r=this._bookmarkManager)===null||r===void 0?void 0:r.getBookmarks()];case 1:return t=n.sent(),t===void 0?[2,this._lastBookmarks]:[2,new wo.Bookmarks(hu(hu([],du(this._configuredBookmarks),!1),du(t),!1))]}})})},e.prototype._updateBookmarks=function(r,t,n){var o,i,a;r!=null&&!r.isEmpty()&&((o=this._bookmarkManager)===null||o===void 0||o.updateBookmarks((i=t==null?void 0:t.values())!==null&&i!==void 0?i:[],(a=r==null?void 0:r.values())!==null&&a!==void 0?a:[]).catch(function(){}),this._lastBookmarks=r,this._configuredBookmarks=wo.Bookmarks.empty())},e.prototype.close=function(){return Oo(this,void 0,void 0,function(){return Eo(this,function(r){switch(r.label){case 0:return this._open?(this._open=!1,this._results.forEach(function(t){return t._cancel()}),this._transactionExecutor.close(),[4,this._readConnectionHolder.close(this._hasTx)]):[3,3];case 1:return r.sent(),[4,this._writeConnectionHolder.close(this._hasTx)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._connectionHolderWithMode=function(r){if(r===Ke.ACCESS_MODE_READ)return this._readConnectionHolder;if(r===Ke.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,gr.newError)("Unknown access mode: "+r)},e.prototype._onCompleteCallback=function(r,t){this._updateBookmarks(new wo.Bookmarks(r.bookmark),t,r.db)},e.prototype._calculateWatermaks=function(){return this._fetchSize===Ke.FETCH_ALL?{low:Number.MAX_VALUE,high:Number.MAX_VALUE}:{low:.3*this._fetchSize,high:.7*this._fetchSize}},e.prototype._configureTransactionExecutor=function(r,t){this._transactionExecutor.pipelineBegin=r,this._transactionExecutor.telemetryApi=t},e._validateSessionMode=function(r){var t=r??Ke.ACCESS_MODE_WRITE;if(t!==Ke.ACCESS_MODE_READ&&t!==Ke.ACCESS_MODE_WRITE)throw(0,gr.newError)("Illegal session mode "+t);return t},e}();function Ew(e){var r,t=(r=e==null?void 0:e.maxTransactionRetryTime)!==null&&r!==void 0?r:null;return new yw.TransactionExecutor(t)}cs.default=Ow;var Be={},Rn={},Bu=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},xu=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Ul=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},ph=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},mh=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(Rn,"__esModule",{value:!0});Rn.bookmarkManager=void 0;var ww=function(){function e(){throw new Error("Not implemented")}return e.prototype.updateBookmarks=function(r,t){return Bu(this,void 0,void 0,function(){return xu(this,function(n){throw new Error("Not implemented")})})},e.prototype.getBookmarks=function(){return Bu(this,void 0,void 0,function(){return xu(this,function(r){throw new Error("Not implemented")})})},e}();Rn.default=ww;function Tw(e){e===void 0&&(e={});var r=new Set(e.initialBookmarks);return new Sw(r,e.bookmarksSupplier,e.bookmarksConsumer)}Rn.bookmarkManager=Tw;var Sw=function(){function e(r,t,n){this._bookmarks=r,this._bookmarksSupplier=t,this._bookmarksConsumer=n}return e.prototype.updateBookmarks=function(r,t){return Bu(this,void 0,void 0,function(){var n,o,i,c,a,s,c,u,l,h,_;return xu(this,function(y){switch(y.label){case 0:n=this._bookmarks;try{for(o=Ul(r),i=o.next();!i.done;i=o.next())c=i.value,n.delete(c)}catch(b){u={error:b}}finally{try{i&&!i.done&&(l=o.return)&&l.call(o)}finally{if(u)throw u.error}}try{for(a=Ul(t),s=a.next();!s.done;s=a.next())c=s.value,n.add(c)}catch(b){h={error:b}}finally{try{s&&!s.done&&(_=a.return)&&_.call(a)}finally{if(h)throw h.error}}return typeof this._bookmarksConsumer!="function"?[3,2]:[4,this._bookmarksConsumer(mh([],ph(n),!1))];case 1:y.sent(),y.label=2;case 2:return[2]}})})},e.prototype.getBookmarks=function(){var r;return Bu(this,void 0,void 0,function(){var t,n,o,i,a,s,c;return xu(this,function(u){switch(u.label){case 0:return t=new Set(this._bookmarks),typeof this._bookmarksSupplier!="function"?[3,2]:[4,this._bookmarksSupplier()];case 1:n=(r=u.sent())!==null&&r!==void 0?r:[];try{for(o=Ul(n),i=o.next();!i.done;i=o.next())a=i.value,t.add(a)}catch(l){s={error:l}}finally{try{i&&!i.done&&(c=o.return)&&c.call(o)}finally{if(s)throw s.error}}u.label=2;case 2:return[2,mh([],ph(t),!1)]}})})},e}(),ls={},Gp=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Kp=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Pw=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ls,"__esModule",{value:!0});var Cw=Pw(is),Iw=he;function Aw(e){return Gp(this,void 0,void 0,function(){var r,t,n,o;return Kp(this,function(i){switch(i.label){case 0:return[4,e];case 1:return r=i.sent(),t=r.summary,n=r.records,[4,e.keys()];case 2:return o=i.sent(),[2,new Cw.default(o,n,t)]}})})}var Rw=function(){function e(){}return e.prototype.eagerResultTransformer=function(){return Aw},e.prototype.mappedResultTransformer=function(r){var t=this;if(r==null||r.collect==null&&r.map==null)throw(0,Iw.newError)("Requires a map or/and a collect functions.");return function(n){return Gp(t,void 0,void 0,function(){return Kp(this,function(o){switch(o.label){case 0:return[4,new Promise(function(i,a){var s={records:[],keys:[]};n.subscribe({onKeys:function(c){s.keys=c},onNext:function(c){if(r.map!=null){var u=r.map(c);u!==void 0&&s.records.push(u)}else s.records.push(c)},onCompleted:function(c){if(r.collect!=null)i(r.collect(s.records,c,s.keys));else{var u={records:s.records,summary:c,keys:s.keys};i(u)}},onError:function(c){a(c)}})})];case 1:return[2,o.sent()]}})})}},e}(),Zp=new Rw;Object.freeze(Zp);ls.default=Zp;var ad={},yh=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},bh=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(ad,"__esModule",{value:!0});var jw=G,$w=function(){function e(r){this._createSession=r}return e.prototype.execute=function(r,t,n){return yh(this,void 0,void 0,function(){var o,i,a=this;return bh(this,function(s){switch(s.label){case 0:o=this._createSession({database:r.database,bookmarkManager:r.bookmarkManager,impersonatedUser:r.impersonatedUser}),o._configureTransactionExecutor(!0,jw.TELEMETRY_APIS.EXECUTE_QUERY),s.label=1;case 1:return s.trys.push([1,,3,5]),i=r.routing==="READ"?o.executeRead.bind(o):o.executeWrite.bind(o),[4,i(function(c){return yh(a,void 0,void 0,function(){var u;return bh(this,function(l){switch(l.label){case 0:return u=c.run(t,n),[4,r.resultTransformer(u)];case 1:return[2,l.sent()]}})})},r.transactionConfig)];case 2:return[2,s.sent()];case 3:return[4,o.close()];case 4:return s.sent(),[7];case 5:return[2]}})})},e}();ad.default=$w;var gh=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Oh=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},fs=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Be,"__esModule",{value:!0});Be.QueryConfig=Be.SessionConfig=Be.routing=Be.WRITE=Be.READ=Be.Driver=void 0;var Eh=rr,Mw=fs(ns),Nr=G,kw=In,wh=fs(cs),Nw=te,Dw=Rn,Lw=fs(ls),Uw=fs(ad),Fw=he,Bw=60*60*1e3,xw=1e3,Mu=Nr.ACCESS_MODE_READ;Be.READ=Mu;var ud=Nr.ACCESS_MODE_WRITE;Be.WRITE=ud;var Ww=0,Vw=function(){function e(){this.defaultAccessMode=ud,this.bookmarks=[],this.database="",this.impersonatedUser=void 0,this.auth=void 0,this.fetchSize=void 0,this.bookmarkManager=void 0,this.notificationFilter=void 0}return e}();Be.SessionConfig=Vw;var qw="WRITE",Hw="READ",dn={WRITE:qw,READ:Hw};Be.routing=dn;Object.freeze(dn);var zw=function(){function e(){this.routing=dn.WRITE,this.resultTransformer=void 0,this.database="",this.impersonatedUser=void 0,this.bookmarkManager=void 0,this.transactionConfig=void 0}return e}();Be.QueryConfig=zw;var Qp=function(){function e(r,t,n,o,i){t===void 0&&(t={}),o===void 0&&(o=function(s){return new wh.default(s)}),i===void 0&&(i=function(s){return new Uw.default(s)}),Gw(t);var a=kw.Logger.create(t);Yw(t,a),this._id=Ww++,this._meta=r,this._config=t,this._log=a,this._createConnectionProvider=n,this._createSession=o,this._defaultExecuteQueryBookmarkManager=(0,Dw.bookmarkManager)(),this._queryExecutor=i(this.session.bind(this)),this._connectionProvider=null,this._afterConstruction()}return Object.defineProperty(e.prototype,"executeQueryBookmarkManager",{get:function(){return this._defaultExecuteQueryBookmarkManager},enumerable:!1,configurable:!0}),e.prototype.executeQuery=function(r,t,n){var o,i,a;return n===void 0&&(n={}),gh(this,void 0,void 0,function(){var s,c,u;return Oh(this,function(l){switch(l.label){case 0:if(s=n.bookmarkManager===null?void 0:(o=n.bookmarkManager)!==null&&o!==void 0?o:this.executeQueryBookmarkManager,c=(i=n.resultTransformer)!==null&&i!==void 0?i:Lw.default.eagerResultTransformer(),u=(a=n.routing)!==null&&a!==void 0?a:dn.WRITE,u!==dn.READ&&u!==dn.WRITE)throw(0,Fw.newError)('Illegal query routing config: "'.concat(u,'"'));return[4,this._queryExecutor.execute({resultTransformer:c,bookmarkManager:s,routing:u,database:n.database,impersonatedUser:n.impersonatedUser,transactionConfig:n.transactionConfig},r,t)];case 1:return[2,l.sent()]}})})},e.prototype.verifyConnectivity=function(r){var t=r===void 0?{}:r,n=t.database,o=n===void 0?"":n,i=this._getOrCreateConnectionProvider();return i.verifyConnectivityAndGetServerInfo({database:o,accessMode:Mu})},e.prototype.verifyAuthentication=function(r){var t=r===void 0?{}:r,n=t.database,o=t.auth;return gh(this,void 0,void 0,function(){var i;return Oh(this,function(a){switch(a.label){case 0:return i=this._getOrCreateConnectionProvider(),[4,i.verifyAuthentication({database:n??"system",auth:o,accessMode:Mu})];case 1:return[2,a.sent()]}})})},e.prototype.getServerInfo=function(r){var t=r===void 0?{}:r,n=t.database,o=n===void 0?"":n,i=this._getOrCreateConnectionProvider();return i.verifyConnectivityAndGetServerInfo({database:o,accessMode:Mu})},e.prototype.supportsMultiDb=function(){var r=this._getOrCreateConnectionProvider();return r.supportsMultiDb()},e.prototype.supportsTransactionConfig=function(){var r=this._getOrCreateConnectionProvider();return r.supportsTransactionConfig()},e.prototype.supportsUserImpersonation=function(){var r=this._getOrCreateConnectionProvider();return r.supportsUserImpersonation()},e.prototype.supportsSessionAuth=function(){var r=this._getOrCreateConnectionProvider();return r.supportsSessionAuth()},e.prototype.getNegotiatedProtocolVersion=function(){var r=this._getOrCreateConnectionProvider();return r.getNegotiatedProtocolVersion()},e.prototype.isEncrypted=function(){return this._isEncrypted()},e.prototype._supportsRouting=function(){return this._meta.routing},e.prototype._isEncrypted=function(){return this._config.encrypted===Nw.ENCRYPTION_ON||this._config.encrypted===!0},e.prototype._getTrust=function(){return this._config.trust},e.prototype.session=function(r){var t=r===void 0?{}:r,n=t.defaultAccessMode,o=n===void 0?ud:n,i=t.bookmarks,a=t.database,s=a===void 0?"":a,c=t.impersonatedUser,u=t.fetchSize,l=t.bookmarkManager,h=t.notificationFilter,_=t.auth;return this._newSession({defaultAccessMode:o,bookmarkOrBookmarks:i,database:s,reactive:!1,impersonatedUser:c,fetchSize:Xp(u,this._config.fetchSize),bookmarkManager:l,notificationFilter:h,auth:_})},e.prototype.close=function(){return this._log.info("Driver ".concat(this._id," closing")),this._connectionProvider!=null?this._connectionProvider.close():Promise.resolve()},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._afterConstruction=function(){this._log.info("".concat(this._meta.typename," driver ").concat(this._id," created for server address ").concat(this._meta.address.toString()))},e.prototype._newSession=function(r){var t=r.defaultAccessMode,n=r.bookmarkOrBookmarks,o=r.database,i=r.reactive,a=r.impersonatedUser,s=r.fetchSize,c=r.bookmarkManager,u=r.notificationFilter,l=r.auth,h=wh.default._validateSessionMode(t),_=this._getOrCreateConnectionProvider(),y=n!=null?new Eh.Bookmarks(n):Eh.Bookmarks.empty();return this._createSession({mode:h,database:o??"",connectionProvider:_,bookmarks:y,config:this._config,reactive:i,impersonatedUser:a,fetchSize:s,bookmarkManager:c,notificationFilter:u,auth:l,log:this._log})},e.prototype._getOrCreateConnectionProvider=function(){return this._connectionProvider==null&&(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,Qw(this._config))),this._connectionProvider},e}();Be.Driver=Qp;function Yw(e,r){var t=e.resolver;if(t!=null&&typeof t!="function")throw new TypeError("Configured resolver should be a function. Got: ".concat(typeof t));return e.connectionAcquisitionTimeout<e.connectionTimeout&&r.warn('Configuration for "connectionAcquisitionTimeout" should be greater than or equal to "connectionTimeout". Otherwise, the connection acquisition timeout will take precedence for over the connection timeout in scenarios where a new connection is created while it is acquired'),e}function Gw(e){e.maxConnectionLifetime=Fl(e.maxConnectionLifetime,Bw),e.maxConnectionPoolSize=Fl(e.maxConnectionPoolSize,Nr.DEFAULT_POOL_MAX_SIZE),e.connectionAcquisitionTimeout=Fl(e.connectionAcquisitionTimeout,Nr.DEFAULT_POOL_ACQUISITION_TIMEOUT),e.fetchSize=Xp(e.fetchSize,xw),e.connectionTimeout=Kw(e),e.connectionLivenessCheckTimeout=Zw(e.connectionLivenessCheckTimeout)}function Fl(e,r){var t=parseInt(e,10);return t>0||t===0?t:t<0?Number.MAX_SAFE_INTEGER:r}function Xp(e,r){var t=parseInt(e,10);if(t>0||t===Nr.FETCH_ALL)return t;if(t===0||t<0)throw new Error("The fetch size can only be a positive value or ".concat(Nr.FETCH_ALL," for ALL. However fetchSize = ").concat(t));return r}function Kw(e){var r=parseInt(e.connectionTimeout,10);return r===0||!isNaN(r)&&r<0?null:isNaN(r)?Nr.DEFAULT_CONNECTION_TIMEOUT_MILLIS:r}function Zw(e){if(e!=null){var r=parseInt(e,10);if(r<0||Number.isNaN(r))throw new Error("The connectionLivenessCheckTimeout can only be a positive value or 0 for always. However connectionLivenessCheckTimeout = ".concat(r));return r}}function Qw(e){return new Mw.default(e.resolver)}Be.default=Qp;var ds={};Object.defineProperty(ds,"__esModule",{value:!0});var Xw={basic:function(e,r,t){return t!=null?{scheme:"basic",principal:e,credentials:r,realm:t}:{scheme:"basic",principal:e,credentials:r}},kerberos:function(e){return{scheme:"kerberos",principal:"",credentials:e}},bearer:function(e){return{scheme:"bearer",credentials:e}},none:function(){return{scheme:"none"}},custom:function(e,r,t,n,o){var i={scheme:n,principal:e};return Bl(r)&&(i.credentials=r),Bl(t)&&(i.realm=t),Bl(o)&&(i.parameters=o),i}};function Bl(e){return!(e==null||e===""||Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length===0)}ds.default=Xw;var $t={},Sf=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Pf=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Jw=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($t,"__esModule",{value:!0});$t.staticAuthTokenManager=$t.authTokenManagers=$t.AuthTokenAndExpiration=void 0;var eT=Jw(ds),tT=ae,rT=function(){function e(){}return e.prototype.getToken=function(){throw new Error("Not Implemented")},e.prototype.handleSecurityException=function(r,t){throw new Error("Not implemented")},e}();$t.default=rT;var nT=function(){function e(){this.token=eT.default.none(),this.expiration=void 0}return e}();$t.AuthTokenAndExpiration=nT;var oT=function(){function e(){}return e.prototype.bearer=function(r){var t=r.tokenProvider;if(typeof t!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof t));return new Th(t,["Neo.ClientError.Security.Unauthorized","Neo.ClientError.Security.TokenExpired"])},e.prototype.basic=function(r){var t=this,n=r.tokenProvider;if(typeof n!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof n));return new Th(function(){return Sf(t,void 0,void 0,function(){var o;return Pf(this,function(i){switch(i.label){case 0:return o={},[4,n()];case 1:return[2,(o.token=i.sent(),o)]}})})},["Neo.ClientError.Security.Unauthorized"])},e}(),Jp=new oT;$t.authTokenManagers=Jp;Object.freeze(Jp);function iT(e){var r=e.authToken;return new uT(r)}$t.staticAuthTokenManager=iT;var aT=function(){function e(r){r===void 0&&(r=[]),this._subscribers=r}return e.prototype.subscribe=function(r){this._subscribers.push(r)},e.prototype.onCompleted=function(r){this._subscribers.forEach(function(t){return t.onCompleted(r)})},e.prototype.onError=function(r){this._subscribers.forEach(function(t){return t.onError(r)})},e}(),Th=function(){function e(r,t,n,o){this._tokenProvider=r,this._handledSecurityCodes=t,this._currentAuthData=n,this._refreshObservable=o}return e.prototype.getToken=function(){var r;return Sf(this,void 0,void 0,function(){return Pf(this,function(t){switch(t.label){case 0:return this._currentAuthData===void 0||this._currentAuthData.expiration!==void 0&&this._currentAuthData.expiration<new Date?[4,this._refreshAuthToken()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2,(r=this._currentAuthData)===null||r===void 0?void 0:r.token]}})})},e.prototype.handleSecurityException=function(r,t){var n;return this._handledSecurityCodes.includes(t)?(tT.util.equals(r,(n=this._currentAuthData)===null||n===void 0?void 0:n.token)&&this._scheduleRefreshAuthToken(),!0):!1},e.prototype._scheduleRefreshAuthToken=function(r){var t=this;this._refreshObservable===void 0&&(this._currentAuthData=void 0,this._refreshObservable=new aT,Promise.resolve(this._tokenProvider()).then(function(n){var o;t._currentAuthData=n,(o=t._refreshObservable)===null||o===void 0||o.onCompleted(n)}).catch(function(n){var o;(o=t._refreshObservable)===null||o===void 0||o.onError(n)}).finally(function(){t._refreshObservable=void 0})),r!==void 0&&this._refreshObservable.subscribe(r)},e.prototype._refreshAuthToken=function(){return Sf(this,void 0,void 0,function(){var r=this;return Pf(this,function(t){switch(t.label){case 0:return[4,new Promise(function(n,o){r._scheduleRefreshAuthToken({onCompleted:n,onError:o})})];case 1:return[2,t.sent()]}})})},e}(),uT=function(){function e(r){this._authToken=r}return e.prototype.getToken=function(){return this._authToken},e.prototype.handleSecurityException=function(r,t){return!1},e}(),yn={},sT=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(yn,"__esModule",{value:!0});yn.InternalConfig=yn.Config=void 0;var em=function(){function e(){this.encrypted=void 0,this.trust=void 0,this.trustedCertificates=[],this.maxConnectionPoolSize=100,this.maxConnectionLifetime=60*60*1e3,this.connectionAcquisitionTimeout=6e4,this.maxTransactionRetryTime=3e4,this.connectionLivenessCheckTimeout=void 0,this.connectionTimeout=3e4,this.disableLosslessIntegers=!1,this.useBigInt=!1,this.logging=void 0,this.resolver=void 0,this.notificationFilter=void 0,this.userAgent=void 0,this.telemetryDisabled=!1}return e}();yn.Config=em;var cT=function(e){sT(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(em);yn.InternalConfig=cT;(function(e){var r=f&&f.__createBinding||(Object.create?function($,q,Y,D){D===void 0&&(D=Y);var N=Object.getOwnPropertyDescriptor(q,Y);(!N||("get"in N?!q.__esModule:N.writable||N.configurable))&&(N={enumerable:!0,get:function(){return q[Y]}}),Object.defineProperty($,D,N)}:function($,q,Y,D){D===void 0&&(D=Y),$[D]=q[Y]}),t=f&&f.__setModuleDefault||(Object.create?function($,q){Object.defineProperty($,"default",{enumerable:!0,value:q})}:function($,q){$.default=q}),n=f&&f.__importStar||function($){if($&&$.__esModule)return $;var q={};if($!=null)for(var Y in $)Y!=="default"&&Object.prototype.hasOwnProperty.call($,Y)&&r(q,$,Y);return t(q,$),q},o=f&&f.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(e,"__esModule",{value:!0}),e.Transaction=e.Connection=e.ConnectionProvider=e.EagerResult=e.Result=e.Stats=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.Notification=e.ServerInfo=e.queryType=e.ResultSummary=e.Record=e.isPathSegment=e.PathSegment=e.isPath=e.Path=e.isUnboundRelationship=e.UnboundRelationship=e.isRelationship=e.Relationship=e.isNode=e.Node=e.Time=e.LocalTime=e.LocalDateTime=e.isTime=e.isLocalTime=e.isLocalDateTime=e.isDuration=e.isDateTime=e.isDate=e.Duration=e.DateTime=e.Date=e.Point=e.isPoint=e.internal=e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=e.Integer=e.error=e.isRetriableError=e.Neo4jError=e.newError=e.authTokenManagers=void 0,e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationCategory=e.resultTransformers=e.routing=e.staticAuthTokenManager=e.bookmarkManager=e.auth=e.json=e.driver=e.types=e.Driver=e.Session=e.TransactionPromise=e.ManagedTransaction=void 0;var i=he;Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return i.newError}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return i.Neo4jError}}),Object.defineProperty(e,"isRetriableError",{enumerable:!0,get:function(){return i.isRetriableError}});var a=n(Ne);e.Integer=a.default,Object.defineProperty(e,"int",{enumerable:!0,get:function(){return a.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return a.isInt}}),Object.defineProperty(e,"inSafeRange",{enumerable:!0,get:function(){return a.inSafeRange}}),Object.defineProperty(e,"toNumber",{enumerable:!0,get:function(){return a.toNumber}}),Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return a.toString}});var s=pe;Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return s.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return s.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return s.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return s.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return s.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return s.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return s.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return s.isLocalTime}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return s.isTime}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return s.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return s.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return s.Time}});var c=Oe;Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return c.Node}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return c.isNode}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return c.Relationship}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return c.isRelationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return c.UnboundRelationship}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return c.isUnboundRelationship}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return c.Path}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return c.isPath}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return c.PathSegment}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return c.isPathSegment}});var u=o(td);e.Record=u.default;var l=pn;Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return l.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return l.Point}});var h=n(Ee);e.ResultSummary=h.default,Object.defineProperty(e,"queryType",{enumerable:!0,get:function(){return h.queryType}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return h.ServerInfo}}),Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return h.Notification}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return h.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return h.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return h.QueryStatistics}}),Object.defineProperty(e,"Stats",{enumerable:!0,get:function(){return h.Stats}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return h.notificationCategory}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return h.notificationSeverityLevel}});var _=kr;Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return _.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return _.notificationFilterMinimumSeverityLevel}});var y=o(Qo);e.Result=y.default;var b=o(is);e.EagerResult=b.default;var O=o(ei);e.ConnectionProvider=O.default;var P=o(od);e.Connection=P.default;var I=o(as);e.Transaction=I.default;var j=o(us);e.ManagedTransaction=j.default;var S=o(ss);e.TransactionPromise=S.default;var A=o(cs);e.Session=A.default;var T=n(Be),F=T;e.Driver=T.default,e.driver=F;var z=o(ds);e.auth=z.default;var x=Rn;Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return x.bookmarkManager}});var re=$t;Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return re.authTokenManagers}}),Object.defineProperty(e,"staticAuthTokenManager",{enumerable:!0,get:function(){return re.staticAuthTokenManager}});var le=Be;Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return le.routing}});var be=n(yn);e.types=be;var ne=n(Sn);e.json=ne;var me=o(ls);e.resultTransformers=me.default;var X=n(ae);e.internal=X;var U={SERVICE_UNAVAILABLE:i.SERVICE_UNAVAILABLE,SESSION_EXPIRED:i.SESSION_EXPIRED,PROTOCOL_ERROR:i.PROTOCOL_ERROR};e.error=U;var K={authTokenManagers:re.authTokenManagers,newError:i.newError,Neo4jError:i.Neo4jError,isRetriableError:i.isRetriableError,error:U,Integer:a.default,int:a.int,isInt:a.isInt,inSafeRange:a.inSafeRange,toNumber:a.toNumber,toString:a.toString,internal:X,isPoint:l.isPoint,Point:l.Point,Date:s.Date,DateTime:s.DateTime,Duration:s.Duration,isDate:s.isDate,isDateTime:s.isDateTime,isDuration:s.isDuration,isLocalDateTime:s.isLocalDateTime,isLocalTime:s.isLocalTime,isTime:s.isTime,LocalDateTime:s.LocalDateTime,LocalTime:s.LocalTime,Time:s.Time,Node:c.Node,isNode:c.isNode,Relationship:c.Relationship,isRelationship:c.isRelationship,UnboundRelationship:c.UnboundRelationship,isUnboundRelationship:c.isUnboundRelationship,Path:c.Path,isPath:c.isPath,PathSegment:c.PathSegment,isPathSegment:c.isPathSegment,Record:u.default,ResultSummary:h.default,queryType:h.queryType,ServerInfo:h.ServerInfo,Notification:h.Notification,Plan:h.Plan,ProfiledPlan:h.ProfiledPlan,QueryStatistics:h.QueryStatistics,Stats:h.Stats,Result:y.default,EagerResult:b.default,Transaction:I.default,ManagedTransaction:j.default,TransactionPromise:S.default,Session:A.default,Driver:T.default,Connection:P.default,types:be,driver:F,json:ne,auth:z.default,bookmarkManager:x.bookmarkManager,routing:le.routing,resultTransformers:me.default,notificationCategory:h.notificationCategory,notificationSeverityLevel:h.notificationSeverityLevel,notificationFilterDisabledCategory:_.notificationFilterDisabledCategory,notificationFilterMinimumSeverityLevel:_.notificationFilterMinimumSeverityLevel};e.default=K})(H);var hs={},ti={},ce={},jn={},se={};Object.defineProperty(se,"__esModule",{value:!0});se.isFunction=void 0;function lT(e){return typeof e=="function"}se.isFunction=lT;var Ae={},ri={},gt={};Object.defineProperty(gt,"__esModule",{value:!0});gt.createErrorClass=void 0;function fT(e){var r=function(n){Error.call(n),n.stack=new Error().stack},t=e(r);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}gt.createErrorClass=fT;Object.defineProperty(ri,"__esModule",{value:!0});ri.UnsubscriptionError=void 0;var dT=gt;ri.UnsubscriptionError=dT.createErrorClass(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,o){return o+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});var dt={};Object.defineProperty(dt,"__esModule",{value:!0});dt.arrRemove=void 0;function hT(e,r){if(e){var t=e.indexOf(r);0<=t&&e.splice(t,1)}}dt.arrRemove=hT;var Sh=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},Ph=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Ch=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.isSubscription=Ae.EMPTY_SUBSCRIPTION=Ae.Subscription=void 0;var xo=se,xl=ri,Ih=dt,sd=function(){function e(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var r,t,n,o,i;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var s=Sh(a),c=s.next();!c.done;c=s.next()){var u=c.value;u.remove(this)}}catch(O){r={error:O}}finally{try{c&&!c.done&&(t=s.return)&&t.call(s)}finally{if(r)throw r.error}}else a.remove(this);var l=this.initialTeardown;if(xo.isFunction(l))try{l()}catch(O){i=O instanceof xl.UnsubscriptionError?O.errors:[O]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var _=Sh(h),y=_.next();!y.done;y=_.next()){var b=y.value;try{Ah(b)}catch(O){i=i??[],O instanceof xl.UnsubscriptionError?i=Ch(Ch([],Ph(i)),Ph(O.errors)):i.push(O)}}}catch(O){n={error:O}}finally{try{y&&!y.done&&(o=_.return)&&o.call(_)}finally{if(n)throw n.error}}}if(i)throw new xl.UnsubscriptionError(i)}},e.prototype.add=function(r){var t;if(r&&r!==this)if(this.closed)Ah(r);else{if(r instanceof e){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(r)}},e.prototype._hasParent=function(r){var t=this._parentage;return t===r||Array.isArray(t)&&t.includes(r)},e.prototype._addParent=function(r){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(r),t):t?[t,r]:r},e.prototype._removeParent=function(r){var t=this._parentage;t===r?this._parentage=null:Array.isArray(t)&&Ih.arrRemove(t,r)},e.prototype.remove=function(r){var t=this._finalizers;t&&Ih.arrRemove(t,r),r instanceof e&&r._removeParent(this)},e.EMPTY=function(){var r=new e;return r.closed=!0,r}(),e}();Ae.Subscription=sd;Ae.EMPTY_SUBSCRIPTION=sd.EMPTY;function vT(e){return e instanceof sd||e&&"closed"in e&&xo.isFunction(e.remove)&&xo.isFunction(e.add)&&xo.isFunction(e.unsubscribe)}Ae.isSubscription=vT;function Ah(e){xo.isFunction(e)?e():e.unsubscribe()}var nr={};Object.defineProperty(nr,"__esModule",{value:!0});nr.config=void 0;nr.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ni={},cd={};(function(e){var r=f&&f.__read||function(n,o){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var a=i.call(n),s,c=[],u;try{for(;(o===void 0||o-- >0)&&!(s=a.next()).done;)c.push(s.value)}catch(l){u={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(u)throw u.error}}return c},t=f&&f.__spreadArray||function(n,o){for(var i=0,a=o.length,s=n.length;i<a;i++,s++)n[s]=o[i];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutProvider=void 0,e.timeoutProvider={setTimeout:function(n,o){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=e.timeoutProvider.delegate;return s!=null&&s.setTimeout?s.setTimeout.apply(s,t([n,o],r(i))):setTimeout.apply(void 0,t([n,o],r(i)))},clearTimeout:function(n){var o=e.timeoutProvider.delegate;return((o==null?void 0:o.clearTimeout)||clearTimeout)(n)},delegate:void 0}})(cd);Object.defineProperty(ni,"__esModule",{value:!0});ni.reportUnhandledError=void 0;var _T=nr,pT=cd;function mT(e){pT.timeoutProvider.setTimeout(function(){var r=_T.config.onUnhandledError;if(r)r(e);else throw e})}ni.reportUnhandledError=mT;var Re={};Object.defineProperty(Re,"__esModule",{value:!0});Re.noop=void 0;function yT(){}Re.noop=yT;var bt={};Object.defineProperty(bt,"__esModule",{value:!0});bt.createNotification=bt.nextNotification=bt.errorNotification=bt.COMPLETE_NOTIFICATION=void 0;bt.COMPLETE_NOTIFICATION=function(){return vs("C",void 0,void 0)}();function bT(e){return vs("E",void 0,e)}bt.errorNotification=bT;function gT(e){return vs("N",e,void 0)}bt.nextNotification=gT;function vs(e,r,t){return{kind:e,value:r,error:t}}bt.createNotification=vs;var Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.captureError=Yt.errorContext=void 0;var tm=nr,Rr=null;function OT(e){if(tm.config.useDeprecatedSynchronousErrorHandling){var r=!Rr;if(r&&(Rr={errorThrown:!1,error:null}),e(),r){var t=Rr,n=t.errorThrown,o=t.error;if(Rr=null,n)throw o}}else e()}Yt.errorContext=OT;function ET(e){tm.config.useDeprecatedSynchronousErrorHandling&&Rr&&(Rr.errorThrown=!0,Rr.error=e)}Yt.captureError=ET;(function(e){var r=f&&f.__extends||function(){var j=function(S,A){return j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,F){T.__proto__=F}||function(T,F){for(var z in F)Object.prototype.hasOwnProperty.call(F,z)&&(T[z]=F[z])},j(S,A)};return function(S,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");j(S,A);function T(){this.constructor=S}S.prototype=A===null?Object.create(A):(T.prototype=A.prototype,new T)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_OBSERVER=e.SafeSubscriber=e.Subscriber=void 0;var t=se,n=Ae,o=nr,i=ni,a=Re,s=bt,c=cd,u=Yt,l=function(j){r(S,j);function S(A){var T=j.call(this)||this;return T.isStopped=!1,A?(T.destination=A,n.isSubscription(A)&&A.add(T)):T.destination=e.EMPTY_OBSERVER,T}return S.create=function(A,T,F){return new b(A,T,F)},S.prototype.next=function(A){this.isStopped?I(s.nextNotification(A),this):this._next(A)},S.prototype.error=function(A){this.isStopped?I(s.errorNotification(A),this):(this.isStopped=!0,this._error(A))},S.prototype.complete=function(){this.isStopped?I(s.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},S.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,j.prototype.unsubscribe.call(this),this.destination=null)},S.prototype._next=function(A){this.destination.next(A)},S.prototype._error=function(A){try{this.destination.error(A)}finally{this.unsubscribe()}},S.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},S}(n.Subscription);e.Subscriber=l;var h=Function.prototype.bind;function _(j,S){return h.call(j,S)}var y=function(){function j(S){this.partialObserver=S}return j.prototype.next=function(S){var A=this.partialObserver;if(A.next)try{A.next(S)}catch(T){O(T)}},j.prototype.error=function(S){var A=this.partialObserver;if(A.error)try{A.error(S)}catch(T){O(T)}else O(S)},j.prototype.complete=function(){var S=this.partialObserver;if(S.complete)try{S.complete()}catch(A){O(A)}},j}(),b=function(j){r(S,j);function S(A,T,F){var z=j.call(this)||this,x;if(t.isFunction(A)||!A)x={next:A??void 0,error:T??void 0,complete:F??void 0};else{var re;z&&o.config.useDeprecatedNextContext?(re=Object.create(A),re.unsubscribe=function(){return z.unsubscribe()},x={next:A.next&&_(A.next,re),error:A.error&&_(A.error,re),complete:A.complete&&_(A.complete,re)}):x=A}return z.destination=new y(x),z}return S}(l);e.SafeSubscriber=b;function O(j){o.config.useDeprecatedSynchronousErrorHandling?u.captureError(j):i.reportUnhandledError(j)}function P(j){throw j}function I(j,S){var A=o.config.onStoppedNotification;A&&c.timeoutProvider.setTimeout(function(){return A(j,S)})}e.EMPTY_OBSERVER={closed:!0,next:a.noop,error:P,complete:a.noop}})(jn);var qr={};Object.defineProperty(qr,"__esModule",{value:!0});qr.observable=void 0;qr.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();var kt={},je={};Object.defineProperty(je,"__esModule",{value:!0});je.identity=void 0;function wT(e){return e}je.identity=wT;Object.defineProperty(kt,"__esModule",{value:!0});kt.pipeFromArray=kt.pipe=void 0;var TT=je;function ST(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return rm(e)}kt.pipe=ST;function rm(e){return e.length===0?TT.identity:e.length===1?e[0]:function(t){return e.reduce(function(n,o){return o(n)},t)}}kt.pipeFromArray=rm;Object.defineProperty(ce,"__esModule",{value:!0});ce.Observable=void 0;var Cf=jn,PT=Ae,CT=qr,IT=kt,AT=nr,Wl=se,RT=Yt,jT=function(){function e(r){r&&(this._subscribe=r)}return e.prototype.lift=function(r){var t=new e;return t.source=this,t.operator=r,t},e.prototype.subscribe=function(r,t,n){var o=this,i=MT(r)?r:new Cf.SafeSubscriber(r,t,n);return RT.errorContext(function(){var a=o,s=a.operator,c=a.source;i.add(s?s.call(i,c):c?o._subscribe(i):o._trySubscribe(i))}),i},e.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(t){r.error(t)}},e.prototype.forEach=function(r,t){var n=this;return t=Rh(t),new t(function(o,i){var a=new Cf.SafeSubscriber({next:function(s){try{r(s)}catch(c){i(c),a.unsubscribe()}},error:i,complete:o});n.subscribe(a)})},e.prototype._subscribe=function(r){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(r)},e.prototype[CT.observable]=function(){return this},e.prototype.pipe=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return IT.pipeFromArray(r)(this)},e.prototype.toPromise=function(r){var t=this;return r=Rh(r),new r(function(n,o){var i;t.subscribe(function(a){return i=a},function(a){return o(a)},function(){return n(i)})})},e.create=function(r){return new e(r)},e}();ce.Observable=jT;function Rh(e){var r;return(r=e??AT.config.Promise)!==null&&r!==void 0?r:Promise}function $T(e){return e&&Wl.isFunction(e.next)&&Wl.isFunction(e.error)&&Wl.isFunction(e.complete)}function MT(e){return e&&e instanceof Cf.Subscriber||$T(e)&&PT.isSubscription(e)}var Hr={},$n={},k={};Object.defineProperty(k,"__esModule",{value:!0});k.operate=k.hasLift=void 0;var kT=se;function nm(e){return kT.isFunction(e==null?void 0:e.lift)}k.hasLift=nm;function NT(e){return function(r){if(nm(r))return r.lift(function(t){try{return e(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}k.operate=NT;var L={},DT=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(L,"__esModule",{value:!0});L.OperatorSubscriber=L.createOperatorSubscriber=void 0;var LT=jn;function UT(e,r,t,n,o){return new om(e,r,t,n,o)}L.createOperatorSubscriber=UT;var om=function(e){DT(r,e);function r(t,n,o,i,a,s){var c=e.call(this,t)||this;return c.onFinalize=a,c.shouldUnsubscribe=s,c._next=n?function(u){try{n(u)}catch(l){t.error(l)}}:e.prototype._next,c._error=i?function(u){try{i(u)}catch(l){t.error(l)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=o?function(){try{o()}catch(u){t.error(u)}finally{this.unsubscribe()}}:e.prototype._complete,c}return r.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},r}(LT.Subscriber);L.OperatorSubscriber=om;Object.defineProperty($n,"__esModule",{value:!0});$n.refCount=void 0;var FT=k,BT=L;function xT(){return FT.operate(function(e,r){var t=null;e._refCount++;var n=BT.createOperatorSubscriber(r,void 0,void 0,void 0,function(){if(!e||e._refCount<=0||0<--e._refCount){t=null;return}var o=e._connection,i=t;t=null,o&&(!i||o===i)&&o.unsubscribe(),r.unsubscribe()});e.subscribe(n),n.closed||(t=e.connect())})}$n.refCount=xT;var WT=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Hr,"__esModule",{value:!0});Hr.ConnectableObservable=void 0;var VT=ce,jh=Ae,qT=$n,HT=L,zT=k,YT=function(e){WT(r,e);function r(t,n){var o=e.call(this)||this;return o.source=t,o.subjectFactory=n,o._subject=null,o._refCount=0,o._connection=null,zT.hasLift(t)&&(o.lift=t.lift),o}return r.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},r.prototype.getSubject=function(){var t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject},r.prototype._teardown=function(){this._refCount=0;var t=this._connection;this._subject=this._connection=null,t==null||t.unsubscribe()},r.prototype.connect=function(){var t=this,n=this._connection;if(!n){n=this._connection=new jh.Subscription;var o=this.getSubject();n.add(this.source.subscribe(HT.createOperatorSubscriber(o,void 0,function(){t._teardown(),o.complete()},function(i){t._teardown(),o.error(i)},function(){return t._teardown()}))),n.closed&&(this._connection=null,n=jh.Subscription.EMPTY)}return n},r.prototype.refCount=function(){return qT.refCount()(this)},r}(VT.Observable);Hr.ConnectableObservable=YT;var _s={},im={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.performanceTimestampProvider=void 0,e.performanceTimestampProvider={now:function(){return(e.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}})(im);var ld={};(function(e){var r=f&&f.__read||function(o,i){var a=typeof Symbol=="function"&&o[Symbol.iterator];if(!a)return o;var s=a.call(o),c,u=[],l;try{for(;(i===void 0||i-- >0)&&!(c=s.next()).done;)u.push(c.value)}catch(h){l={error:h}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(l)throw l.error}}return u},t=f&&f.__spreadArray||function(o,i){for(var a=0,s=i.length,c=o.length;a<s;a++,c++)o[c]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrameProvider=void 0;var n=Ae;e.animationFrameProvider={schedule:function(o){var i=requestAnimationFrame,a=cancelAnimationFrame,s=e.animationFrameProvider.delegate;s&&(i=s.requestAnimationFrame,a=s.cancelAnimationFrame);var c=i(function(u){a=void 0,o(u)});return new n.Subscription(function(){return a==null?void 0:a(c)})},requestAnimationFrame:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=e.animationFrameProvider.delegate;return((a==null?void 0:a.requestAnimationFrame)||requestAnimationFrame).apply(void 0,t([],r(o)))},cancelAnimationFrame:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=e.animationFrameProvider.delegate;return((a==null?void 0:a.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,t([],r(o)))},delegate:void 0}})(ld);Object.defineProperty(_s,"__esModule",{value:!0});_s.animationFrames=void 0;var GT=ce,KT=im,$h=ld;function ZT(e){return e?am(e):QT}_s.animationFrames=ZT;function am(e){return new GT.Observable(function(r){var t=e||KT.performanceTimestampProvider,n=t.now(),o=0,i=function(){r.closed||(o=$h.animationFrameProvider.requestAnimationFrame(function(a){o=0;var s=t.now();r.next({timestamp:e?s:a,elapsed:s-n}),i()}))};return i(),function(){o&&$h.animationFrameProvider.cancelAnimationFrame(o)}})}var QT=am(),we={},oi={};Object.defineProperty(oi,"__esModule",{value:!0});oi.ObjectUnsubscribedError=void 0;var XT=gt;oi.ObjectUnsubscribedError=XT.createErrorClass(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var um=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),JT=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(we,"__esModule",{value:!0});we.AnonymousSubject=we.Subject=void 0;var Mh=ce,If=Ae,eS=oi,tS=dt,Vl=Yt,sm=function(e){um(r,e);function r(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r.prototype.lift=function(t){var n=new Af(this,this);return n.operator=t,n},r.prototype._throwIfClosed=function(){if(this.closed)throw new eS.ObjectUnsubscribedError},r.prototype.next=function(t){var n=this;Vl.errorContext(function(){var o,i;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var a=JT(n.currentObservers),s=a.next();!s.done;s=a.next()){var c=s.value;c.next(t)}}catch(u){o={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}}})},r.prototype.error=function(t){var n=this;Vl.errorContext(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=t;for(var o=n.observers;o.length;)o.shift().error(t)}})},r.prototype.complete=function(){var t=this;Vl.errorContext(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var n=t.observers;n.length;)n.shift().complete()}})},r.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(r.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),r.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},r.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},r.prototype._innerSubscribe=function(t){var n=this,o=this,i=o.hasError,a=o.isStopped,s=o.observers;return i||a?If.EMPTY_SUBSCRIPTION:(this.currentObservers=null,s.push(t),new If.Subscription(function(){n.currentObservers=null,tS.arrRemove(s,t)}))},r.prototype._checkFinalizedStatuses=function(t){var n=this,o=n.hasError,i=n.thrownError,a=n.isStopped;o?t.error(i):a&&t.complete()},r.prototype.asObservable=function(){var t=new Mh.Observable;return t.source=this,t},r.create=function(t,n){return new Af(t,n)},r}(Mh.Observable);we.Subject=sm;var Af=function(e){um(r,e);function r(t,n){var o=e.call(this)||this;return o.destination=t,o.source=n,o}return r.prototype.next=function(t){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.next)===null||o===void 0||o.call(n,t)},r.prototype.error=function(t){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.error)===null||o===void 0||o.call(n,t)},r.prototype.complete=function(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)},r.prototype._subscribe=function(t){var n,o;return(o=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&o!==void 0?o:If.EMPTY_SUBSCRIPTION},r}(sm);we.AnonymousSubject=Af;var ii={},rS=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ii,"__esModule",{value:!0});ii.BehaviorSubject=void 0;var nS=we,oS=function(e){rS(r,e);function r(t){var n=e.call(this)||this;return n._value=t,n}return Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),r.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},r.prototype.getValue=function(){var t=this,n=t.hasError,o=t.thrownError,i=t._value;if(n)throw o;return this._throwIfClosed(),i},r.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},r}(nS.Subject);ii.BehaviorSubject=oS;var Mn={},ps={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.dateTimestampProvider=void 0,e.dateTimestampProvider={now:function(){return(e.dateTimestampProvider.delegate||Date).now()},delegate:void 0}})(ps);var iS=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Mn,"__esModule",{value:!0});Mn.ReplaySubject=void 0;var aS=we,uS=ps,sS=function(e){iS(r,e);function r(t,n,o){t===void 0&&(t=1/0),n===void 0&&(n=1/0),o===void 0&&(o=uS.dateTimestampProvider);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=n,i._timestampProvider=o,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=n===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,n),i}return r.prototype.next=function(t){var n=this,o=n.isStopped,i=n._buffer,a=n._infiniteTimeWindow,s=n._timestampProvider,c=n._windowTime;o||(i.push(t),!a&&i.push(s.now()+c)),this._trimBuffer(),e.prototype.next.call(this,t)},r.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(t),o=this,i=o._infiniteTimeWindow,a=o._buffer,s=a.slice(),c=0;c<s.length&&!t.closed;c+=i?1:2)t.next(s[c]);return this._checkFinalizedStatuses(t),n},r.prototype._trimBuffer=function(){var t=this,n=t._bufferSize,o=t._timestampProvider,i=t._buffer,a=t._infiniteTimeWindow,s=(a?1:2)*n;if(n<1/0&&s<i.length&&i.splice(0,i.length-s),!a){for(var c=o.now(),u=0,l=1;l<i.length&&i[l]<=c;l+=2)u=l;u&&i.splice(0,u+1)}},r}(aS.Subject);Mn.ReplaySubject=sS;var kn={},cS=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(kn,"__esModule",{value:!0});kn.AsyncSubject=void 0;var lS=we,fS=function(e){cS(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t._value=null,t._hasValue=!1,t._isComplete=!1,t}return r.prototype._checkFinalizedStatuses=function(t){var n=this,o=n.hasError,i=n._hasValue,a=n._value,s=n.thrownError,c=n.isStopped,u=n._isComplete;o?t.error(s):(c||u)&&(i&&t.next(a),t.complete())},r.prototype.next=function(t){this.isStopped||(this._value=t,this._hasValue=!0)},r.prototype.complete=function(){var t=this,n=t._hasValue,o=t._value,i=t._isComplete;i||(this._isComplete=!0,n&&e.prototype.next.call(this,o),e.prototype.complete.call(this))},r}(lS.Subject);kn.AsyncSubject=fS;var cm={},ms={},or={},ys={},dS=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ys,"__esModule",{value:!0});ys.Action=void 0;var hS=Ae,vS=function(e){dS(r,e);function r(t,n){return e.call(this)||this}return r.prototype.schedule=function(t,n){return this},r}(hS.Subscription);ys.Action=vS;var lm={};(function(e){var r=f&&f.__read||function(n,o){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var a=i.call(n),s,c=[],u;try{for(;(o===void 0||o-- >0)&&!(s=a.next()).done;)c.push(s.value)}catch(l){u={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(u)throw u.error}}return c},t=f&&f.__spreadArray||function(n,o){for(var i=0,a=o.length,s=n.length;i<a;i++,s++)n[s]=o[i];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.intervalProvider=void 0,e.intervalProvider={setInterval:function(n,o){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=e.intervalProvider.delegate;return s!=null&&s.setInterval?s.setInterval.apply(s,t([n,o],r(i))):setInterval.apply(void 0,t([n,o],r(i)))},clearInterval:function(n){var o=e.intervalProvider.delegate;return((o==null?void 0:o.clearInterval)||clearInterval)(n)},delegate:void 0}})(lm);var _S=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(or,"__esModule",{value:!0});or.AsyncAction=void 0;var pS=ys,kh=lm,mS=dt,yS=function(e){_S(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o.pending=!1,o}return r.prototype.schedule=function(t,n){var o;if(n===void 0&&(n=0),this.closed)return this;this.state=t;var i=this.id,a=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(a,i,n)),this.pending=!0,this.delay=n,this.id=(o=this.id)!==null&&o!==void 0?o:this.requestAsyncId(a,this.id,n),this},r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),kh.intervalProvider.setInterval(t.flush.bind(t,this),o)},r.prototype.recycleAsyncId=function(t,n,o){if(o===void 0&&(o=0),o!=null&&this.delay===o&&this.pending===!1)return n;n!=null&&kh.intervalProvider.clearInterval(n)},r.prototype.execute=function(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var o=this._execute(t,n);if(o)return o;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(t,n){var o=!1,i;try{this.work(t)}catch(a){o=!0,i=a||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),i},r.prototype.unsubscribe=function(){if(!this.closed){var t=this,n=t.id,o=t.scheduler,i=o.actions;this.work=this.state=this.scheduler=null,this.pending=!1,mS.arrRemove(i,this),n!=null&&(this.id=this.recycleAsyncId(o,n,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},r}(pS.Action);or.AsyncAction=yS;var fm={},bn={};Object.defineProperty(bn,"__esModule",{value:!0});bn.TestTools=bn.Immediate=void 0;var bS=1,ql,Wu={};function Nh(e){return e in Wu?(delete Wu[e],!0):!1}bn.Immediate={setImmediate:function(e){var r=bS++;return Wu[r]=!0,ql||(ql=Promise.resolve()),ql.then(function(){return Nh(r)&&e()}),r},clearImmediate:function(e){Nh(e)}};bn.TestTools={pending:function(){return Object.keys(Wu).length}};(function(e){var r=f&&f.__read||function(a,s){var c=typeof Symbol=="function"&&a[Symbol.iterator];if(!c)return a;var u=c.call(a),l,h=[],_;try{for(;(s===void 0||s-- >0)&&!(l=u.next()).done;)h.push(l.value)}catch(y){_={error:y}}finally{try{l&&!l.done&&(c=u.return)&&c.call(u)}finally{if(_)throw _.error}}return h},t=f&&f.__spreadArray||function(a,s){for(var c=0,u=s.length,l=a.length;c<u;c++,l++)a[l]=s[c];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.immediateProvider=void 0;var n=bn,o=n.Immediate.setImmediate,i=n.Immediate.clearImmediate;e.immediateProvider={setImmediate:function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var c=e.immediateProvider.delegate;return((c==null?void 0:c.setImmediate)||o).apply(void 0,t([],r(a)))},clearImmediate:function(a){var s=e.immediateProvider.delegate;return((s==null?void 0:s.clearImmediate)||i)(a)},delegate:void 0}})(fm);var gS=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ms,"__esModule",{value:!0});ms.AsapAction=void 0;var OS=or,Dh=fm,ES=function(e){gS(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o}return r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),o!==null&&o>0?e.prototype.requestAsyncId.call(this,t,n,o):(t.actions.push(this),t._scheduled||(t._scheduled=Dh.immediateProvider.setImmediate(t.flush.bind(t,void 0))))},r.prototype.recycleAsyncId=function(t,n,o){var i;if(o===void 0&&(o=0),o!=null?o>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,o);var a=t.actions;n!=null&&((i=a[a.length-1])===null||i===void 0?void 0:i.id)!==n&&(Dh.immediateProvider.clearImmediate(n),t._scheduled===n&&(t._scheduled=void 0))},r}(OS.AsyncAction);ms.AsapAction=ES;var bs={},ir={},ai={};Object.defineProperty(ai,"__esModule",{value:!0});ai.Scheduler=void 0;var wS=ps,TS=function(){function e(r,t){t===void 0&&(t=e.now),this.schedulerActionCtor=r,this.now=t}return e.prototype.schedule=function(r,t,n){return t===void 0&&(t=0),new this.schedulerActionCtor(this,r).schedule(n,t)},e.now=wS.dateTimestampProvider.now,e}();ai.Scheduler=TS;var SS=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ir,"__esModule",{value:!0});ir.AsyncScheduler=void 0;var Lh=ai,PS=function(e){SS(r,e);function r(t,n){n===void 0&&(n=Lh.Scheduler.now);var o=e.call(this,t,n)||this;return o.actions=[],o._active=!1,o}return r.prototype.flush=function(t){var n=this.actions;if(this._active){n.push(t);return}var o;this._active=!0;do if(o=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,o){for(;t=n.shift();)t.unsubscribe();throw o}},r}(Lh.Scheduler);ir.AsyncScheduler=PS;var CS=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(bs,"__esModule",{value:!0});bs.AsapScheduler=void 0;var IS=ir,AS=function(e){CS(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.flush=function(t){this._active=!0;var n=this._scheduled;this._scheduled=void 0;var o=this.actions,i;t=t||o.shift();do if(i=t.execute(t.state,t.delay))break;while((t=o[0])&&t.id===n&&o.shift());if(this._active=!1,i){for(;(t=o[0])&&t.id===n&&o.shift();)t.unsubscribe();throw i}},r}(IS.AsyncScheduler);bs.AsapScheduler=AS;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.asap=e.asapScheduler=void 0;var r=ms,t=bs;e.asapScheduler=new t.AsapScheduler(r.AsapAction),e.asap=e.asapScheduler})(cm);var Qe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.async=e.asyncScheduler=void 0;var r=or,t=ir;e.asyncScheduler=new t.AsyncScheduler(r.AsyncAction),e.async=e.asyncScheduler})(Qe);var dm={},gs={},RS=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(gs,"__esModule",{value:!0});gs.QueueAction=void 0;var jS=or,$S=function(e){RS(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o}return r.prototype.schedule=function(t,n){return n===void 0&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},r.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),o!=null&&o>0||o==null&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,o):(t.flush(this),0)},r}(jS.AsyncAction);gs.QueueAction=$S;var Os={},MS=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Os,"__esModule",{value:!0});Os.QueueScheduler=void 0;var kS=ir,NS=function(e){MS(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(kS.AsyncScheduler);Os.QueueScheduler=NS;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.queue=e.queueScheduler=void 0;var r=gs,t=Os;e.queueScheduler=new t.QueueScheduler(r.QueueAction),e.queue=e.queueScheduler})(dm);var hm={},Es={},DS=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Es,"__esModule",{value:!0});Es.AnimationFrameAction=void 0;var LS=or,Uh=ld,US=function(e){DS(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o}return r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),o!==null&&o>0?e.prototype.requestAsyncId.call(this,t,n,o):(t.actions.push(this),t._scheduled||(t._scheduled=Uh.animationFrameProvider.requestAnimationFrame(function(){return t.flush(void 0)})))},r.prototype.recycleAsyncId=function(t,n,o){var i;if(o===void 0&&(o=0),o!=null?o>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,o);var a=t.actions;n!=null&&((i=a[a.length-1])===null||i===void 0?void 0:i.id)!==n&&(Uh.animationFrameProvider.cancelAnimationFrame(n),t._scheduled=void 0)},r}(LS.AsyncAction);Es.AnimationFrameAction=US;var ws={},FS=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ws,"__esModule",{value:!0});ws.AnimationFrameScheduler=void 0;var BS=ir,xS=function(e){FS(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.flush=function(t){this._active=!0;var n=this._scheduled;this._scheduled=void 0;var o=this.actions,i;t=t||o.shift();do if(i=t.execute(t.state,t.delay))break;while((t=o[0])&&t.id===n&&o.shift());if(this._active=!1,i){for(;(t=o[0])&&t.id===n&&o.shift();)t.unsubscribe();throw i}},r}(BS.AsyncScheduler);ws.AnimationFrameScheduler=xS;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrame=e.animationFrameScheduler=void 0;var r=Es,t=ws;e.animationFrameScheduler=new t.AnimationFrameScheduler(r.AnimationFrameAction),e.animationFrame=e.animationFrameScheduler})(hm);var gn={},vm=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(gn,"__esModule",{value:!0});gn.VirtualAction=gn.VirtualTimeScheduler=void 0;var WS=or,VS=Ae,qS=ir,HS=function(e){vm(r,e);function r(t,n){t===void 0&&(t=_m),n===void 0&&(n=1/0);var o=e.call(this,t,function(){return o.frame})||this;return o.maxFrames=n,o.frame=0,o.index=-1,o}return r.prototype.flush=function(){for(var t=this,n=t.actions,o=t.maxFrames,i,a;(a=n[0])&&a.delay<=o&&(n.shift(),this.frame=a.delay,!(i=a.execute(a.state,a.delay))););if(i){for(;a=n.shift();)a.unsubscribe();throw i}},r.frameTimeFactor=10,r}(qS.AsyncScheduler);gn.VirtualTimeScheduler=HS;var _m=function(e){vm(r,e);function r(t,n,o){o===void 0&&(o=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=o,i.active=!0,i.index=t.index=o,i}return r.prototype.schedule=function(t,n){if(n===void 0&&(n=0),Number.isFinite(n)){if(!this.id)return e.prototype.schedule.call(this,t,n);this.active=!1;var o=new r(this.scheduler,this.work);return this.add(o),o.schedule(t,n)}else return VS.Subscription.EMPTY},r.prototype.requestAsyncId=function(t,n,o){o===void 0&&(o=0),this.delay=t.frame+o;var i=t.actions;return i.push(this),i.sort(r.sortActions),1},r.prototype.recycleAsyncId=function(t,n,o){},r.prototype._execute=function(t,n){if(this.active===!0)return e.prototype._execute.call(this,t,n)},r.sortActions=function(t,n){return t.delay===n.delay?t.index===n.index?0:t.index>n.index?1:-1:t.delay>n.delay?1:-1},r}(WS.AsyncAction);gn.VirtualAction=_m;var Ts={},ft={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.empty=e.EMPTY=void 0;var r=ce;e.EMPTY=new r.Observable(function(o){return o.complete()});function t(o){return o?n(o):e.EMPTY}e.empty=t;function n(o){return new r.Observable(function(i){return o.schedule(function(){return i.complete()})})}})(ft);var Nn={},Se={},zr={};Object.defineProperty(zr,"__esModule",{value:!0});zr.isScheduler=void 0;var zS=se;function YS(e){return e&&zS.isFunction(e.schedule)}zr.isScheduler=YS;Object.defineProperty(Se,"__esModule",{value:!0});Se.popNumber=Se.popScheduler=Se.popResultSelector=void 0;var GS=se,KS=zr;function fd(e){return e[e.length-1]}function ZS(e){return GS.isFunction(fd(e))?e.pop():void 0}Se.popResultSelector=ZS;function QS(e){return KS.isScheduler(fd(e))?e.pop():void 0}Se.popScheduler=QS;function XS(e,r){return typeof fd(e)=="number"?e.pop():r}Se.popNumber=XS;var ht={},ui={},Ss={},V={},Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});Dn.isArrayLike=void 0;Dn.isArrayLike=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};var si={};Object.defineProperty(si,"__esModule",{value:!0});si.isPromise=void 0;var JS=se;function eP(e){return JS.isFunction(e==null?void 0:e.then)}si.isPromise=eP;var ci={};Object.defineProperty(ci,"__esModule",{value:!0});ci.isInteropObservable=void 0;var tP=qr,rP=se;function nP(e){return rP.isFunction(e[tP.observable])}ci.isInteropObservable=nP;var li={};Object.defineProperty(li,"__esModule",{value:!0});li.isAsyncIterable=void 0;var oP=se;function iP(e){return Symbol.asyncIterator&&oP.isFunction(e==null?void 0:e[Symbol.asyncIterator])}li.isAsyncIterable=iP;var fi={};Object.defineProperty(fi,"__esModule",{value:!0});fi.createInvalidObservableTypeError=void 0;function aP(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}fi.createInvalidObservableTypeError=aP;var di={},Dr={};Object.defineProperty(Dr,"__esModule",{value:!0});Dr.iterator=Dr.getSymbolIterator=void 0;function pm(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}Dr.getSymbolIterator=pm;Dr.iterator=pm();Object.defineProperty(di,"__esModule",{value:!0});di.isIterable=void 0;var uP=Dr,sP=se;function cP(e){return sP.isFunction(e==null?void 0:e[uP.iterator])}di.isIterable=cP;var Gt={},lP=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},hn=f&&f.__await||function(e){return this instanceof hn?(this.v=e,this):new hn(e)},fP=f&&f.__asyncGenerator||function(e,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(e,r||[]),o,i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(_){n[_]&&(o[_]=function(y){return new Promise(function(b,O){i.push([_,y,b,O])>1||s(_,y)})})}function s(_,y){try{c(n[_](y))}catch(b){h(i[0][3],b)}}function c(_){_.value instanceof hn?Promise.resolve(_.value.v).then(u,l):h(i[0][2],_)}function u(_){s("next",_)}function l(_){s("throw",_)}function h(_,y){_(y),i.shift(),i.length&&s(i[0][0],i[0][1])}};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.isReadableStreamLike=Gt.readableStreamLikeToAsyncGenerator=void 0;var dP=se;function hP(e){return fP(this,arguments,function(){var t,n,o,i;return lP(this,function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,hn(t.read())];case 3:return n=a.sent(),o=n.value,i=n.done,i?[4,hn(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,hn(o)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}Gt.readableStreamLikeToAsyncGenerator=hP;function vP(e){return dP.isFunction(e==null?void 0:e.getReader)}Gt.isReadableStreamLike=vP;var _P=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},pP=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},mP=f&&f.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e[Symbol.asyncIterator],t;return r?r.call(e):(e=typeof Rf=="function"?Rf(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(a){return new Promise(function(s,c){a=e[i](a),o(s,c,a.done,a.value)})}}function o(i,a,s,c){Promise.resolve(c).then(function(u){i({value:u,done:s})},a)}},Rf=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(V,"__esModule",{value:!0});V.fromReadableStreamLike=V.fromAsyncIterable=V.fromIterable=V.fromPromise=V.fromArrayLike=V.fromInteropObservable=V.innerFrom=void 0;var yP=Dn,bP=si,Ln=ce,gP=ci,OP=li,EP=fi,wP=di,mm=Gt,TP=se,SP=ni,PP=qr;function CP(e){if(e instanceof Ln.Observable)return e;if(e!=null){if(gP.isInteropObservable(e))return ym(e);if(yP.isArrayLike(e))return bm(e);if(bP.isPromise(e))return gm(e);if(OP.isAsyncIterable(e))return dd(e);if(wP.isIterable(e))return Om(e);if(mm.isReadableStreamLike(e))return Em(e)}throw EP.createInvalidObservableTypeError(e)}V.innerFrom=CP;function ym(e){return new Ln.Observable(function(r){var t=e[PP.observable]();if(TP.isFunction(t.subscribe))return t.subscribe(r);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}V.fromInteropObservable=ym;function bm(e){return new Ln.Observable(function(r){for(var t=0;t<e.length&&!r.closed;t++)r.next(e[t]);r.complete()})}V.fromArrayLike=bm;function gm(e){return new Ln.Observable(function(r){e.then(function(t){r.closed||(r.next(t),r.complete())},function(t){return r.error(t)}).then(null,SP.reportUnhandledError)})}V.fromPromise=gm;function Om(e){return new Ln.Observable(function(r){var t,n;try{for(var o=Rf(e),i=o.next();!i.done;i=o.next()){var a=i.value;if(r.next(a),r.closed)return}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}r.complete()})}V.fromIterable=Om;function dd(e){return new Ln.Observable(function(r){IP(e,r).catch(function(t){return r.error(t)})})}V.fromAsyncIterable=dd;function Em(e){return dd(mm.readableStreamLikeToAsyncGenerator(e))}V.fromReadableStreamLike=Em;function IP(e,r){var t,n,o,i;return _P(this,void 0,void 0,function(){var a,s;return pP(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),t=mP(e),c.label=1;case 1:return[4,t.next()];case 2:if(n=c.sent(),!!n.done)return[3,4];if(a=n.value,r.next(a),r.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=c.sent(),o={error:s},[3,11];case 6:return c.trys.push([6,,9,10]),n&&!n.done&&(i=t.return)?[4,i.call(t)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return r.complete(),[2]}})})}var ar={},vt={};Object.defineProperty(vt,"__esModule",{value:!0});vt.executeSchedule=void 0;function AP(e,r,t,n,o){n===void 0&&(n=0),o===void 0&&(o=!1);var i=r.schedule(function(){t(),o?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(i),!o)return i}vt.executeSchedule=AP;Object.defineProperty(ar,"__esModule",{value:!0});ar.observeOn=void 0;var Hl=vt,RP=k,jP=L;function $P(e,r){return r===void 0&&(r=0),RP.operate(function(t,n){t.subscribe(jP.createOperatorSubscriber(n,function(o){return Hl.executeSchedule(n,e,function(){return n.next(o)},r)},function(){return Hl.executeSchedule(n,e,function(){return n.complete()},r)},function(o){return Hl.executeSchedule(n,e,function(){return n.error(o)},r)}))})}ar.observeOn=$P;var ur={};Object.defineProperty(ur,"__esModule",{value:!0});ur.subscribeOn=void 0;var MP=k;function kP(e,r){return r===void 0&&(r=0),MP.operate(function(t,n){n.add(e.schedule(function(){return t.subscribe(n)},r))})}ur.subscribeOn=kP;Object.defineProperty(Ss,"__esModule",{value:!0});Ss.scheduleObservable=void 0;var NP=V,DP=ar,LP=ur;function UP(e,r){return NP.innerFrom(e).pipe(LP.subscribeOn(r),DP.observeOn(r))}Ss.scheduleObservable=UP;var Ps={};Object.defineProperty(Ps,"__esModule",{value:!0});Ps.schedulePromise=void 0;var FP=V,BP=ar,xP=ur;function WP(e,r){return FP.innerFrom(e).pipe(xP.subscribeOn(r),BP.observeOn(r))}Ps.schedulePromise=WP;var Cs={};Object.defineProperty(Cs,"__esModule",{value:!0});Cs.scheduleArray=void 0;var VP=ce;function qP(e,r){return new VP.Observable(function(t){var n=0;return r.schedule(function(){n===e.length?t.complete():(t.next(e[n++]),t.closed||this.schedule())})})}Cs.scheduleArray=qP;var hi={};Object.defineProperty(hi,"__esModule",{value:!0});hi.scheduleIterable=void 0;var HP=ce,zP=Dr,YP=se,Fh=vt;function GP(e,r){return new HP.Observable(function(t){var n;return Fh.executeSchedule(t,r,function(){n=e[zP.iterator](),Fh.executeSchedule(t,r,function(){var o,i,a;try{o=n.next(),i=o.value,a=o.done}catch(s){t.error(s);return}a?t.complete():t.next(i)},0,!0)}),function(){return YP.isFunction(n==null?void 0:n.return)&&n.return()}})}hi.scheduleIterable=GP;var vi={};Object.defineProperty(vi,"__esModule",{value:!0});vi.scheduleAsyncIterable=void 0;var KP=ce,Bh=vt;function ZP(e,r){if(!e)throw new Error("Iterable cannot be null");return new KP.Observable(function(t){Bh.executeSchedule(t,r,function(){var n=e[Symbol.asyncIterator]();Bh.executeSchedule(t,r,function(){n.next().then(function(o){o.done?t.complete():t.next(o.value)})},0,!0)})})}vi.scheduleAsyncIterable=ZP;var Is={};Object.defineProperty(Is,"__esModule",{value:!0});Is.scheduleReadableStreamLike=void 0;var QP=vi,XP=Gt;function JP(e,r){return QP.scheduleAsyncIterable(XP.readableStreamLikeToAsyncGenerator(e),r)}Is.scheduleReadableStreamLike=JP;Object.defineProperty(ui,"__esModule",{value:!0});ui.scheduled=void 0;var eC=Ss,tC=Ps,rC=Cs,nC=hi,oC=vi,iC=ci,aC=si,uC=Dn,sC=di,cC=li,lC=fi,fC=Gt,dC=Is;function hC(e,r){if(e!=null){if(iC.isInteropObservable(e))return eC.scheduleObservable(e,r);if(uC.isArrayLike(e))return rC.scheduleArray(e,r);if(aC.isPromise(e))return tC.schedulePromise(e,r);if(cC.isAsyncIterable(e))return oC.scheduleAsyncIterable(e,r);if(sC.isIterable(e))return nC.scheduleIterable(e,r);if(fC.isReadableStreamLike(e))return dC.scheduleReadableStreamLike(e,r)}throw lC.createInvalidObservableTypeError(e)}ui.scheduled=hC;Object.defineProperty(ht,"__esModule",{value:!0});ht.from=void 0;var vC=ui,_C=V;function pC(e,r){return r?vC.scheduled(e,r):_C.innerFrom(e)}ht.from=pC;Object.defineProperty(Nn,"__esModule",{value:!0});Nn.of=void 0;var mC=Se,yC=ht;function bC(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=mC.popScheduler(e);return yC.from(e,t)}Nn.of=bC;var _i={};Object.defineProperty(_i,"__esModule",{value:!0});_i.throwError=void 0;var gC=ce,OC=se;function EC(e,r){var t=OC.isFunction(e)?e:function(){return e},n=function(o){return o.error(t())};return new gC.Observable(r?function(o){return r.schedule(n,0,o)}:n)}_i.throwError=EC;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.observeNotification=e.Notification=e.NotificationKind=void 0;var r=ft,t=Nn,n=_i,o=se;(function(s){s.NEXT="N",s.ERROR="E",s.COMPLETE="C"})(e.NotificationKind||(e.NotificationKind={}));var i=function(){function s(c,u,l){this.kind=c,this.value=u,this.error=l,this.hasValue=c==="N"}return s.prototype.observe=function(c){return a(this,c)},s.prototype.do=function(c,u,l){var h=this,_=h.kind,y=h.value,b=h.error;return _==="N"?c==null?void 0:c(y):_==="E"?u==null?void 0:u(b):l==null?void 0:l()},s.prototype.accept=function(c,u,l){var h;return o.isFunction((h=c)===null||h===void 0?void 0:h.next)?this.observe(c):this.do(c,u,l)},s.prototype.toObservable=function(){var c=this,u=c.kind,l=c.value,h=c.error,_=u==="N"?t.of(l):u==="E"?n.throwError(function(){return h}):u==="C"?r.EMPTY:0;if(!_)throw new TypeError("Unexpected notification kind "+u);return _},s.createNext=function(c){return new s("N",c)},s.createError=function(c){return new s("E",void 0,c)},s.createComplete=function(){return s.completeNotification},s.completeNotification=new s("C"),s}();e.Notification=i;function a(s,c){var u,l,h,_=s,y=_.kind,b=_.value,O=_.error;if(typeof y!="string")throw new TypeError('Invalid notification, missing "kind"');y==="N"?(u=c.next)===null||u===void 0||u.call(c,b):y==="E"?(l=c.error)===null||l===void 0||l.call(c,O):(h=c.complete)===null||h===void 0||h.call(c)}e.observeNotification=a})(Ts);var As={};Object.defineProperty(As,"__esModule",{value:!0});As.isObservable=void 0;var wC=ce,xh=se;function TC(e){return!!e&&(e instanceof wC.Observable||xh.isFunction(e.lift)&&xh.isFunction(e.subscribe))}As.isObservable=TC;var Rs={},Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.EmptyError=void 0;var SC=gt;Ot.EmptyError=SC.createErrorClass(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});Object.defineProperty(Rs,"__esModule",{value:!0});Rs.lastValueFrom=void 0;var PC=Ot;function CC(e,r){var t=typeof r=="object";return new Promise(function(n,o){var i=!1,a;e.subscribe({next:function(s){a=s,i=!0},error:o,complete:function(){i?n(a):t?n(r.defaultValue):o(new PC.EmptyError)}})})}Rs.lastValueFrom=CC;var js={};Object.defineProperty(js,"__esModule",{value:!0});js.firstValueFrom=void 0;var IC=Ot,AC=jn;function RC(e,r){var t=typeof r=="object";return new Promise(function(n,o){var i=new AC.SafeSubscriber({next:function(a){n(a),i.unsubscribe()},error:o,complete:function(){t?n(r.defaultValue):o(new IC.EmptyError)}});e.subscribe(i)})}js.firstValueFrom=RC;var pi={};Object.defineProperty(pi,"__esModule",{value:!0});pi.ArgumentOutOfRangeError=void 0;var jC=gt;pi.ArgumentOutOfRangeError=jC.createErrorClass(function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}});var mi={};Object.defineProperty(mi,"__esModule",{value:!0});mi.NotFoundError=void 0;var $C=gt;mi.NotFoundError=$C.createErrorClass(function(e){return function(t){e(this),this.name="NotFoundError",this.message=t}});var yi={};Object.defineProperty(yi,"__esModule",{value:!0});yi.SequenceError=void 0;var MC=gt;yi.SequenceError=MC.createErrorClass(function(e){return function(t){e(this),this.name="SequenceError",this.message=t}});var Ho={},Un={};Object.defineProperty(Un,"__esModule",{value:!0});Un.isValidDate=void 0;function kC(e){return e instanceof Date&&!isNaN(e)}Un.isValidDate=kC;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.timeout=e.TimeoutError=void 0;var r=Qe,t=Un,n=k,o=V,i=gt,a=L,s=vt;e.TimeoutError=i.createErrorClass(function(l){return function(_){_===void 0&&(_=null),l(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=_}});function c(l,h){var _=t.isValidDate(l)?{first:l}:typeof l=="number"?{each:l}:l,y=_.first,b=_.each,O=_.with,P=O===void 0?u:O,I=_.scheduler,j=I===void 0?h??r.asyncScheduler:I,S=_.meta,A=S===void 0?null:S;if(y==null&&b==null)throw new TypeError("No timeout provided.");return n.operate(function(T,F){var z,x,re=null,le=0,be=function(ne){x=s.executeSchedule(F,j,function(){try{z.unsubscribe(),o.innerFrom(P({meta:A,lastValue:re,seen:le})).subscribe(F)}catch(me){F.error(me)}},ne)};z=T.subscribe(a.createOperatorSubscriber(F,function(ne){x==null||x.unsubscribe(),le++,F.next(re=ne),b>0&&be(b)},void 0,void 0,function(){x!=null&&x.closed||x==null||x.unsubscribe(),re=null})),!le&&be(y!=null?typeof y=="number"?y:+y-j.now():b)})}e.timeout=c;function u(l){throw new e.TimeoutError(l)}})(Ho);var $s={},bi={},Et={},_t={};Object.defineProperty(_t,"__esModule",{value:!0});_t.map=void 0;var NC=k,DC=L;function LC(e,r){return NC.operate(function(t,n){var o=0;t.subscribe(DC.createOperatorSubscriber(n,function(i){n.next(e.call(r,i,o++))}))})}_t.map=LC;var UC=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},FC=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Et,"__esModule",{value:!0});Et.mapOneOrManyArgs=void 0;var BC=_t,xC=Array.isArray;function WC(e,r){return xC(r)?e.apply(void 0,FC([],UC(r))):e(r)}function VC(e){return BC.map(function(r){return WC(e,r)})}Et.mapOneOrManyArgs=VC;var qC=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Wh=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(bi,"__esModule",{value:!0});bi.bindCallbackInternals=void 0;var HC=zr,zC=ce,YC=ur,GC=Et,KC=ar,ZC=kn;function jf(e,r,t,n){if(t)if(HC.isScheduler(t))n=t;else return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return jf(e,r,n).apply(this,o).pipe(GC.mapOneOrManyArgs(t))};return n?function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return jf(e,r).apply(this,o).pipe(YC.subscribeOn(n),KC.observeOn(n))}:function(){for(var o=this,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=new ZC.AsyncSubject,c=!0;return new zC.Observable(function(u){var l=s.subscribe(u);if(c){c=!1;var h=!1,_=!1;r.apply(o,Wh(Wh([],qC(i)),[function(){for(var y=[],b=0;b<arguments.length;b++)y[b]=arguments[b];if(e){var O=y.shift();if(O!=null){s.error(O);return}}s.next(1<y.length?y:y[0]),_=!0,h&&s.complete()}])),_&&s.complete(),h=!0}return l})}}bi.bindCallbackInternals=jf;Object.defineProperty($s,"__esModule",{value:!0});$s.bindCallback=void 0;var QC=bi;function XC(e,r,t){return QC.bindCallbackInternals(!1,e,r,t)}$s.bindCallback=XC;var Ms={};Object.defineProperty(Ms,"__esModule",{value:!0});Ms.bindNodeCallback=void 0;var JC=bi;function eI(e,r,t){return JC.bindCallbackInternals(!0,e,r,t)}Ms.bindNodeCallback=eI;var Kt={},gi={};Object.defineProperty(gi,"__esModule",{value:!0});gi.argsArgArrayOrObject=void 0;var tI=Array.isArray,rI=Object.getPrototypeOf,nI=Object.prototype,oI=Object.keys;function iI(e){if(e.length===1){var r=e[0];if(tI(r))return{args:r,keys:null};if(aI(r)){var t=oI(r);return{args:t.map(function(n){return r[n]}),keys:t}}}return{args:e,keys:null}}gi.argsArgArrayOrObject=iI;function aI(e){return e&&typeof e=="object"&&rI(e)===nI}var Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.createObject=void 0;function uI(e,r){return e.reduce(function(t,n,o){return t[n]=r[o],t},{})}Oi.createObject=uI;Object.defineProperty(Kt,"__esModule",{value:!0});Kt.combineLatestInit=Kt.combineLatest=void 0;var sI=ce,cI=gi,wm=ht,Tm=je,lI=Et,Vh=Se,fI=Oi,dI=L,hI=vt;function vI(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=Vh.popScheduler(e),n=Vh.popResultSelector(e),o=cI.argsArgArrayOrObject(e),i=o.args,a=o.keys;if(i.length===0)return wm.from([],t);var s=new sI.Observable(Sm(i,t,a?function(c){return fI.createObject(a,c)}:Tm.identity));return n?s.pipe(lI.mapOneOrManyArgs(n)):s}Kt.combineLatest=vI;function Sm(e,r,t){return t===void 0&&(t=Tm.identity),function(n){qh(r,function(){for(var o=e.length,i=new Array(o),a=o,s=o,c=function(l){qh(r,function(){var h=wm.from(e[l],r),_=!1;h.subscribe(dI.createOperatorSubscriber(n,function(y){i[l]=y,_||(_=!0,s--),s||n.next(t(i.slice()))},function(){--a||n.complete()}))},n)},u=0;u<o;u++)c(u)},n)}}Kt.combineLatestInit=Sm;function qh(e,r,t){e?hI.executeSchedule(t,e,r):r()}var Yr={},Gr={},sr={},ot={},Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.mergeInternals=void 0;var _I=V,pI=vt,Hh=L;function mI(e,r,t,n,o,i,a,s){var c=[],u=0,l=0,h=!1,_=function(){h&&!c.length&&!u&&r.complete()},y=function(O){return u<n?b(O):c.push(O)},b=function(O){i&&r.next(O),u++;var P=!1;_I.innerFrom(t(O,l++)).subscribe(Hh.createOperatorSubscriber(r,function(I){o==null||o(I),i?y(I):r.next(I)},function(){P=!0},void 0,function(){if(P)try{u--;for(var I=function(){var j=c.shift();a?pI.executeSchedule(r,a,function(){return b(j)}):b(j)};c.length&&u<n;)I();_()}catch(j){r.error(j)}}))};return e.subscribe(Hh.createOperatorSubscriber(r,y,function(){h=!0,_()})),function(){s==null||s()}}Fn.mergeInternals=mI;Object.defineProperty(ot,"__esModule",{value:!0});ot.mergeMap=void 0;var yI=_t,bI=V,gI=k,OI=Fn,EI=se;function Pm(e,r,t){return t===void 0&&(t=1/0),EI.isFunction(r)?Pm(function(n,o){return yI.map(function(i,a){return r(n,i,o,a)})(bI.innerFrom(e(n,o)))},t):(typeof r=="number"&&(t=r),gI.operate(function(n,o){return OI.mergeInternals(n,o,e,t)}))}ot.mergeMap=Pm;Object.defineProperty(sr,"__esModule",{value:!0});sr.mergeAll=void 0;var wI=ot,TI=je;function SI(e){return e===void 0&&(e=1/0),wI.mergeMap(TI.identity,e)}sr.mergeAll=SI;Object.defineProperty(Gr,"__esModule",{value:!0});Gr.concatAll=void 0;var PI=sr;function CI(){return PI.mergeAll(1)}Gr.concatAll=CI;Object.defineProperty(Yr,"__esModule",{value:!0});Yr.concat=void 0;var II=Gr,AI=Se,RI=ht;function jI(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return II.concatAll()(RI.from(e,AI.popScheduler(e)))}Yr.concat=jI;var ks={},Kr={};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.defer=void 0;var $I=ce,MI=V;function kI(e){return new $I.Observable(function(r){MI.innerFrom(e()).subscribe(r)})}Kr.defer=kI;Object.defineProperty(ks,"__esModule",{value:!0});ks.connectable=void 0;var NI=we,DI=ce,LI=Kr,UI={connector:function(){return new NI.Subject},resetOnDisconnect:!0};function FI(e,r){r===void 0&&(r=UI);var t=null,n=r.connector,o=r.resetOnDisconnect,i=o===void 0?!0:o,a=n(),s=new DI.Observable(function(c){return a.subscribe(c)});return s.connect=function(){return(!t||t.closed)&&(t=LI.defer(function(){return e}).subscribe(a),i&&t.add(function(){return a=n()})),t},s}ks.connectable=FI;var Ns={};Object.defineProperty(Ns,"__esModule",{value:!0});Ns.forkJoin=void 0;var BI=ce,xI=gi,WI=V,VI=Se,qI=L,HI=Et,zI=Oi;function YI(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=VI.popResultSelector(e),n=xI.argsArgArrayOrObject(e),o=n.args,i=n.keys,a=new BI.Observable(function(s){var c=o.length;if(!c){s.complete();return}for(var u=new Array(c),l=c,h=c,_=function(b){var O=!1;WI.innerFrom(o[b]).subscribe(qI.createOperatorSubscriber(s,function(P){O||(O=!0,h--),u[b]=P},function(){return l--},void 0,function(){(!l||!O)&&(h||s.next(i?zI.createObject(i,u):u),s.complete())}))},y=0;y<c;y++)_(y)});return t?a.pipe(HI.mapOneOrManyArgs(t)):a}Ns.forkJoin=YI;var Ds={},GI=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(Ds,"__esModule",{value:!0});Ds.fromEvent=void 0;var KI=V,ZI=ce,QI=ot,XI=Dn,Lr=se,JI=Et,eA=["addListener","removeListener"],tA=["addEventListener","removeEventListener"],rA=["on","off"];function $f(e,r,t,n){if(Lr.isFunction(t)&&(n=t,t=void 0),n)return $f(e,r,t).pipe(JI.mapOneOrManyArgs(n));var o=GI(iA(e)?tA.map(function(s){return function(c){return e[s](r,c,t)}}):nA(e)?eA.map(zh(e,r)):oA(e)?rA.map(zh(e,r)):[],2),i=o[0],a=o[1];if(!i&&XI.isArrayLike(e))return QI.mergeMap(function(s){return $f(s,r,t)})(KI.innerFrom(e));if(!i)throw new TypeError("Invalid event target");return new ZI.Observable(function(s){var c=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return s.next(1<u.length?u:u[0])};return i(c),function(){return a(c)}})}Ds.fromEvent=$f;function zh(e,r){return function(t){return function(n){return e[t](r,n)}}}function nA(e){return Lr.isFunction(e.addListener)&&Lr.isFunction(e.removeListener)}function oA(e){return Lr.isFunction(e.on)&&Lr.isFunction(e.off)}function iA(e){return Lr.isFunction(e.addEventListener)&&Lr.isFunction(e.removeEventListener)}var Ls={};Object.defineProperty(Ls,"__esModule",{value:!0});Ls.fromEventPattern=void 0;var aA=ce,uA=se,sA=Et;function Cm(e,r,t){return t?Cm(e,r).pipe(sA.mapOneOrManyArgs(t)):new aA.Observable(function(n){var o=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return n.next(a.length===1?a[0]:a)},i=e(o);return uA.isFunction(r)?function(){return r(o,i)}:void 0})}Ls.fromEventPattern=Cm;var Us={},cA=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Us,"__esModule",{value:!0});Us.generate=void 0;var Yh=je,lA=zr,fA=Kr,dA=hi;function hA(e,r,t,n,o){var i,a,s,c;arguments.length===1?(i=e,c=i.initialState,r=i.condition,t=i.iterate,a=i.resultSelector,s=a===void 0?Yh.identity:a,o=i.scheduler):(c=e,!n||lA.isScheduler(n)?(s=Yh.identity,o=n):s=n);function u(){var l;return cA(this,function(h){switch(h.label){case 0:l=c,h.label=1;case 1:return!r||r(l)?[4,s(l)]:[3,4];case 2:h.sent(),h.label=3;case 3:return l=t(l),[3,1];case 4:return[2]}})}return fA.defer(o?function(){return dA.scheduleIterable(u(),o)}:u)}Us.generate=hA;var Fs={};Object.defineProperty(Fs,"__esModule",{value:!0});Fs.iif=void 0;var vA=Kr;function _A(e,r,t){return vA.defer(function(){return e()?r:t})}Fs.iif=_A;var Ei={},wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.timer=void 0;var pA=ce,mA=Qe,yA=zr,bA=Un;function gA(e,r,t){e===void 0&&(e=0),t===void 0&&(t=mA.async);var n=-1;return r!=null&&(yA.isScheduler(r)?t=r:n=r),new pA.Observable(function(o){var i=bA.isValidDate(e)?+e-t.now():e;i<0&&(i=0);var a=0;return t.schedule(function(){o.closed||(o.next(a++),0<=n?this.schedule(void 0,n):o.complete())},i)})}wt.timer=gA;Object.defineProperty(Ei,"__esModule",{value:!0});Ei.interval=void 0;var OA=Qe,EA=wt;function wA(e,r){return e===void 0&&(e=0),r===void 0&&(r=OA.asyncScheduler),e<0&&(e=0),EA.timer(e,e,r)}Ei.interval=wA;var Bs={};Object.defineProperty(Bs,"__esModule",{value:!0});Bs.merge=void 0;var TA=sr,SA=V,PA=ft,Gh=Se,CA=ht;function IA(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=Gh.popScheduler(e),n=Gh.popNumber(e,1/0),o=e;return o.length?o.length===1?SA.innerFrom(o[0]):TA.mergeAll(n)(CA.from(o,t)):PA.EMPTY}Bs.merge=IA;var Mf={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.never=e.NEVER=void 0;var r=ce,t=Re;e.NEVER=new r.Observable(t.noop);function n(){return e.NEVER}e.never=n})(Mf);var wi={},Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.argsOrArgArray=void 0;var AA=Array.isArray;function RA(e){return e.length===1&&AA(e[0])?e[0]:e}Tt.argsOrArgArray=RA;Object.defineProperty(wi,"__esModule",{value:!0});wi.onErrorResumeNext=void 0;var jA=ce,$A=Tt,MA=L,Kh=Re,kA=V;function NA(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=$A.argsOrArgArray(e);return new jA.Observable(function(n){var o=0,i=function(){if(o<t.length){var a=void 0;try{a=kA.innerFrom(t[o++])}catch{i();return}var s=new MA.OperatorSubscriber(n,void 0,Kh.noop,Kh.noop);a.subscribe(s),s.add(i)}else n.complete()};i()})}wi.onErrorResumeNext=NA;var xs={};Object.defineProperty(xs,"__esModule",{value:!0});xs.pairs=void 0;var DA=ht;function LA(e,r){return DA.from(Object.entries(e),r)}xs.pairs=LA;var Ws={},Ti={};Object.defineProperty(Ti,"__esModule",{value:!0});Ti.not=void 0;function UA(e,r){return function(t,n){return!e.call(r,t,n)}}Ti.not=UA;var pt={};Object.defineProperty(pt,"__esModule",{value:!0});pt.filter=void 0;var FA=k,BA=L;function xA(e,r){return FA.operate(function(t,n){var o=0;t.subscribe(BA.createOperatorSubscriber(n,function(i){return e.call(r,i,o++)&&n.next(i)}))})}pt.filter=xA;Object.defineProperty(Ws,"__esModule",{value:!0});Ws.partition=void 0;var WA=Ti,Zh=pt,Qh=V;function VA(e,r,t){return[Zh.filter(r,t)(Qh.innerFrom(e)),Zh.filter(WA.not(r,t))(Qh.innerFrom(e))]}Ws.partition=VA;var Ur={};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.raceInit=Ur.race=void 0;var qA=ce,Im=V,HA=Tt,zA=L;function YA(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e=HA.argsOrArgArray(e),e.length===1?Im.innerFrom(e[0]):new qA.Observable(Am(e))}Ur.race=YA;function Am(e){return function(r){for(var t=[],n=function(i){t.push(Im.innerFrom(e[i]).subscribe(zA.createOperatorSubscriber(r,function(a){if(t){for(var s=0;s<t.length;s++)s!==i&&t[s].unsubscribe();t=null}r.next(a)})))},o=0;t&&!r.closed&&o<e.length;o++)n(o)}}Ur.raceInit=Am;var Vs={};Object.defineProperty(Vs,"__esModule",{value:!0});Vs.range=void 0;var GA=ce,KA=ft;function ZA(e,r,t){if(r==null&&(r=e,e=0),r<=0)return KA.EMPTY;var n=r+e;return new GA.Observable(t?function(o){var i=e;return t.schedule(function(){i<n?(o.next(i++),this.schedule()):o.complete()})}:function(o){for(var i=e;i<n&&!o.closed;)o.next(i++);o.complete()})}Vs.range=ZA;var qs={};Object.defineProperty(qs,"__esModule",{value:!0});qs.using=void 0;var QA=ce,XA=V,JA=ft;function eR(e,r){return new QA.Observable(function(t){var n=e(),o=r(n),i=o?XA.innerFrom(o):JA.EMPTY;return i.subscribe(t),function(){n&&n.unsubscribe()}})}qs.using=eR;var Bn={},tR=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},rR=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.zip=void 0;var nR=ce,oR=V,iR=Tt,aR=ft,uR=L,sR=Se;function cR(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=sR.popResultSelector(e),n=iR.argsOrArgArray(e);return n.length?new nR.Observable(function(o){var i=n.map(function(){return[]}),a=n.map(function(){return!1});o.add(function(){i=a=null});for(var s=function(u){oR.innerFrom(n[u]).subscribe(uR.createOperatorSubscriber(o,function(l){if(i[u].push(l),i.every(function(_){return _.length})){var h=i.map(function(_){return _.shift()});o.next(t?t.apply(void 0,rR([],tR(h))):h),i.some(function(_,y){return!_.length&&a[y]})&&o.complete()}},function(){a[u]=!0,!i[u].length&&o.complete()}))},c=0;!o.closed&&c<n.length;c++)s(c);return function(){i=a=null}}):aR.EMPTY}Bn.zip=cR;var Rm={};Object.defineProperty(Rm,"__esModule",{value:!0});var xn={};Object.defineProperty(xn,"__esModule",{value:!0});xn.audit=void 0;var lR=k,fR=V,Xh=L;function dR(e){return lR.operate(function(r,t){var n=!1,o=null,i=null,a=!1,s=function(){if(i==null||i.unsubscribe(),i=null,n){n=!1;var u=o;o=null,t.next(u)}a&&t.complete()},c=function(){i=null,a&&t.complete()};r.subscribe(Xh.createOperatorSubscriber(t,function(u){n=!0,o=u,i||fR.innerFrom(e(u)).subscribe(i=Xh.createOperatorSubscriber(t,s,c))},function(){a=!0,(!n||!i||i.closed)&&t.complete()}))})}xn.audit=dR;var Si={};Object.defineProperty(Si,"__esModule",{value:!0});Si.auditTime=void 0;var hR=Qe,vR=xn,_R=wt;function pR(e,r){return r===void 0&&(r=hR.asyncScheduler),vR.audit(function(){return _R.timer(e,r)})}Si.auditTime=pR;var Pi={};Object.defineProperty(Pi,"__esModule",{value:!0});Pi.buffer=void 0;var mR=k,yR=Re,Jh=L,bR=V;function gR(e){return mR.operate(function(r,t){var n=[];return r.subscribe(Jh.createOperatorSubscriber(t,function(o){return n.push(o)},function(){t.next(n),t.complete()})),bR.innerFrom(e).subscribe(Jh.createOperatorSubscriber(t,function(){var o=n;n=[],t.next(o)},yR.noop)),function(){n=null}})}Pi.buffer=gR;var Ci={},zl=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.bufferCount=void 0;var OR=k,ER=L,wR=dt;function TR(e,r){return r===void 0&&(r=null),r=r??e,OR.operate(function(t,n){var o=[],i=0;t.subscribe(ER.createOperatorSubscriber(n,function(a){var s,c,u,l,h=null;i++%r===0&&o.push([]);try{for(var _=zl(o),y=_.next();!y.done;y=_.next()){var b=y.value;b.push(a),e<=b.length&&(h=h??[],h.push(b))}}catch(I){s={error:I}}finally{try{y&&!y.done&&(c=_.return)&&c.call(_)}finally{if(s)throw s.error}}if(h)try{for(var O=zl(h),P=O.next();!P.done;P=O.next()){var b=P.value;wR.arrRemove(o,b),n.next(b)}}catch(I){u={error:I}}finally{try{P&&!P.done&&(l=O.return)&&l.call(O)}finally{if(u)throw u.error}}},function(){var a,s;try{for(var c=zl(o),u=c.next();!u.done;u=c.next()){var l=u.value;n.next(l)}}catch(h){a={error:h}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}n.complete()},void 0,function(){o=null}))})}Ci.bufferCount=TR;var Ii={},SR=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.bufferTime=void 0;var PR=Ae,CR=k,IR=L,AR=dt,RR=Qe,jR=Se,ev=vt;function $R(e){for(var r,t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=(r=jR.popScheduler(n))!==null&&r!==void 0?r:RR.asyncScheduler,a=(t=n[0])!==null&&t!==void 0?t:null,s=n[1]||1/0;return CR.operate(function(c,u){var l=[],h=!1,_=function(O){var P=O.buffer,I=O.subs;I.unsubscribe(),AR.arrRemove(l,O),u.next(P),h&&y()},y=function(){if(l){var O=new PR.Subscription;u.add(O);var P=[],I={buffer:P,subs:O};l.push(I),ev.executeSchedule(O,i,function(){return _(I)},e)}};a!==null&&a>=0?ev.executeSchedule(u,i,y,a,!0):h=!0,y();var b=IR.createOperatorSubscriber(u,function(O){var P,I,j=l.slice();try{for(var S=SR(j),A=S.next();!A.done;A=S.next()){var T=A.value,F=T.buffer;F.push(O),s<=F.length&&_(T)}}catch(z){P={error:z}}finally{try{A&&!A.done&&(I=S.return)&&I.call(S)}finally{if(P)throw P.error}}},function(){for(;l!=null&&l.length;)u.next(l.shift().buffer);b==null||b.unsubscribe(),u.complete(),u.unsubscribe()},void 0,function(){return l=null});c.subscribe(b)})}Ii.bufferTime=$R;var Ai={},MR=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Ai,"__esModule",{value:!0});Ai.bufferToggle=void 0;var kR=Ae,NR=k,tv=V,Yl=L,rv=Re,DR=dt;function LR(e,r){return NR.operate(function(t,n){var o=[];tv.innerFrom(e).subscribe(Yl.createOperatorSubscriber(n,function(i){var a=[];o.push(a);var s=new kR.Subscription,c=function(){DR.arrRemove(o,a),n.next(a),s.unsubscribe()};s.add(tv.innerFrom(r(i)).subscribe(Yl.createOperatorSubscriber(n,c,rv.noop)))},rv.noop)),t.subscribe(Yl.createOperatorSubscriber(n,function(i){var a,s;try{for(var c=MR(o),u=c.next();!u.done;u=c.next()){var l=u.value;l.push(i)}}catch(h){a={error:h}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}},function(){for(;o.length>0;)n.next(o.shift());n.complete()}))})}Ai.bufferToggle=LR;var Ri={};Object.defineProperty(Ri,"__esModule",{value:!0});Ri.bufferWhen=void 0;var UR=k,FR=Re,nv=L,BR=V;function xR(e){return UR.operate(function(r,t){var n=null,o=null,i=function(){o==null||o.unsubscribe();var a=n;n=[],a&&t.next(a),BR.innerFrom(e()).subscribe(o=nv.createOperatorSubscriber(t,i,FR.noop))};i(),r.subscribe(nv.createOperatorSubscriber(t,function(a){return n==null?void 0:n.push(a)},function(){n&&t.next(n),t.complete()},void 0,function(){return n=o=null}))})}Ri.bufferWhen=xR;var ji={};Object.defineProperty(ji,"__esModule",{value:!0});ji.catchError=void 0;var WR=V,VR=L,qR=k;function jm(e){return qR.operate(function(r,t){var n=null,o=!1,i;n=r.subscribe(VR.createOperatorSubscriber(t,void 0,void 0,function(a){i=WR.innerFrom(e(a,jm(e)(r))),n?(n.unsubscribe(),n=null,i.subscribe(t)):o=!0})),o&&(n.unsubscribe(),n=null,i.subscribe(t))})}ji.catchError=jm;var $i={},Wn={},Mi={},Vn={},Dt={},ki={};Object.defineProperty(ki,"__esModule",{value:!0});ki.scanInternals=void 0;var HR=L;function zR(e,r,t,n,o){return function(i,a){var s=t,c=r,u=0;i.subscribe(HR.createOperatorSubscriber(a,function(l){var h=u++;c=s?e(c,l,h):(s=!0,l),n&&a.next(c)},o&&function(){s&&a.next(c),a.complete()}))}}ki.scanInternals=zR;Object.defineProperty(Dt,"__esModule",{value:!0});Dt.reduce=void 0;var YR=ki,GR=k;function KR(e,r){return GR.operate(YR.scanInternals(e,r,arguments.length>=2,!1,!0))}Dt.reduce=KR;Object.defineProperty(Vn,"__esModule",{value:!0});Vn.toArray=void 0;var ZR=Dt,QR=k,XR=function(e,r){return e.push(r),e};function JR(){return QR.operate(function(e,r){ZR.reduce(XR,[])(e).subscribe(r)})}Vn.toArray=JR;Object.defineProperty(Mi,"__esModule",{value:!0});Mi.joinAllInternals=void 0;var ej=je,tj=Et,rj=kt,nj=ot,oj=Vn;function ij(e,r){return rj.pipe(oj.toArray(),nj.mergeMap(function(t){return e(t)}),r?tj.mapOneOrManyArgs(r):ej.identity)}Mi.joinAllInternals=ij;Object.defineProperty(Wn,"__esModule",{value:!0});Wn.combineLatestAll=void 0;var aj=Kt,uj=Mi;function sj(e){return uj.joinAllInternals(aj.combineLatest,e)}Wn.combineLatestAll=sj;Object.defineProperty($i,"__esModule",{value:!0});$i.combineAll=void 0;var cj=Wn;$i.combineAll=cj.combineLatestAll;var Ni={},Di={},ov=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},iv=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Di,"__esModule",{value:!0});Di.combineLatest=void 0;var lj=Kt,fj=k,dj=Tt,hj=Et,vj=kt,_j=Se;function $m(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=_j.popResultSelector(e);return t?vj.pipe($m.apply(void 0,iv([],ov(e))),hj.mapOneOrManyArgs(t)):fj.operate(function(n,o){lj.combineLatestInit(iv([n],ov(dj.argsOrArgArray(e))))(o)})}Di.combineLatest=$m;var pj=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},mj=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ni,"__esModule",{value:!0});Ni.combineLatestWith=void 0;var yj=Di;function bj(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return yj.combineLatest.apply(void 0,mj([],pj(e)))}Ni.combineLatestWith=bj;var qn={};Object.defineProperty(qn,"__esModule",{value:!0});qn.concatMap=void 0;var av=ot,gj=se;function Oj(e,r){return gj.isFunction(r)?av.mergeMap(e,r,1):av.mergeMap(e,1)}qn.concatMap=Oj;var Li={};Object.defineProperty(Li,"__esModule",{value:!0});Li.concatMapTo=void 0;var uv=qn,Ej=se;function wj(e,r){return Ej.isFunction(r)?uv.concatMap(function(){return e},r):uv.concatMap(function(){return e})}Li.concatMapTo=wj;var Ui={},Fi={},Tj=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Sj=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Fi,"__esModule",{value:!0});Fi.concat=void 0;var Pj=k,Cj=Gr,Ij=Se,Aj=ht;function Rj(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=Ij.popScheduler(e);return Pj.operate(function(n,o){Cj.concatAll()(Aj.from(Sj([n],Tj(e)),t)).subscribe(o)})}Fi.concat=Rj;var jj=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},$j=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ui,"__esModule",{value:!0});Ui.concatWith=void 0;var Mj=Fi;function kj(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Mj.concat.apply(void 0,$j([],jj(e)))}Ui.concatWith=kj;var Zr={},Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});Hs.fromSubscribable=void 0;var Nj=ce;function Dj(e){return new Nj.Observable(function(r){return e.subscribe(r)})}Hs.fromSubscribable=Dj;Object.defineProperty(Zr,"__esModule",{value:!0});Zr.connect=void 0;var Lj=we,Uj=V,Fj=k,Bj=Hs,xj={connector:function(){return new Lj.Subject}};function Wj(e,r){r===void 0&&(r=xj);var t=r.connector;return Fj.operate(function(n,o){var i=t();Uj.innerFrom(e(Bj.fromSubscribable(i))).subscribe(o),o.add(n.subscribe(i))})}Zr.connect=Wj;var Bi={};Object.defineProperty(Bi,"__esModule",{value:!0});Bi.count=void 0;var Vj=Dt;function qj(e){return Vj.reduce(function(r,t,n){return!e||e(t,n)?r+1:r},0)}Bi.count=qj;var xi={};Object.defineProperty(xi,"__esModule",{value:!0});xi.debounce=void 0;var Hj=k,zj=Re,sv=L,Yj=V;function Gj(e){return Hj.operate(function(r,t){var n=!1,o=null,i=null,a=function(){if(i==null||i.unsubscribe(),i=null,n){n=!1;var s=o;o=null,t.next(s)}};r.subscribe(sv.createOperatorSubscriber(t,function(s){i==null||i.unsubscribe(),n=!0,o=s,i=sv.createOperatorSubscriber(t,a,zj.noop),Yj.innerFrom(e(s)).subscribe(i)},function(){a(),t.complete()},void 0,function(){o=i=null}))})}xi.debounce=Gj;var Wi={};Object.defineProperty(Wi,"__esModule",{value:!0});Wi.debounceTime=void 0;var Kj=Qe,Zj=k,Qj=L;function Xj(e,r){return r===void 0&&(r=Kj.asyncScheduler),Zj.operate(function(t,n){var o=null,i=null,a=null,s=function(){if(o){o.unsubscribe(),o=null;var u=i;i=null,n.next(u)}};function c(){var u=a+e,l=r.now();if(l<u){o=this.schedule(void 0,u-l),n.add(o);return}s()}t.subscribe(Qj.createOperatorSubscriber(n,function(u){i=u,a=r.now(),o||(o=r.schedule(c,e),n.add(o))},function(){s(),n.complete()},void 0,function(){i=o=null}))})}Wi.debounceTime=Xj;var cr={};Object.defineProperty(cr,"__esModule",{value:!0});cr.defaultIfEmpty=void 0;var Jj=k,e$=L;function t$(e){return Jj.operate(function(r,t){var n=!1;r.subscribe(e$.createOperatorSubscriber(t,function(o){n=!0,t.next(o)},function(){n||t.next(e),t.complete()}))})}cr.defaultIfEmpty=t$;var Vi={},Hn={},lr={};Object.defineProperty(lr,"__esModule",{value:!0});lr.take=void 0;var r$=ft,n$=k,o$=L;function i$(e){return e<=0?function(){return r$.EMPTY}:n$.operate(function(r,t){var n=0;r.subscribe(o$.createOperatorSubscriber(t,function(o){++n<=e&&(t.next(o),e<=n&&t.complete())}))})}lr.take=i$;var zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.ignoreElements=void 0;var a$=k,u$=L,s$=Re;function c$(){return a$.operate(function(e,r){e.subscribe(u$.createOperatorSubscriber(r,s$.noop))})}zn.ignoreElements=c$;var Yn={};Object.defineProperty(Yn,"__esModule",{value:!0});Yn.mapTo=void 0;var l$=_t;function f$(e){return l$.map(function(){return e})}Yn.mapTo=f$;Object.defineProperty(Hn,"__esModule",{value:!0});Hn.delayWhen=void 0;var d$=Yr,cv=lr,h$=zn,v$=Yn,_$=ot,p$=V;function Mm(e,r){return r?function(t){return d$.concat(r.pipe(cv.take(1),h$.ignoreElements()),t.pipe(Mm(e)))}:_$.mergeMap(function(t,n){return p$.innerFrom(e(t,n)).pipe(cv.take(1),v$.mapTo(t))})}Hn.delayWhen=Mm;Object.defineProperty(Vi,"__esModule",{value:!0});Vi.delay=void 0;var m$=Qe,y$=Hn,b$=wt;function g$(e,r){r===void 0&&(r=m$.asyncScheduler);var t=b$.timer(e,r);return y$.delayWhen(function(){return t})}Vi.delay=g$;var qi={};Object.defineProperty(qi,"__esModule",{value:!0});qi.dematerialize=void 0;var O$=Ts,E$=k,w$=L;function T$(){return E$.operate(function(e,r){e.subscribe(w$.createOperatorSubscriber(r,function(t){return O$.observeNotification(t,r)}))})}qi.dematerialize=T$;var Hi={};Object.defineProperty(Hi,"__esModule",{value:!0});Hi.distinct=void 0;var S$=k,lv=L,P$=Re,C$=V;function I$(e,r){return S$.operate(function(t,n){var o=new Set;t.subscribe(lv.createOperatorSubscriber(n,function(i){var a=e?e(i):i;o.has(a)||(o.add(a),n.next(i))})),r&&C$.innerFrom(r).subscribe(lv.createOperatorSubscriber(n,function(){return o.clear()},P$.noop))})}Hi.distinct=I$;var Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.distinctUntilChanged=void 0;var A$=je,R$=k,j$=L;function $$(e,r){return r===void 0&&(r=A$.identity),e=e??M$,R$.operate(function(t,n){var o,i=!0;t.subscribe(j$.createOperatorSubscriber(n,function(a){var s=r(a);(i||!e(o,s))&&(i=!1,o=s,n.next(a))}))})}Gn.distinctUntilChanged=$$;function M$(e,r){return e===r}var zi={};Object.defineProperty(zi,"__esModule",{value:!0});zi.distinctUntilKeyChanged=void 0;var k$=Gn;function N$(e,r){return k$.distinctUntilChanged(function(t,n){return r?r(t[e],n[e]):t[e]===n[e]})}zi.distinctUntilKeyChanged=N$;var Yi={},fr={};Object.defineProperty(fr,"__esModule",{value:!0});fr.throwIfEmpty=void 0;var D$=Ot,L$=k,U$=L;function F$(e){return e===void 0&&(e=B$),L$.operate(function(r,t){var n=!1;r.subscribe(U$.createOperatorSubscriber(t,function(o){n=!0,t.next(o)},function(){return n?t.complete():t.error(e())}))})}fr.throwIfEmpty=F$;function B$(){return new D$.EmptyError}Object.defineProperty(Yi,"__esModule",{value:!0});Yi.elementAt=void 0;var fv=pi,x$=pt,W$=fr,V$=cr,q$=lr;function H$(e,r){if(e<0)throw new fv.ArgumentOutOfRangeError;var t=arguments.length>=2;return function(n){return n.pipe(x$.filter(function(o,i){return i===e}),q$.take(1),t?V$.defaultIfEmpty(r):W$.throwIfEmpty(function(){return new fv.ArgumentOutOfRangeError}))}}Yi.elementAt=H$;var Gi={},z$=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Y$=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Gi,"__esModule",{value:!0});Gi.endWith=void 0;var G$=Yr,K$=Nn;function Z$(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(t){return G$.concat(t,K$.of.apply(void 0,Y$([],z$(e))))}}Gi.endWith=Z$;var Ki={};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.every=void 0;var Q$=k,X$=L;function J$(e,r){return Q$.operate(function(t,n){var o=0;t.subscribe(X$.createOperatorSubscriber(n,function(i){e.call(r,i,o++,t)||(n.next(!1),n.complete())},function(){n.next(!0),n.complete()}))})}Ki.every=J$;var Zi={},Kn={},Zn={};Object.defineProperty(Zn,"__esModule",{value:!0});Zn.exhaustMap=void 0;var eM=_t,dv=V,tM=k,hv=L;function km(e,r){return r?function(t){return t.pipe(km(function(n,o){return dv.innerFrom(e(n,o)).pipe(eM.map(function(i,a){return r(n,i,o,a)}))}))}:tM.operate(function(t,n){var o=0,i=null,a=!1;t.subscribe(hv.createOperatorSubscriber(n,function(s){i||(i=hv.createOperatorSubscriber(n,void 0,function(){i=null,a&&n.complete()}),dv.innerFrom(e(s,o++)).subscribe(i))},function(){a=!0,!i&&n.complete()}))})}Zn.exhaustMap=km;Object.defineProperty(Kn,"__esModule",{value:!0});Kn.exhaustAll=void 0;var rM=Zn,nM=je;function oM(){return rM.exhaustMap(nM.identity)}Kn.exhaustAll=oM;Object.defineProperty(Zi,"__esModule",{value:!0});Zi.exhaust=void 0;var iM=Kn;Zi.exhaust=iM.exhaustAll;var Qi={};Object.defineProperty(Qi,"__esModule",{value:!0});Qi.expand=void 0;var aM=k,uM=Fn;function sM(e,r,t){return r===void 0&&(r=1/0),r=(r||0)<1?1/0:r,aM.operate(function(n,o){return uM.mergeInternals(n,o,e,r,void 0,!0,t)})}Qi.expand=sM;var Xi={};Object.defineProperty(Xi,"__esModule",{value:!0});Xi.finalize=void 0;var cM=k;function lM(e){return cM.operate(function(r,t){try{r.subscribe(t)}finally{t.add(e)}})}Xi.finalize=lM;var Zt={};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.createFind=Zt.find=void 0;var fM=k,dM=L;function hM(e,r){return fM.operate(Nm(e,r,"value"))}Zt.find=hM;function Nm(e,r,t){var n=t==="index";return function(o,i){var a=0;o.subscribe(dM.createOperatorSubscriber(i,function(s){var c=a++;e.call(r,s,c,o)&&(i.next(n?c:s),i.complete())},function(){i.next(n?-1:void 0),i.complete()}))}}Zt.createFind=Nm;var Ji={};Object.defineProperty(Ji,"__esModule",{value:!0});Ji.findIndex=void 0;var vM=k,_M=Zt;function pM(e,r){return vM.operate(_M.createFind(e,r,"index"))}Ji.findIndex=pM;var ea={};Object.defineProperty(ea,"__esModule",{value:!0});ea.first=void 0;var mM=Ot,yM=pt,bM=lr,gM=cr,OM=fr,EM=je;function wM(e,r){var t=arguments.length>=2;return function(n){return n.pipe(e?yM.filter(function(o,i){return e(o,i,n)}):EM.identity,bM.take(1),t?gM.defaultIfEmpty(r):OM.throwIfEmpty(function(){return new mM.EmptyError}))}}ea.first=wM;var ta={};Object.defineProperty(ta,"__esModule",{value:!0});ta.groupBy=void 0;var TM=ce,SM=V,PM=we,CM=k,vv=L;function IM(e,r,t,n){return CM.operate(function(o,i){var a;!r||typeof r=="function"?a=r:(t=r.duration,a=r.element,n=r.connector);var s=new Map,c=function(b){s.forEach(b),b(i)},u=function(b){return c(function(O){return O.error(b)})},l=0,h=!1,_=new vv.OperatorSubscriber(i,function(b){try{var O=e(b),P=s.get(O);if(!P){s.set(O,P=n?n():new PM.Subject);var I=y(O,P);if(i.next(I),t){var j=vv.createOperatorSubscriber(P,function(){P.complete(),j==null||j.unsubscribe()},void 0,void 0,function(){return s.delete(O)});_.add(SM.innerFrom(t(I)).subscribe(j))}}P.next(a?a(b):b)}catch(S){u(S)}},function(){return c(function(b){return b.complete()})},u,function(){return s.clear()},function(){return h=!0,l===0});o.subscribe(_);function y(b,O){var P=new TM.Observable(function(I){l++;var j=O.subscribe(I);return function(){j.unsubscribe(),--l===0&&h&&_.unsubscribe()}});return P.key=b,P}})}ta.groupBy=IM;var ra={};Object.defineProperty(ra,"__esModule",{value:!0});ra.isEmpty=void 0;var AM=k,RM=L;function jM(){return AM.operate(function(e,r){e.subscribe(RM.createOperatorSubscriber(r,function(){r.next(!1),r.complete()},function(){r.next(!0),r.complete()}))})}ra.isEmpty=jM;var na={},Qn={},$M=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Qn,"__esModule",{value:!0});Qn.takeLast=void 0;var MM=ft,kM=k,NM=L;function DM(e){return e<=0?function(){return MM.EMPTY}:kM.operate(function(r,t){var n=[];r.subscribe(NM.createOperatorSubscriber(t,function(o){n.push(o),e<n.length&&n.shift()},function(){var o,i;try{for(var a=$M(n),s=a.next();!s.done;s=a.next()){var c=s.value;t.next(c)}}catch(u){o={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}t.complete()},void 0,function(){n=null}))})}Qn.takeLast=DM;Object.defineProperty(na,"__esModule",{value:!0});na.last=void 0;var LM=Ot,UM=pt,FM=Qn,BM=fr,xM=cr,WM=je;function VM(e,r){var t=arguments.length>=2;return function(n){return n.pipe(e?UM.filter(function(o,i){return e(o,i,n)}):WM.identity,FM.takeLast(1),t?xM.defaultIfEmpty(r):BM.throwIfEmpty(function(){return new LM.EmptyError}))}}na.last=VM;var oa={};Object.defineProperty(oa,"__esModule",{value:!0});oa.materialize=void 0;var Gl=Ts,qM=k,HM=L;function zM(){return qM.operate(function(e,r){e.subscribe(HM.createOperatorSubscriber(r,function(t){r.next(Gl.Notification.createNext(t))},function(){r.next(Gl.Notification.createComplete()),r.complete()},function(t){r.next(Gl.Notification.createError(t)),r.complete()}))})}oa.materialize=zM;var ia={};Object.defineProperty(ia,"__esModule",{value:!0});ia.max=void 0;var YM=Dt,GM=se;function KM(e){return YM.reduce(GM.isFunction(e)?function(r,t){return e(r,t)>0?r:t}:function(r,t){return r>t?r:t})}ia.max=KM;var aa={};Object.defineProperty(aa,"__esModule",{value:!0});aa.flatMap=void 0;var ZM=ot;aa.flatMap=ZM.mergeMap;var ua={};Object.defineProperty(ua,"__esModule",{value:!0});ua.mergeMapTo=void 0;var _v=ot,QM=se;function XM(e,r,t){return t===void 0&&(t=1/0),QM.isFunction(r)?_v.mergeMap(function(){return e},r,t):(typeof r=="number"&&(t=r),_v.mergeMap(function(){return e},t))}ua.mergeMapTo=XM;var sa={};Object.defineProperty(sa,"__esModule",{value:!0});sa.mergeScan=void 0;var JM=k,ek=Fn;function tk(e,r,t){return t===void 0&&(t=1/0),JM.operate(function(n,o){var i=r;return ek.mergeInternals(n,o,function(a,s){return e(i,a,s)},t,function(a){i=a},!1,void 0,function(){return i=null})})}sa.mergeScan=tk;var ca={},la={},rk=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},nk=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(la,"__esModule",{value:!0});la.merge=void 0;var ok=k,ik=Tt,ak=sr,pv=Se,uk=ht;function sk(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=pv.popScheduler(e),n=pv.popNumber(e,1/0);return e=ik.argsOrArgArray(e),ok.operate(function(o,i){ak.mergeAll(n)(uk.from(nk([o],rk(e)),t)).subscribe(i)})}la.merge=sk;var ck=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},lk=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(ca,"__esModule",{value:!0});ca.mergeWith=void 0;var fk=la;function dk(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return fk.merge.apply(void 0,lk([],ck(e)))}ca.mergeWith=dk;var fa={};Object.defineProperty(fa,"__esModule",{value:!0});fa.min=void 0;var hk=Dt,vk=se;function _k(e){return hk.reduce(vk.isFunction(e)?function(r,t){return e(r,t)<0?r:t}:function(r,t){return r<t?r:t})}fa.min=_k;var Qr={};Object.defineProperty(Qr,"__esModule",{value:!0});Qr.multicast=void 0;var pk=Hr,mv=se,mk=Zr;function yk(e,r){var t=mv.isFunction(e)?e:function(){return e};return mv.isFunction(r)?mk.connect(r,{connector:t}):function(n){return new pk.ConnectableObservable(n,t)}}Qr.multicast=yk;var Fr={},bk=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},gk=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Fr,"__esModule",{value:!0});Fr.onErrorResumeNext=Fr.onErrorResumeNextWith=void 0;var Ok=Tt,Ek=wi;function Dm(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=Ok.argsOrArgArray(e);return function(n){return Ek.onErrorResumeNext.apply(void 0,gk([n],bk(t)))}}Fr.onErrorResumeNextWith=Dm;Fr.onErrorResumeNext=Dm;var da={};Object.defineProperty(da,"__esModule",{value:!0});da.pairwise=void 0;var wk=k,Tk=L;function Sk(){return wk.operate(function(e,r){var t,n=!1;e.subscribe(Tk.createOperatorSubscriber(r,function(o){var i=t;t=o,n&&r.next([i,o]),n=!0}))})}da.pairwise=Sk;var ha={};Object.defineProperty(ha,"__esModule",{value:!0});ha.pluck=void 0;var Pk=_t;function Ck(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=e.length;if(t===0)throw new Error("list of properties cannot be empty.");return Pk.map(function(n){for(var o=n,i=0;i<t;i++){var a=o==null?void 0:o[e[i]];if(typeof a<"u")o=a;else return}return o})}ha.pluck=Ck;var va={};Object.defineProperty(va,"__esModule",{value:!0});va.publish=void 0;var Ik=we,Ak=Qr,Rk=Zr;function jk(e){return e?function(r){return Rk.connect(e)(r)}:function(r){return Ak.multicast(new Ik.Subject)(r)}}va.publish=jk;var _a={};Object.defineProperty(_a,"__esModule",{value:!0});_a.publishBehavior=void 0;var $k=ii,Mk=Hr;function kk(e){return function(r){var t=new $k.BehaviorSubject(e);return new Mk.ConnectableObservable(r,function(){return t})}}_a.publishBehavior=kk;var pa={};Object.defineProperty(pa,"__esModule",{value:!0});pa.publishLast=void 0;var Nk=kn,Dk=Hr;function Lk(){return function(e){var r=new Nk.AsyncSubject;return new Dk.ConnectableObservable(e,function(){return r})}}pa.publishLast=Lk;var ma={};Object.defineProperty(ma,"__esModule",{value:!0});ma.publishReplay=void 0;var Uk=Mn,Fk=Qr,yv=se;function Bk(e,r,t,n){t&&!yv.isFunction(t)&&(n=t);var o=yv.isFunction(t)?t:void 0;return function(i){return Fk.multicast(new Uk.ReplaySubject(e,r,n),o)(i)}}ma.publishReplay=Bk;var Xn={},xk=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Wk=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Xn,"__esModule",{value:!0});Xn.raceWith=void 0;var Vk=Ur,qk=k,Hk=je;function zk(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length?qk.operate(function(t,n){Vk.raceInit(Wk([t],xk(e)))(n)}):Hk.identity}Xn.raceWith=zk;var ya={};Object.defineProperty(ya,"__esModule",{value:!0});ya.repeat=void 0;var Yk=ft,Gk=k,bv=L,Kk=V,Zk=wt;function Qk(e){var r,t=1/0,n;return e!=null&&(typeof e=="object"?(r=e.count,t=r===void 0?1/0:r,n=e.delay):t=e),t<=0?function(){return Yk.EMPTY}:Gk.operate(function(o,i){var a=0,s,c=function(){if(s==null||s.unsubscribe(),s=null,n!=null){var l=typeof n=="number"?Zk.timer(n):Kk.innerFrom(n(a)),h=bv.createOperatorSubscriber(i,function(){h.unsubscribe(),u()});l.subscribe(h)}else u()},u=function(){var l=!1;s=o.subscribe(bv.createOperatorSubscriber(i,void 0,function(){++a<t?s?c():l=!0:i.complete()})),l&&c()};u()})}ya.repeat=Qk;var ba={};Object.defineProperty(ba,"__esModule",{value:!0});ba.repeatWhen=void 0;var Xk=V,Jk=we,eN=k,gv=L;function tN(e){return eN.operate(function(r,t){var n,o=!1,i,a=!1,s=!1,c=function(){return s&&a&&(t.complete(),!0)},u=function(){return i||(i=new Jk.Subject,Xk.innerFrom(e(i)).subscribe(gv.createOperatorSubscriber(t,function(){n?l():o=!0},function(){a=!0,c()}))),i},l=function(){s=!1,n=r.subscribe(gv.createOperatorSubscriber(t,void 0,function(){s=!0,!c()&&u().next()})),o&&(n.unsubscribe(),n=null,o=!1,l())};l()})}ba.repeatWhen=tN;var ga={};Object.defineProperty(ga,"__esModule",{value:!0});ga.retry=void 0;var rN=k,Ov=L,nN=je,oN=wt,iN=V;function aN(e){e===void 0&&(e=1/0);var r;e&&typeof e=="object"?r=e:r={count:e};var t=r.count,n=t===void 0?1/0:t,o=r.delay,i=r.resetOnSuccess,a=i===void 0?!1:i;return n<=0?nN.identity:rN.operate(function(s,c){var u=0,l,h=function(){var _=!1;l=s.subscribe(Ov.createOperatorSubscriber(c,function(y){a&&(u=0),c.next(y)},void 0,function(y){if(u++<n){var b=function(){l?(l.unsubscribe(),l=null,h()):_=!0};if(o!=null){var O=typeof o=="number"?oN.timer(o):iN.innerFrom(o(y,u)),P=Ov.createOperatorSubscriber(c,function(){P.unsubscribe(),b()},function(){c.complete()});O.subscribe(P)}else b()}else c.error(y)})),_&&(l.unsubscribe(),l=null,h())};h()})}ga.retry=aN;var Oa={};Object.defineProperty(Oa,"__esModule",{value:!0});Oa.retryWhen=void 0;var uN=V,sN=we,cN=k,Ev=L;function lN(e){return cN.operate(function(r,t){var n,o=!1,i,a=function(){n=r.subscribe(Ev.createOperatorSubscriber(t,void 0,void 0,function(s){i||(i=new sN.Subject,uN.innerFrom(e(i)).subscribe(Ev.createOperatorSubscriber(t,function(){return n?a():o=!0}))),i&&i.next(s)})),o&&(n.unsubscribe(),n=null,o=!1,a())};a()})}Oa.retryWhen=lN;var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.sample=void 0;var fN=V,dN=k,hN=Re,wv=L;function vN(e){return dN.operate(function(r,t){var n=!1,o=null;r.subscribe(wv.createOperatorSubscriber(t,function(i){n=!0,o=i})),fN.innerFrom(e).subscribe(wv.createOperatorSubscriber(t,function(){if(n){n=!1;var i=o;o=null,t.next(i)}},hN.noop))})}Jn.sample=vN;var Ea={};Object.defineProperty(Ea,"__esModule",{value:!0});Ea.sampleTime=void 0;var _N=Qe,pN=Jn,mN=Ei;function yN(e,r){return r===void 0&&(r=_N.asyncScheduler),pN.sample(mN.interval(e,r))}Ea.sampleTime=yN;var wa={};Object.defineProperty(wa,"__esModule",{value:!0});wa.scan=void 0;var bN=k,gN=ki;function ON(e,r){return bN.operate(gN.scanInternals(e,r,arguments.length>=2,!0))}wa.scan=ON;var Ta={};Object.defineProperty(Ta,"__esModule",{value:!0});Ta.sequenceEqual=void 0;var EN=k,wN=L,TN=V;function SN(e,r){return r===void 0&&(r=function(t,n){return t===n}),EN.operate(function(t,n){var o=Tv(),i=Tv(),a=function(c){n.next(c),n.complete()},s=function(c,u){var l=wN.createOperatorSubscriber(n,function(h){var _=u.buffer,y=u.complete;_.length===0?y?a(!1):c.buffer.push(h):!r(h,_.shift())&&a(!1)},function(){c.complete=!0;var h=u.complete,_=u.buffer;h&&a(_.length===0),l==null||l.unsubscribe()});return l};t.subscribe(s(o,i)),TN.innerFrom(e).subscribe(s(i,o))})}Ta.sequenceEqual=SN;function Tv(){return{buffer:[],complete:!1}}var eo={},PN=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},CN=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(eo,"__esModule",{value:!0});eo.share=void 0;var Lm=V,IN=we,Um=jn,AN=k;function RN(e){e===void 0&&(e={});var r=e.connector,t=r===void 0?function(){return new IN.Subject}:r,n=e.resetOnError,o=n===void 0?!0:n,i=e.resetOnComplete,a=i===void 0?!0:i,s=e.resetOnRefCountZero,c=s===void 0?!0:s;return function(u){var l,h,_,y=0,b=!1,O=!1,P=function(){h==null||h.unsubscribe(),h=void 0},I=function(){P(),l=_=void 0,b=O=!1},j=function(){var S=l;I(),S==null||S.unsubscribe()};return AN.operate(function(S,A){y++,!O&&!b&&P();var T=_=_??t();A.add(function(){y--,y===0&&!O&&!b&&(h=Kl(j,c))}),T.subscribe(A),!l&&y>0&&(l=new Um.SafeSubscriber({next:function(F){return T.next(F)},error:function(F){O=!0,P(),h=Kl(I,o,F),T.error(F)},complete:function(){b=!0,P(),h=Kl(I,a),T.complete()}}),Lm.innerFrom(S).subscribe(l))})(u)}}eo.share=RN;function Kl(e,r){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];if(r===!0){e();return}if(r!==!1){var o=new Um.SafeSubscriber({next:function(){o.unsubscribe(),e()}});return Lm.innerFrom(r.apply(void 0,CN([],PN(t)))).subscribe(o)}}var Sa={};Object.defineProperty(Sa,"__esModule",{value:!0});Sa.shareReplay=void 0;var jN=Mn,$N=eo;function MN(e,r,t){var n,o,i,a,s=!1;return e&&typeof e=="object"?(n=e.bufferSize,a=n===void 0?1/0:n,o=e.windowTime,r=o===void 0?1/0:o,i=e.refCount,s=i===void 0?!1:i,t=e.scheduler):a=e??1/0,$N.share({connector:function(){return new jN.ReplaySubject(a,r,t)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}Sa.shareReplay=MN;var Pa={};Object.defineProperty(Pa,"__esModule",{value:!0});Pa.single=void 0;var kN=Ot,NN=yi,DN=mi,LN=k,UN=L;function FN(e){return LN.operate(function(r,t){var n=!1,o,i=!1,a=0;r.subscribe(UN.createOperatorSubscriber(t,function(s){i=!0,(!e||e(s,a++,r))&&(n&&t.error(new NN.SequenceError("Too many matching values")),n=!0,o=s)},function(){n?(t.next(o),t.complete()):t.error(i?new DN.NotFoundError("No matching values"):new kN.EmptyError)}))})}Pa.single=FN;var Ca={};Object.defineProperty(Ca,"__esModule",{value:!0});Ca.skip=void 0;var BN=pt;function xN(e){return BN.filter(function(r,t){return e<=t})}Ca.skip=xN;var Ia={};Object.defineProperty(Ia,"__esModule",{value:!0});Ia.skipLast=void 0;var WN=je,VN=k,qN=L;function HN(e){return e<=0?WN.identity:VN.operate(function(r,t){var n=new Array(e),o=0;return r.subscribe(qN.createOperatorSubscriber(t,function(i){var a=o++;if(a<e)n[a]=i;else{var s=a%e,c=n[s];n[s]=i,t.next(c)}})),function(){n=null}})}Ia.skipLast=HN;var Aa={};Object.defineProperty(Aa,"__esModule",{value:!0});Aa.skipUntil=void 0;var zN=k,Sv=L,YN=V,GN=Re;function KN(e){return zN.operate(function(r,t){var n=!1,o=Sv.createOperatorSubscriber(t,function(){o==null||o.unsubscribe(),n=!0},GN.noop);YN.innerFrom(e).subscribe(o),r.subscribe(Sv.createOperatorSubscriber(t,function(i){return n&&t.next(i)}))})}Aa.skipUntil=KN;var Ra={};Object.defineProperty(Ra,"__esModule",{value:!0});Ra.skipWhile=void 0;var ZN=k,QN=L;function XN(e){return ZN.operate(function(r,t){var n=!1,o=0;r.subscribe(QN.createOperatorSubscriber(t,function(i){return(n||(n=!e(i,o++)))&&t.next(i)}))})}Ra.skipWhile=XN;var ja={};Object.defineProperty(ja,"__esModule",{value:!0});ja.startWith=void 0;var Pv=Yr,JN=Se,eD=k;function tD(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=JN.popScheduler(e);return eD.operate(function(n,o){(t?Pv.concat(e,n,t):Pv.concat(e,n)).subscribe(o)})}ja.startWith=tD;var $a={},dr={};Object.defineProperty(dr,"__esModule",{value:!0});dr.switchMap=void 0;var rD=V,nD=k,Cv=L;function oD(e,r){return nD.operate(function(t,n){var o=null,i=0,a=!1,s=function(){return a&&!o&&n.complete()};t.subscribe(Cv.createOperatorSubscriber(n,function(c){o==null||o.unsubscribe();var u=0,l=i++;rD.innerFrom(e(c,l)).subscribe(o=Cv.createOperatorSubscriber(n,function(h){return n.next(r?r(c,h,l,u++):h)},function(){o=null,s()}))},function(){a=!0,s()}))})}dr.switchMap=oD;Object.defineProperty($a,"__esModule",{value:!0});$a.switchAll=void 0;var iD=dr,aD=je;function uD(){return iD.switchMap(aD.identity)}$a.switchAll=uD;var Ma={};Object.defineProperty(Ma,"__esModule",{value:!0});Ma.switchMapTo=void 0;var Iv=dr,sD=se;function cD(e,r){return sD.isFunction(r)?Iv.switchMap(function(){return e},r):Iv.switchMap(function(){return e})}Ma.switchMapTo=cD;var ka={};Object.defineProperty(ka,"__esModule",{value:!0});ka.switchScan=void 0;var lD=dr,fD=k;function dD(e,r){return fD.operate(function(t,n){var o=r;return lD.switchMap(function(i,a){return e(o,i,a)},function(i,a){return o=a,a})(t).subscribe(n),function(){o=null}})}ka.switchScan=dD;var Na={};Object.defineProperty(Na,"__esModule",{value:!0});Na.takeUntil=void 0;var hD=k,vD=L,_D=V,pD=Re;function mD(e){return hD.operate(function(r,t){_D.innerFrom(e).subscribe(vD.createOperatorSubscriber(t,function(){return t.complete()},pD.noop)),!t.closed&&r.subscribe(t)})}Na.takeUntil=mD;var Da={};Object.defineProperty(Da,"__esModule",{value:!0});Da.takeWhile=void 0;var yD=k,bD=L;function gD(e,r){return r===void 0&&(r=!1),yD.operate(function(t,n){var o=0;t.subscribe(bD.createOperatorSubscriber(n,function(i){var a=e(i,o++);(a||r)&&n.next(i),!a&&n.complete()}))})}Da.takeWhile=gD;var La={};Object.defineProperty(La,"__esModule",{value:!0});La.tap=void 0;var OD=se,ED=k,wD=L,TD=je;function SD(e,r,t){var n=OD.isFunction(e)||r||t?{next:e,error:r,complete:t}:e;return n?ED.operate(function(o,i){var a;(a=n.subscribe)===null||a===void 0||a.call(n);var s=!0;o.subscribe(wD.createOperatorSubscriber(i,function(c){var u;(u=n.next)===null||u===void 0||u.call(n,c),i.next(c)},function(){var c;s=!1,(c=n.complete)===null||c===void 0||c.call(n),i.complete()},function(c){var u;s=!1,(u=n.error)===null||u===void 0||u.call(n,c),i.error(c)},function(){var c,u;s&&((c=n.unsubscribe)===null||c===void 0||c.call(n)),(u=n.finalize)===null||u===void 0||u.call(n)}))}):TD.identity}La.tap=SD;var to={};Object.defineProperty(to,"__esModule",{value:!0});to.throttle=void 0;var PD=k,Av=L,CD=V;function ID(e,r){return PD.operate(function(t,n){var o=r??{},i=o.leading,a=i===void 0?!0:i,s=o.trailing,c=s===void 0?!1:s,u=!1,l=null,h=null,_=!1,y=function(){h==null||h.unsubscribe(),h=null,c&&(P(),_&&n.complete())},b=function(){h=null,_&&n.complete()},O=function(I){return h=CD.innerFrom(e(I)).subscribe(Av.createOperatorSubscriber(n,y,b))},P=function(){if(u){u=!1;var I=l;l=null,n.next(I),!_&&O(I)}};t.subscribe(Av.createOperatorSubscriber(n,function(I){u=!0,l=I,!(h&&!h.closed)&&(a?P():O(I))},function(){_=!0,!(c&&u&&h&&!h.closed)&&n.complete()}))})}to.throttle=ID;var Ua={};Object.defineProperty(Ua,"__esModule",{value:!0});Ua.throttleTime=void 0;var AD=Qe,RD=to,jD=wt;function $D(e,r,t){r===void 0&&(r=AD.asyncScheduler);var n=jD.timer(e,r);return RD.throttle(function(){return n},t)}Ua.throttleTime=$D;var Br={};Object.defineProperty(Br,"__esModule",{value:!0});Br.TimeInterval=Br.timeInterval=void 0;var MD=Qe,kD=k,ND=L;function DD(e){return e===void 0&&(e=MD.asyncScheduler),kD.operate(function(r,t){var n=e.now();r.subscribe(ND.createOperatorSubscriber(t,function(o){var i=e.now(),a=i-n;n=i,t.next(new Fm(o,a))}))})}Br.timeInterval=DD;var Fm=function(){function e(r,t){this.value=r,this.interval=t}return e}();Br.TimeInterval=Fm;var Fa={};Object.defineProperty(Fa,"__esModule",{value:!0});Fa.timeoutWith=void 0;var LD=Qe,UD=Un,FD=Ho;function BD(e,r,t){var n,o,i;if(t=t??LD.async,UD.isValidDate(e)?n=e:typeof e=="number"&&(o=e),r)i=function(){return r};else throw new TypeError("No observable provided to switch to");if(n==null&&o==null)throw new TypeError("No timeout provided.");return FD.timeout({first:n,each:o,scheduler:t,with:i})}Fa.timeoutWith=BD;var Ba={};Object.defineProperty(Ba,"__esModule",{value:!0});Ba.timestamp=void 0;var xD=ps,WD=_t;function VD(e){return e===void 0&&(e=xD.dateTimestampProvider),WD.map(function(r){return{value:r,timestamp:e.now()}})}Ba.timestamp=VD;var xa={};Object.defineProperty(xa,"__esModule",{value:!0});xa.window=void 0;var Rv=we,qD=k,jv=L,HD=Re,zD=V;function YD(e){return qD.operate(function(r,t){var n=new Rv.Subject;t.next(n.asObservable());var o=function(i){n.error(i),t.error(i)};return r.subscribe(jv.createOperatorSubscriber(t,function(i){return n==null?void 0:n.next(i)},function(){n.complete(),t.complete()},o)),zD.innerFrom(e).subscribe(jv.createOperatorSubscriber(t,function(){n.complete(),t.next(n=new Rv.Subject)},HD.noop,o)),function(){n==null||n.unsubscribe(),n=null}})}xa.window=YD;var Wa={},GD=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Wa,"__esModule",{value:!0});Wa.windowCount=void 0;var $v=we,KD=k,ZD=L;function QD(e,r){r===void 0&&(r=0);var t=r>0?r:e;return KD.operate(function(n,o){var i=[new $v.Subject],a=0;o.next(i[0].asObservable()),n.subscribe(ZD.createOperatorSubscriber(o,function(s){var c,u;try{for(var l=GD(i),h=l.next();!h.done;h=l.next()){var _=h.value;_.next(s)}}catch(O){c={error:O}}finally{try{h&&!h.done&&(u=l.return)&&u.call(l)}finally{if(c)throw c.error}}var y=a-e+1;if(y>=0&&y%t===0&&i.shift().complete(),++a%t===0){var b=new $v.Subject;i.push(b),o.next(b.asObservable())}},function(){for(;i.length>0;)i.shift().complete();o.complete()},function(s){for(;i.length>0;)i.shift().error(s);o.error(s)},function(){i=null}))})}Wa.windowCount=QD;var Va={};Object.defineProperty(Va,"__esModule",{value:!0});Va.windowTime=void 0;var XD=we,JD=Qe,eL=Ae,tL=k,rL=L,nL=dt,oL=Se,Mv=vt;function iL(e){for(var r,t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=(r=oL.popScheduler(n))!==null&&r!==void 0?r:JD.asyncScheduler,a=(t=n[0])!==null&&t!==void 0?t:null,s=n[1]||1/0;return tL.operate(function(c,u){var l=[],h=!1,_=function(P){var I=P.window,j=P.subs;I.complete(),j.unsubscribe(),nL.arrRemove(l,P),h&&y()},y=function(){if(l){var P=new eL.Subscription;u.add(P);var I=new XD.Subject,j={window:I,subs:P,seen:0};l.push(j),u.next(I.asObservable()),Mv.executeSchedule(P,i,function(){return _(j)},e)}};a!==null&&a>=0?Mv.executeSchedule(u,i,y,a,!0):h=!0,y();var b=function(P){return l.slice().forEach(P)},O=function(P){b(function(I){var j=I.window;return P(j)}),P(u),u.unsubscribe()};return c.subscribe(rL.createOperatorSubscriber(u,function(P){b(function(I){I.window.next(P),s<=++I.seen&&_(I)})},function(){return O(function(P){return P.complete()})},function(P){return O(function(I){return I.error(P)})})),function(){l=null}})}Va.windowTime=iL;var qa={},aL=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(qa,"__esModule",{value:!0});qa.windowToggle=void 0;var uL=we,sL=Ae,cL=k,kv=V,Zl=L,Nv=Re,lL=dt;function fL(e,r){return cL.operate(function(t,n){var o=[],i=function(a){for(;0<o.length;)o.shift().error(a);n.error(a)};kv.innerFrom(e).subscribe(Zl.createOperatorSubscriber(n,function(a){var s=new uL.Subject;o.push(s);var c=new sL.Subscription,u=function(){lL.arrRemove(o,s),s.complete(),c.unsubscribe()},l;try{l=kv.innerFrom(r(a))}catch(h){i(h);return}n.next(s.asObservable()),c.add(l.subscribe(Zl.createOperatorSubscriber(n,u,Nv.noop,i)))},Nv.noop)),t.subscribe(Zl.createOperatorSubscriber(n,function(a){var s,c,u=o.slice();try{for(var l=aL(u),h=l.next();!h.done;h=l.next()){var _=h.value;_.next(a)}}catch(y){s={error:y}}finally{try{h&&!h.done&&(c=l.return)&&c.call(l)}finally{if(s)throw s.error}}},function(){for(;0<o.length;)o.shift().complete();n.complete()},i,function(){for(;0<o.length;)o.shift().unsubscribe()}))})}qa.windowToggle=fL;var Ha={};Object.defineProperty(Ha,"__esModule",{value:!0});Ha.windowWhen=void 0;var dL=we,hL=k,Dv=L,vL=V;function _L(e){return hL.operate(function(r,t){var n,o,i=function(s){n.error(s),t.error(s)},a=function(){o==null||o.unsubscribe(),n==null||n.complete(),n=new dL.Subject,t.next(n.asObservable());var s;try{s=vL.innerFrom(e())}catch(c){i(c);return}s.subscribe(o=Dv.createOperatorSubscriber(t,a,a,i))};a(),r.subscribe(Dv.createOperatorSubscriber(t,function(s){return n.next(s)},function(){n.complete(),t.complete()},i,function(){o==null||o.unsubscribe(),n=null}))})}Ha.windowWhen=_L;var za={},Lv=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Uv=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(za,"__esModule",{value:!0});za.withLatestFrom=void 0;var pL=k,Fv=L,mL=V,yL=je,bL=Re,gL=Se;function OL(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=gL.popResultSelector(e);return pL.operate(function(n,o){for(var i=e.length,a=new Array(i),s=e.map(function(){return!1}),c=!1,u=function(h){mL.innerFrom(e[h]).subscribe(Fv.createOperatorSubscriber(o,function(_){a[h]=_,!c&&!s[h]&&(s[h]=!0,(c=s.every(yL.identity))&&(s=null))},bL.noop))},l=0;l<i;l++)u(l);n.subscribe(Fv.createOperatorSubscriber(o,function(h){if(c){var _=Uv([h],Lv(a));o.next(t?t.apply(void 0,Uv([],Lv(_))):_)}}))})}za.withLatestFrom=OL;var Ya={};Object.defineProperty(Ya,"__esModule",{value:!0});Ya.zipAll=void 0;var EL=Bn,wL=Mi;function TL(e){return wL.joinAllInternals(EL.zip,e)}Ya.zipAll=TL;var Ga={},Ka={},SL=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},PL=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ka,"__esModule",{value:!0});Ka.zip=void 0;var CL=Bn,IL=k;function AL(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return IL.operate(function(t,n){CL.zip.apply(void 0,PL([t],SL(e))).subscribe(n)})}Ka.zip=AL;var RL=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},jL=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ga,"__esModule",{value:!0});Ga.zipWith=void 0;var $L=Ka;function ML(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return $L.zip.apply(void 0,jL([],RL(e)))}Ga.zipWith=ML;(function(e){var r=f&&f.__createBinding||(Object.create?function(tn,rn,St,pr){pr===void 0&&(pr=St),Object.defineProperty(tn,pr,{enumerable:!0,get:function(){return rn[St]}})}:function(tn,rn,St,pr){pr===void 0&&(pr=St),tn[pr]=rn[St]}),t=f&&f.__exportStar||function(tn,rn){for(var St in tn)St!=="default"&&!Object.prototype.hasOwnProperty.call(rn,St)&&r(rn,tn,St)};Object.defineProperty(e,"__esModule",{value:!0}),e.interval=e.iif=e.generate=e.fromEventPattern=e.fromEvent=e.from=e.forkJoin=e.empty=e.defer=e.connectable=e.concat=e.combineLatest=e.bindNodeCallback=e.bindCallback=e.UnsubscriptionError=e.TimeoutError=e.SequenceError=e.ObjectUnsubscribedError=e.NotFoundError=e.EmptyError=e.ArgumentOutOfRangeError=e.firstValueFrom=e.lastValueFrom=e.isObservable=e.identity=e.noop=e.pipe=e.NotificationKind=e.Notification=e.Subscriber=e.Subscription=e.Scheduler=e.VirtualAction=e.VirtualTimeScheduler=e.animationFrameScheduler=e.animationFrame=e.queueScheduler=e.queue=e.asyncScheduler=e.async=e.asapScheduler=e.asap=e.AsyncSubject=e.ReplaySubject=e.BehaviorSubject=e.Subject=e.animationFrames=e.observable=e.ConnectableObservable=e.Observable=void 0,e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.combineLatestWith=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=e.config=e.NEVER=e.EMPTY=e.scheduled=e.zip=e.using=e.timer=e.throwError=e.range=e.race=e.partition=e.pairs=e.onErrorResumeNext=e.of=e.never=e.merge=void 0,e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.pairwise=e.onErrorResumeNextWith=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=e.mergeAll=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=void 0,e.zipWith=e.zipAll=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=void 0;var n=ce;Object.defineProperty(e,"Observable",{enumerable:!0,get:function(){return n.Observable}});var o=Hr;Object.defineProperty(e,"ConnectableObservable",{enumerable:!0,get:function(){return o.ConnectableObservable}});var i=qr;Object.defineProperty(e,"observable",{enumerable:!0,get:function(){return i.observable}});var a=_s;Object.defineProperty(e,"animationFrames",{enumerable:!0,get:function(){return a.animationFrames}});var s=we;Object.defineProperty(e,"Subject",{enumerable:!0,get:function(){return s.Subject}});var c=ii;Object.defineProperty(e,"BehaviorSubject",{enumerable:!0,get:function(){return c.BehaviorSubject}});var u=Mn;Object.defineProperty(e,"ReplaySubject",{enumerable:!0,get:function(){return u.ReplaySubject}});var l=kn;Object.defineProperty(e,"AsyncSubject",{enumerable:!0,get:function(){return l.AsyncSubject}});var h=cm;Object.defineProperty(e,"asap",{enumerable:!0,get:function(){return h.asap}}),Object.defineProperty(e,"asapScheduler",{enumerable:!0,get:function(){return h.asapScheduler}});var _=Qe;Object.defineProperty(e,"async",{enumerable:!0,get:function(){return _.async}}),Object.defineProperty(e,"asyncScheduler",{enumerable:!0,get:function(){return _.asyncScheduler}});var y=dm;Object.defineProperty(e,"queue",{enumerable:!0,get:function(){return y.queue}}),Object.defineProperty(e,"queueScheduler",{enumerable:!0,get:function(){return y.queueScheduler}});var b=hm;Object.defineProperty(e,"animationFrame",{enumerable:!0,get:function(){return b.animationFrame}}),Object.defineProperty(e,"animationFrameScheduler",{enumerable:!0,get:function(){return b.animationFrameScheduler}});var O=gn;Object.defineProperty(e,"VirtualTimeScheduler",{enumerable:!0,get:function(){return O.VirtualTimeScheduler}}),Object.defineProperty(e,"VirtualAction",{enumerable:!0,get:function(){return O.VirtualAction}});var P=ai;Object.defineProperty(e,"Scheduler",{enumerable:!0,get:function(){return P.Scheduler}});var I=Ae;Object.defineProperty(e,"Subscription",{enumerable:!0,get:function(){return I.Subscription}});var j=jn;Object.defineProperty(e,"Subscriber",{enumerable:!0,get:function(){return j.Subscriber}});var S=Ts;Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return S.Notification}}),Object.defineProperty(e,"NotificationKind",{enumerable:!0,get:function(){return S.NotificationKind}});var A=kt;Object.defineProperty(e,"pipe",{enumerable:!0,get:function(){return A.pipe}});var T=Re;Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return T.noop}});var F=je;Object.defineProperty(e,"identity",{enumerable:!0,get:function(){return F.identity}});var z=As;Object.defineProperty(e,"isObservable",{enumerable:!0,get:function(){return z.isObservable}});var x=Rs;Object.defineProperty(e,"lastValueFrom",{enumerable:!0,get:function(){return x.lastValueFrom}});var re=js;Object.defineProperty(e,"firstValueFrom",{enumerable:!0,get:function(){return re.firstValueFrom}});var le=pi;Object.defineProperty(e,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return le.ArgumentOutOfRangeError}});var be=Ot;Object.defineProperty(e,"EmptyError",{enumerable:!0,get:function(){return be.EmptyError}});var ne=mi;Object.defineProperty(e,"NotFoundError",{enumerable:!0,get:function(){return ne.NotFoundError}});var me=oi;Object.defineProperty(e,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return me.ObjectUnsubscribedError}});var X=yi;Object.defineProperty(e,"SequenceError",{enumerable:!0,get:function(){return X.SequenceError}});var U=Ho;Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return U.TimeoutError}});var K=ri;Object.defineProperty(e,"UnsubscriptionError",{enumerable:!0,get:function(){return K.UnsubscriptionError}});var $=$s;Object.defineProperty(e,"bindCallback",{enumerable:!0,get:function(){return $.bindCallback}});var q=Ms;Object.defineProperty(e,"bindNodeCallback",{enumerable:!0,get:function(){return q.bindNodeCallback}});var Y=Kt;Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return Y.combineLatest}});var D=Yr;Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return D.concat}});var N=ks;Object.defineProperty(e,"connectable",{enumerable:!0,get:function(){return N.connectable}});var Z=Kr;Object.defineProperty(e,"defer",{enumerable:!0,get:function(){return Z.defer}});var ge=ft;Object.defineProperty(e,"empty",{enumerable:!0,get:function(){return ge.empty}});var W=Ns;Object.defineProperty(e,"forkJoin",{enumerable:!0,get:function(){return W.forkJoin}});var oe=ht;Object.defineProperty(e,"from",{enumerable:!0,get:function(){return oe.from}});var E=Ds;Object.defineProperty(e,"fromEvent",{enumerable:!0,get:function(){return E.fromEvent}});var R=Ls;Object.defineProperty(e,"fromEventPattern",{enumerable:!0,get:function(){return R.fromEventPattern}});var M=Us;Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return M.generate}});var B=Fs;Object.defineProperty(e,"iif",{enumerable:!0,get:function(){return B.iif}});var ee=Ei;Object.defineProperty(e,"interval",{enumerable:!0,get:function(){return ee.interval}});var Pe=Bs;Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return Pe.merge}});var ze=Mf;Object.defineProperty(e,"never",{enumerable:!0,get:function(){return ze.never}});var Ye=Nn;Object.defineProperty(e,"of",{enumerable:!0,get:function(){return Ye.of}});var it=wi;Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return it.onErrorResumeNext}});var co=xs;Object.defineProperty(e,"pairs",{enumerable:!0,get:function(){return co.pairs}});var lo=Ws;Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return lo.partition}});var vr=Ur;Object.defineProperty(e,"race",{enumerable:!0,get:function(){return vr.race}});var fo=Vs;Object.defineProperty(e,"range",{enumerable:!0,get:function(){return fo.range}});var ho=_i;Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return ho.throwError}});var en=wt;Object.defineProperty(e,"timer",{enumerable:!0,get:function(){return en.timer}});var xt=qs;Object.defineProperty(e,"using",{enumerable:!0,get:function(){return xt.using}});var Ge=Bn;Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return Ge.zip}});var _r=ui;Object.defineProperty(e,"scheduled",{enumerable:!0,get:function(){return _r.scheduled}});var vo=ft;Object.defineProperty(e,"EMPTY",{enumerable:!0,get:function(){return vo.EMPTY}});var tt=Mf;Object.defineProperty(e,"NEVER",{enumerable:!0,get:function(){return tt.NEVER}}),t(Rm,e);var _o=nr;Object.defineProperty(e,"config",{enumerable:!0,get:function(){return _o.config}});var p=xn;Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return p.audit}});var d=Si;Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return d.auditTime}});var v=Pi;Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return v.buffer}});var m=Ci;Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return m.bufferCount}});var g=Ii;Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return g.bufferTime}});var w=Ai;Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return w.bufferToggle}});var C=Ri;Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return C.bufferWhen}});var J=ji;Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return J.catchError}});var ve=$i;Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return ve.combineAll}});var fe=Wn;Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return fe.combineLatestAll}});var _e=Ni;Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return _e.combineLatestWith}});var ue=Gr;Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return ue.concatAll}});var zc=qn;Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return zc.concatMap}});var Yc=Li;Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return Yc.concatMapTo}});var Gc=Ui;Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return Gc.concatWith}});var Kc=Zr;Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return Kc.connect}});var Zc=Bi;Object.defineProperty(e,"count",{enumerable:!0,get:function(){return Zc.count}});var Qc=xi;Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return Qc.debounce}});var Xc=Wi;Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return Xc.debounceTime}});var Jc=cr;Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return Jc.defaultIfEmpty}});var el=Vi;Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return el.delay}});var tl=Hn;Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return tl.delayWhen}});var rl=qi;Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return rl.dematerialize}});var nl=Hi;Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return nl.distinct}});var ol=Gn;Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return ol.distinctUntilChanged}});var il=zi;Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return il.distinctUntilKeyChanged}});var al=Yi;Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return al.elementAt}});var ul=Gi;Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return ul.endWith}});var sl=Ki;Object.defineProperty(e,"every",{enumerable:!0,get:function(){return sl.every}});var cl=Zi;Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return cl.exhaust}});var ll=Kn;Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return ll.exhaustAll}});var fl=Zn;Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return fl.exhaustMap}});var dl=Qi;Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return dl.expand}});var hl=pt;Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return hl.filter}});var vl=Xi;Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return vl.finalize}});var _l=Zt;Object.defineProperty(e,"find",{enumerable:!0,get:function(){return _l.find}});var pl=Ji;Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return pl.findIndex}});var ml=ea;Object.defineProperty(e,"first",{enumerable:!0,get:function(){return ml.first}});var yl=ta;Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return yl.groupBy}});var bl=zn;Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return bl.ignoreElements}});var gl=ra;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return gl.isEmpty}});var Ol=na;Object.defineProperty(e,"last",{enumerable:!0,get:function(){return Ol.last}});var El=_t;Object.defineProperty(e,"map",{enumerable:!0,get:function(){return El.map}});var wl=Yn;Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return wl.mapTo}});var Tl=oa;Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return Tl.materialize}});var Sl=ia;Object.defineProperty(e,"max",{enumerable:!0,get:function(){return Sl.max}});var Pl=sr;Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return Pl.mergeAll}});var Cl=aa;Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return Cl.flatMap}});var Il=ot;Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return Il.mergeMap}});var Al=ua;Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return Al.mergeMapTo}});var Rl=sa;Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return Rl.mergeScan}});var Mb=ca;Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return Mb.mergeWith}});var kb=fa;Object.defineProperty(e,"min",{enumerable:!0,get:function(){return kb.min}});var Nb=Qr;Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return Nb.multicast}});var Db=ar;Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return Db.observeOn}});var Lb=Fr;Object.defineProperty(e,"onErrorResumeNextWith",{enumerable:!0,get:function(){return Lb.onErrorResumeNextWith}});var Ub=da;Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return Ub.pairwise}});var Fb=ha;Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return Fb.pluck}});var Bb=va;Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return Bb.publish}});var xb=_a;Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return xb.publishBehavior}});var Wb=pa;Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return Wb.publishLast}});var Vb=ma;Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return Vb.publishReplay}});var qb=Xn;Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return qb.raceWith}});var Hb=Dt;Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return Hb.reduce}});var zb=ya;Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return zb.repeat}});var Yb=ba;Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return Yb.repeatWhen}});var Gb=ga;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return Gb.retry}});var Kb=Oa;Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return Kb.retryWhen}});var Zb=$n;Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return Zb.refCount}});var Qb=Jn;Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return Qb.sample}});var Xb=Ea;Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return Xb.sampleTime}});var Jb=wa;Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return Jb.scan}});var eg=Ta;Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return eg.sequenceEqual}});var tg=eo;Object.defineProperty(e,"share",{enumerable:!0,get:function(){return tg.share}});var rg=Sa;Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return rg.shareReplay}});var ng=Pa;Object.defineProperty(e,"single",{enumerable:!0,get:function(){return ng.single}});var og=Ca;Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return og.skip}});var ig=Ia;Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return ig.skipLast}});var ag=Aa;Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return ag.skipUntil}});var ug=Ra;Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return ug.skipWhile}});var sg=ja;Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return sg.startWith}});var cg=ur;Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return cg.subscribeOn}});var lg=$a;Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return lg.switchAll}});var fg=dr;Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return fg.switchMap}});var dg=Ma;Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return dg.switchMapTo}});var hg=ka;Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return hg.switchScan}});var vg=lr;Object.defineProperty(e,"take",{enumerable:!0,get:function(){return vg.take}});var _g=Qn;Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return _g.takeLast}});var pg=Na;Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return pg.takeUntil}});var mg=Da;Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return mg.takeWhile}});var yg=La;Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return yg.tap}});var bg=to;Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return bg.throttle}});var gg=Ua;Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return gg.throttleTime}});var Og=fr;Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return Og.throwIfEmpty}});var Eg=Br;Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return Eg.timeInterval}});var wg=Ho;Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return wg.timeout}});var Tg=Fa;Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return Tg.timeoutWith}});var Sg=Ba;Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return Sg.timestamp}});var Pg=Vn;Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return Pg.toArray}});var Cg=xa;Object.defineProperty(e,"window",{enumerable:!0,get:function(){return Cg.window}});var Ig=Wa;Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return Ig.windowCount}});var Ag=Va;Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return Ag.windowTime}});var Rg=qa;Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return Rg.windowToggle}});var jg=Ha;Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return jg.windowWhen}});var $g=za;Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return $g.withLatestFrom}});var Mg=Ya;Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return Mg.zipAll}});var kg=Ga;Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return kg.zipWith}})})(ti);var zs={},Ys={};Object.defineProperty(Ys,"__esModule",{value:!0});Ys.partition=void 0;var kL=Ti,Bv=pt;function NL(e,r){return function(t){return[Bv.filter(e,r)(t),Bv.filter(kL.not(e,r))(t)]}}Ys.partition=NL;var Gs={},DL=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},LL=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.race=void 0;var UL=Tt,FL=Xn;function BL(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return FL.raceWith.apply(void 0,LL([],DL(UL.argsOrArgArray(e))))}Gs.race=BL;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.mergeAll=e.merge=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.concat=e.combineLatestWith=e.combineLatest=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=void 0,e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.race=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.partition=e.pairwise=e.onErrorResumeNext=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=void 0,e.zipWith=e.zipAll=e.zip=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=void 0;var r=xn;Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return r.audit}});var t=Si;Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return t.auditTime}});var n=Pi;Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return n.buffer}});var o=Ci;Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return o.bufferCount}});var i=Ii;Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return i.bufferTime}});var a=Ai;Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return a.bufferToggle}});var s=Ri;Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return s.bufferWhen}});var c=ji;Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return c.catchError}});var u=$i;Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return u.combineAll}});var l=Wn;Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return l.combineLatestAll}});var h=Di;Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return h.combineLatest}});var _=Ni;Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return _.combineLatestWith}});var y=Fi;Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return y.concat}});var b=Gr;Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return b.concatAll}});var O=qn;Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return O.concatMap}});var P=Li;Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return P.concatMapTo}});var I=Ui;Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return I.concatWith}});var j=Zr;Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return j.connect}});var S=Bi;Object.defineProperty(e,"count",{enumerable:!0,get:function(){return S.count}});var A=xi;Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return A.debounce}});var T=Wi;Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return T.debounceTime}});var F=cr;Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return F.defaultIfEmpty}});var z=Vi;Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return z.delay}});var x=Hn;Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return x.delayWhen}});var re=qi;Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return re.dematerialize}});var le=Hi;Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return le.distinct}});var be=Gn;Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return be.distinctUntilChanged}});var ne=zi;Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return ne.distinctUntilKeyChanged}});var me=Yi;Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return me.elementAt}});var X=Gi;Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return X.endWith}});var U=Ki;Object.defineProperty(e,"every",{enumerable:!0,get:function(){return U.every}});var K=Zi;Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return K.exhaust}});var $=Kn;Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return $.exhaustAll}});var q=Zn;Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return q.exhaustMap}});var Y=Qi;Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return Y.expand}});var D=pt;Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return D.filter}});var N=Xi;Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return N.finalize}});var Z=Zt;Object.defineProperty(e,"find",{enumerable:!0,get:function(){return Z.find}});var ge=Ji;Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return ge.findIndex}});var W=ea;Object.defineProperty(e,"first",{enumerable:!0,get:function(){return W.first}});var oe=ta;Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return oe.groupBy}});var E=zn;Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return E.ignoreElements}});var R=ra;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return R.isEmpty}});var M=na;Object.defineProperty(e,"last",{enumerable:!0,get:function(){return M.last}});var B=_t;Object.defineProperty(e,"map",{enumerable:!0,get:function(){return B.map}});var ee=Yn;Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return ee.mapTo}});var Pe=oa;Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return Pe.materialize}});var ze=ia;Object.defineProperty(e,"max",{enumerable:!0,get:function(){return ze.max}});var Ye=la;Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return Ye.merge}});var it=sr;Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return it.mergeAll}});var co=aa;Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return co.flatMap}});var lo=ot;Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return lo.mergeMap}});var vr=ua;Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return vr.mergeMapTo}});var fo=sa;Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return fo.mergeScan}});var ho=ca;Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return ho.mergeWith}});var en=fa;Object.defineProperty(e,"min",{enumerable:!0,get:function(){return en.min}});var xt=Qr;Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return xt.multicast}});var Ge=ar;Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return Ge.observeOn}});var _r=Fr;Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return _r.onErrorResumeNext}});var vo=da;Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return vo.pairwise}});var tt=Ys;Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return tt.partition}});var _o=ha;Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return _o.pluck}});var p=va;Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return p.publish}});var d=_a;Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return d.publishBehavior}});var v=pa;Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return v.publishLast}});var m=ma;Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return m.publishReplay}});var g=Gs;Object.defineProperty(e,"race",{enumerable:!0,get:function(){return g.race}});var w=Xn;Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return w.raceWith}});var C=Dt;Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return C.reduce}});var J=ya;Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return J.repeat}});var ve=ba;Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return ve.repeatWhen}});var fe=ga;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return fe.retry}});var _e=Oa;Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return _e.retryWhen}});var ue=$n;Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return ue.refCount}});var zc=Jn;Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return zc.sample}});var Yc=Ea;Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return Yc.sampleTime}});var Gc=wa;Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return Gc.scan}});var Kc=Ta;Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return Kc.sequenceEqual}});var Zc=eo;Object.defineProperty(e,"share",{enumerable:!0,get:function(){return Zc.share}});var Qc=Sa;Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return Qc.shareReplay}});var Xc=Pa;Object.defineProperty(e,"single",{enumerable:!0,get:function(){return Xc.single}});var Jc=Ca;Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return Jc.skip}});var el=Ia;Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return el.skipLast}});var tl=Aa;Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return tl.skipUntil}});var rl=Ra;Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return rl.skipWhile}});var nl=ja;Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return nl.startWith}});var ol=ur;Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return ol.subscribeOn}});var il=$a;Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return il.switchAll}});var al=dr;Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return al.switchMap}});var ul=Ma;Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return ul.switchMapTo}});var sl=ka;Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return sl.switchScan}});var cl=lr;Object.defineProperty(e,"take",{enumerable:!0,get:function(){return cl.take}});var ll=Qn;Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return ll.takeLast}});var fl=Na;Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return fl.takeUntil}});var dl=Da;Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return dl.takeWhile}});var hl=La;Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return hl.tap}});var vl=to;Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return vl.throttle}});var _l=Ua;Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return _l.throttleTime}});var pl=fr;Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return pl.throwIfEmpty}});var ml=Br;Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return ml.timeInterval}});var yl=Ho;Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return yl.timeout}});var bl=Fa;Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return bl.timeoutWith}});var gl=Ba;Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return gl.timestamp}});var Ol=Vn;Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return Ol.toArray}});var El=xa;Object.defineProperty(e,"window",{enumerable:!0,get:function(){return El.window}});var wl=Wa;Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return wl.windowCount}});var Tl=Va;Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return Tl.windowTime}});var Sl=qa;Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return Sl.windowToggle}});var Pl=Ha;Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return Pl.windowWhen}});var Cl=za;Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return Cl.withLatestFrom}});var Il=Ka;Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return Il.zip}});var Al=Ya;Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return Al.zipAll}});var Rl=Ga;Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return Rl.zipWith}})})(zs);var ro={},vn=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},_n=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(ro,"__esModule",{value:!0});var xL=H,Cr=ti,Or=zs,To={READY:0,STREAMING:1,COMPLETED:2},WL=function(){function e(r,t){var n=r.pipe((0,Or.publishReplay)(1),(0,Or.refCount)());this._result=n,this._keys=n.pipe((0,Or.mergeMap)(function(o){return(0,Cr.from)(o.keys())}),(0,Or.publishReplay)(1),(0,Or.refCount)()),this._records=void 0,this._controls=new Bm,this._summary=new Cr.ReplaySubject,this._state=t||To.READY}return e.prototype.keys=function(){return this._keys},e.prototype.records=function(){var r=this,t=this._result.pipe((0,Or.mergeMap)(function(n){return new Cr.Observable(function(o){return r._startStreaming({result:n,recordsObserver:o})})}));return t.push=function(){return r._push()},t},e.prototype.consume=function(){var r=this;return this._result.pipe((0,Or.mergeMap)(function(t){return new Cr.Observable(function(n){return r._startStreaming({result:t,summaryObserver:n})})}))},e.prototype.pause=function(){this._controls.pause()},e.prototype.resume=function(){return this._controls.resume()},e.prototype.push=function(){return this._controls.push()},e.prototype._startStreaming=function(r){var t=r===void 0?{}:r,n=t.result,o=t.recordsObserver,i=o===void 0?null:o,a=t.summaryObserver,s=a===void 0?null:a,c=[];return s&&c.push(this._summary.subscribe(s)),this._state<To.STREAMING?(this._state=To.STREAMING,this._setupRecordsStream(n),i?c.push(this._records.subscribe(i)):n._cancel(),c.push({unsubscribe:function(){n._cancel&&n._cancel()}})):i&&i.error((0,xL.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){c.forEach(function(u){return u.unsubscribe()})}},e.prototype._toObservable=function(){var r=this;function t(n){return new Cr.Observable(function(o){o.next(n),o.complete()})}return new Cr.Observable(function(n){r._result.subscribe({complete:function(){return n.complete()},next:function(o){return n.next(new e(t(o)),r._state)},error:function(o){return n.error(o)}})})},e.prototype._setupRecordsStream=function(r){var t=this;return this._records?this._records:(this._records=VL(r[Symbol.asyncIterator](),{complete:function(){return vn(t,void 0,void 0,function(){var n,o;return _n(this,function(i){switch(i.label){case 0:return this._state=To.COMPLETED,o=(n=this._summary).next,[4,r.summary()];case 1:return o.apply(n,[i.sent()]),this._summary.complete(),[2]}})})},error:function(n){t._state=To.COMPLETED,t._summary.error(n)}},this._controls),this._records)},e}();ro.default=WL;function VL(e,r,t){var n=this;t===void 0&&(t=new Bm);var o=new Cr.Subject,i=function(s){return vn(n,void 0,void 0,function(){var c,u,l,h;return _n(this,function(_){switch(_.label){case 0:return _.trys.push([0,2,3,4]),t.pushing=!0,[4,s];case 1:return c=_.sent(),u=c.done,l=c.value,u?(o.complete(),r.complete()):(o.next(l),t.paused||i(e.next()).catch(function(){})),[3,4];case 2:return h=_.sent(),o.error(h),r.error(h),[3,4];case 3:return t.pushing=!1,[7];case 4:return[2]}})})};function a(s){return vn(this,void 0,void 0,function(){return _n(this,function(c){switch(c.label){case 0:return[4,i(e.next(s))];case 1:return c.sent(),[2]}})})}return t.pusher=a,a(),o}var Bm=function(){function e(r){r===void 0&&(r=function(){return vn(t,void 0,void 0,function(){return _n(this,function(n){return[2]})})});var t=this;this._paused=!1,this._pushing=!1,this._push=r}return e.prototype.pause=function(){this._paused=!0},Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pushing",{get:function(){return this._pushing},set:function(r){this._pushing=r},enumerable:!1,configurable:!0}),e.prototype.resume=function(){return vn(this,void 0,void 0,function(){var r;return _n(this,function(t){switch(t.label){case 0:return r=this._paused,this._paused=!1,r&&!this._pushing?[4,this._push()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.push=function(){return vn(this,void 0,void 0,function(){return _n(this,function(r){switch(r.label){case 0:return this.pause(),[4,this._push()];case 1:return[2,r.sent()]}})})},Object.defineProperty(e.prototype,"pusher",{get:function(){return this._push},set:function(r){this._push=r},enumerable:!1,configurable:!0}),e}(),Za={},xm=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Za,"__esModule",{value:!0});var vu=ti,qL=xm(ro);xm(H);var HL=function(){function e(r){this._txc=r}return e.prototype.run=function(r,t){var n=this;return new qL.default(new vu.Observable(function(o){try{o.next(n._txc.run(r,t)),o.complete()}catch(i){o.error(i)}return function(){}}))},e.prototype.commit=function(){var r=this;return new vu.Observable(function(t){r._txc.commit().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype.rollback=function(){var r=this;return new vu.Observable(function(t){r._txc.rollback().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype.isOpen=function(){return this._txc.isOpen()},e.prototype.close=function(){var r=this;return new vu.Observable(function(t){r._txc.close().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e}();Za.default=HL;var Ks={},Wm=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ks,"__esModule",{value:!0});Wm(ro);Wm(Za);var zL=function(){function e(r){var t=r.run;this._run=t}return e.fromTransaction=function(r){return new e({run:r.run.bind(r)})},e.prototype.run=function(r,t){return this._run(r,t)},e}();Ks.default=zL;var hd={};Object.defineProperty(hd,"__esModule",{value:!0});var Vu=H,Ql=ti,Xl=zs;Vu.internal.logger.Logger;var YL=Vu.error.SERVICE_UNAVAILABLE,xv=30*1e3,Wv=1e3,Vv=2,qv=.2,GL=function(){function e(r){var t=r===void 0?{}:r,n=t.maxRetryTimeout,o=n===void 0?xv:n,i=t.initialDelay,a=i===void 0?Wv:i,s=t.delayMultiplier,c=s===void 0?Vv:s,u=t.delayJitter,l=u===void 0?qv:u,h=t.logger,_=h===void 0?null:h;this._maxRetryTimeout=_u(o,xv),this._initialDelay=_u(a,Wv),this._delayMultiplier=_u(c,Vv),this._delayJitter=_u(l,qv),this._logger=_}return e.prototype.retry=function(r){var t=this;return r.pipe((0,Xl.retryWhen)(function(n){var o=[],i=Date.now(),a=1,s=t._initialDelay;return n.pipe((0,Xl.mergeMap)(function(c){if(!(0,Vu.isRetriableError)(c))return(0,Ql.throwError)(function(){return c});if(o.push(c),a>=2&&Date.now()-i>=t._maxRetryTimeout){var u=(0,Vu.newError)("Failed after retried for ".concat(a," times in ").concat(t._maxRetryTimeout," ms. Make sure that your database is online and retry again."),YL);return u.seenErrors=o,(0,Ql.throwError)(function(){return u})}var l=t._computeNextDelay(s);return s=s*t._delayMultiplier,a++,t._logger&&t._logger.warn("Transaction failed and will be retried in ".concat(l)),(0,Ql.of)(1).pipe((0,Xl.delay)(l))}))}))},e.prototype._computeNextDelay=function(r){var t=r*this._delayJitter;return r-t+2*t*Math.random()},e}();hd.default=GL;function _u(e,r){return e||e===0?e:r}var Zs=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hs,"__esModule",{value:!0});var Er=ti,So=zs,KL=Zs(ro),Vm=H,ZL=Zs(Za),QL=Zs(Ks),XL=Zs(hd),vd=Vm.internal.constants,Hv=vd.ACCESS_MODE_READ,zv=vd.ACCESS_MODE_WRITE,Yv=vd.TELEMETRY_APIS,pu=Vm.internal.txConfig.TxConfig,JL=function(){function e(r){var t=r===void 0?{}:r,n=t.session,o=t.config,i=t.log;this._session=n,this._retryLogic=e2(o),this._log=i}return e.prototype.run=function(r,t,n){var o=this;return new KL.default(new Er.Observable(function(i){try{i.next(o._session.run(r,t,n)),i.complete()}catch(a){i.error(a)}return function(){}}))},e.prototype.beginTransaction=function(r){return this._beginTransaction(this._session._mode,r,{api:Yv.UNMANAGED_TRANSACTION})},e.prototype.readTransaction=function(r,t){return this._runTransaction(Hv,r,t)},e.prototype.writeTransaction=function(r,t){return this._runTransaction(zv,r,t)},e.prototype.executeRead=function(r,t){return this._executeInTransaction(Hv,r,t)},e.prototype.executeWrite=function(r,t){return this._executeInTransaction(zv,r,t)},e.prototype._executeInTransaction=function(r,t,n){var o=function(i){return new QL.default({run:i.run.bind(i)})};return this._runTransaction(r,t,n,o)},e.prototype.close=function(){var r=this;return new Er.Observable(function(t){r._session.close().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype.lastBookmark=function(){return this.lastBookmarks()},e.prototype.lastBookmarks=function(){return this._session.lastBookmarks()},e.prototype._beginTransaction=function(r,t,n){var o=this,i=pu.empty();return t&&(i=new pu(t,this._log)),new Er.Observable(function(a){try{o._session._beginTransaction(r,i,n).then(function(s){a.next(new ZL.default(s)),a.complete()}).catch(function(s){return a.error(s)})}catch(s){a.error(s)}return function(){}})},e.prototype._runTransaction=function(r,t,n,o){var i=this;o===void 0&&(o=function(c){return c});var a=pu.empty();n&&(a=new pu(n));var s={apiTelemetryConfig:{api:Yv.MANAGED_TRANSACTION,onTelemetrySuccess:function(){s.apiTelemetryConfig=void 0}}};return this._retryLogic.retry((0,Er.of)(1).pipe((0,So.mergeMap)(function(){return i._beginTransaction(r,a,s.apiTelemetryConfig)}),(0,So.mergeMap)(function(c){return(0,Er.defer)(function(){try{return t(o(c))}catch(u){return(0,Er.throwError)(function(){return u})}}).pipe((0,So.catchError)(function(u){return c.rollback().pipe((0,So.concatWith)((0,Er.throwError)(function(){return u})))}),(0,So.concatWith)(c.commit()))})))},e}();hs.default=JL;function e2(e){var r=e&&e.maxTransactionRetryTime?e.maxTransactionRetryTime:null;return new XL.default({maxRetryTimeout:r})}var t2=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),r2=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.WRITE=Rt.READ=Rt.Driver=void 0;var Qs=H,n2=r2(hs),Gv=Qs.internal.constants.FETCH_ALL,o2=Qs.driver.READ,qm=Qs.driver.WRITE;Rt.READ=o2;Rt.WRITE=qm;var Hm=function(e){t2(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.rxSession=function(t){var n=t===void 0?{}:t,o=n.defaultAccessMode,i=o===void 0?qm:o,a=n.bookmarks,s=n.database,c=s===void 0?"":s,u=n.fetchSize,l=n.impersonatedUser,h=n.bookmarkManager,_=n.notificationFilter,y=n.auth;return new n2.default({session:this._newSession({defaultAccessMode:i,bookmarkOrBookmarks:a,database:c,impersonatedUser:l,auth:y,reactive:!1,fetchSize:i2(u,this._config.fetchSize),bookmarkManager:h,notificationFilter:_,log:this._log}),config:this._config,log:this._log})},r}(Qs.Driver);Rt.Driver=Hm;function i2(e,r){var t=parseInt(e,10);if(t>0||t===Gv)return t;if(t===0||t<0)throw new Error("The fetch size can only be a positive value or ".concat(Gv," for ALL. However fetchSize = ").concat(t));return r}Rt.default=Hm;var _d={};Object.defineProperty(_d,"__esModule",{value:!0});_d.default="5.17.0";var zm={},Qt={},Xs={};Object.defineProperty(Xs,"__esModule",{value:!0});var a2=function(){function e(){}return e.prototype.selectReader=function(r){throw new Error("Abstract function")},e.prototype.selectWriter=function(r){throw new Error("Abstract function")},e}();Xs.default=a2;var pd={},md={};Object.defineProperty(md,"__esModule",{value:!0});var u2=function(){function e(r){this._offset=r||0}return e.prototype.next=function(r){if(r===0)return-1;var t=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),t%r},e}();md.default=u2;var s2=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ym=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pd,"__esModule",{value:!0});var Kv=Ym(md),c2=Ym(Xs),l2=function(e){s2(r,e);function r(t){var n=e.call(this)||this;return n._readersIndex=new Kv.default,n._writersIndex=new Kv.default,n._connectionPool=t,n}return r.prototype.selectReader=function(t){return this._select(t,this._readersIndex)},r.prototype.selectWriter=function(t){return this._select(t,this._writersIndex)},r.prototype._select=function(t,n){var o=t.length;if(o===0)return null;var i=n.next(o),a=i,s=null,c=Number.MAX_SAFE_INTEGER;do{var u=t[a],l=this._connectionPool.activeResourceCount(u);l<c&&(s=u,c=l),a===o-1?a=0:a++}while(a!==i);return s},r}(c2.default);pd.default=l2;var Gm=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.LeastConnectedLoadBalancingStrategy=Qt.LoadBalancingStrategy=void 0;var f2=Gm(Xs);Qt.LoadBalancingStrategy=f2.default;var Km=Gm(pd);Qt.LeastConnectedLoadBalancingStrategy=Km.default;Qt.default=Km.default;var yd={},bd={},no={},On={},gd={},Lt={},Js={},ec={};ec.byteLength=v2;ec.toByteArray=p2;ec.fromByteArray=b2;var yt=[],rt=[],d2=typeof Uint8Array<"u"?Uint8Array:Array,Jl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var an=0,h2=Jl.length;an<h2;++an)yt[an]=Jl[an],rt[Jl.charCodeAt(an)]=an;rt["-".charCodeAt(0)]=62;rt["_".charCodeAt(0)]=63;function Zm(e){var r=e.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=e.indexOf("=");t===-1&&(t=r);var n=t===r?0:4-t%4;return[t,n]}function v2(e){var r=Zm(e),t=r[0],n=r[1];return(t+n)*3/4-n}function _2(e,r,t){return(r+t)*3/4-t}function p2(e){var r,t=Zm(e),n=t[0],o=t[1],i=new d2(_2(e,n,o)),a=0,s=o>0?n-4:n,c;for(c=0;c<s;c+=4)r=rt[e.charCodeAt(c)]<<18|rt[e.charCodeAt(c+1)]<<12|rt[e.charCodeAt(c+2)]<<6|rt[e.charCodeAt(c+3)],i[a++]=r>>16&255,i[a++]=r>>8&255,i[a++]=r&255;return o===2&&(r=rt[e.charCodeAt(c)]<<2|rt[e.charCodeAt(c+1)]>>4,i[a++]=r&255),o===1&&(r=rt[e.charCodeAt(c)]<<10|rt[e.charCodeAt(c+1)]<<4|rt[e.charCodeAt(c+2)]>>2,i[a++]=r>>8&255,i[a++]=r&255),i}function m2(e){return yt[e>>18&63]+yt[e>>12&63]+yt[e>>6&63]+yt[e&63]}function y2(e,r,t){for(var n,o=[],i=r;i<t;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),o.push(m2(n));return o.join("")}function b2(e){for(var r,t=e.length,n=t%3,o=[],i=16383,a=0,s=t-n;a<s;a+=i)o.push(y2(e,a,a+i>s?s:a+i));return n===1?(r=e[t-1],o.push(yt[r>>2]+yt[r<<4&63]+"==")):n===2&&(r=(e[t-2]<<8)+e[t-1],o.push(yt[r>>10]+yt[r>>4&63]+yt[r<<2&63]+"=")),o.join("")}var Od={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Od.read=function(e,r,t,n,o){var i,a,s=o*8-n-1,c=(1<<s)-1,u=c>>1,l=-7,h=t?o-1:0,_=t?-1:1,y=e[r+h];for(h+=_,i=y&(1<<-l)-1,y>>=-l,l+=s;l>0;i=i*256+e[r+h],h+=_,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=n;l>0;a=a*256+e[r+h],h+=_,l-=8);if(i===0)i=1-u;else{if(i===c)return a?NaN:(y?-1:1)*(1/0);a=a+Math.pow(2,n),i=i-u}return(y?-1:1)*a*Math.pow(2,i-n)};Od.write=function(e,r,t,n,o,i){var a,s,c,u=i*8-o-1,l=(1<<u)-1,h=l>>1,_=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:i-1,b=n?1:-1,O=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(s=isNaN(r)?1:0,a=l):(a=Math.floor(Math.log(r)/Math.LN2),r*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+h>=1?r+=_/c:r+=_*Math.pow(2,1-h),r*c>=2&&(a++,c/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(r*c-1)*Math.pow(2,o),a=a+h):(s=r*Math.pow(2,h-1)*Math.pow(2,o),a=0));o>=8;e[t+y]=s&255,y+=b,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;e[t+y]=a&255,y+=b,a/=256,u-=8);e[t+y-b]|=O*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const r=ec,t=Od,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=j,e.INSPECT_MAX_BYTES=50;const o=2147483647;e.kMaxLength=o,s.TYPED_ARRAY_SUPPORT=i(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const p=new Uint8Array(1),d={foo:function(){return 42}};return Object.setPrototypeOf(d,Uint8Array.prototype),Object.setPrototypeOf(p,d),p.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function a(p){if(p>o)throw new RangeError('The value "'+p+'" is invalid for option "size"');const d=new Uint8Array(p);return Object.setPrototypeOf(d,s.prototype),d}function s(p,d,v){if(typeof p=="number"){if(typeof d=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(p)}return c(p,d,v)}s.poolSize=8192;function c(p,d,v){if(typeof p=="string")return _(p,d);if(ArrayBuffer.isView(p))return b(p);if(p==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p);if(Ge(p,ArrayBuffer)||p&&Ge(p.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ge(p,SharedArrayBuffer)||p&&Ge(p.buffer,SharedArrayBuffer)))return O(p,d,v);if(typeof p=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const m=p.valueOf&&p.valueOf();if(m!=null&&m!==p)return s.from(m,d,v);const g=P(p);if(g)return g;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof p[Symbol.toPrimitive]=="function")return s.from(p[Symbol.toPrimitive]("string"),d,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p)}s.from=function(p,d,v){return c(p,d,v)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function u(p){if(typeof p!="number")throw new TypeError('"size" argument must be of type number');if(p<0)throw new RangeError('The value "'+p+'" is invalid for option "size"')}function l(p,d,v){return u(p),p<=0?a(p):d!==void 0?typeof v=="string"?a(p).fill(d,v):a(p).fill(d):a(p)}s.alloc=function(p,d,v){return l(p,d,v)};function h(p){return u(p),a(p<0?0:I(p)|0)}s.allocUnsafe=function(p){return h(p)},s.allocUnsafeSlow=function(p){return h(p)};function _(p,d){if((typeof d!="string"||d==="")&&(d="utf8"),!s.isEncoding(d))throw new TypeError("Unknown encoding: "+d);const v=S(p,d)|0;let m=a(v);const g=m.write(p,d);return g!==v&&(m=m.slice(0,g)),m}function y(p){const d=p.length<0?0:I(p.length)|0,v=a(d);for(let m=0;m<d;m+=1)v[m]=p[m]&255;return v}function b(p){if(Ge(p,Uint8Array)){const d=new Uint8Array(p);return O(d.buffer,d.byteOffset,d.byteLength)}return y(p)}function O(p,d,v){if(d<0||p.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(p.byteLength<d+(v||0))throw new RangeError('"length" is outside of buffer bounds');let m;return d===void 0&&v===void 0?m=new Uint8Array(p):v===void 0?m=new Uint8Array(p,d):m=new Uint8Array(p,d,v),Object.setPrototypeOf(m,s.prototype),m}function P(p){if(s.isBuffer(p)){const d=I(p.length)|0,v=a(d);return v.length===0||p.copy(v,0,0,d),v}if(p.length!==void 0)return typeof p.length!="number"||_r(p.length)?a(0):y(p);if(p.type==="Buffer"&&Array.isArray(p.data))return y(p.data)}function I(p){if(p>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return p|0}function j(p){return+p!=p&&(p=0),s.alloc(+p)}s.isBuffer=function(d){return d!=null&&d._isBuffer===!0&&d!==s.prototype},s.compare=function(d,v){if(Ge(d,Uint8Array)&&(d=s.from(d,d.offset,d.byteLength)),Ge(v,Uint8Array)&&(v=s.from(v,v.offset,v.byteLength)),!s.isBuffer(d)||!s.isBuffer(v))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(d===v)return 0;let m=d.length,g=v.length;for(let w=0,C=Math.min(m,g);w<C;++w)if(d[w]!==v[w]){m=d[w],g=v[w];break}return m<g?-1:g<m?1:0},s.isEncoding=function(d){switch(String(d).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(d,v){if(!Array.isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(d.length===0)return s.alloc(0);let m;if(v===void 0)for(v=0,m=0;m<d.length;++m)v+=d[m].length;const g=s.allocUnsafe(v);let w=0;for(m=0;m<d.length;++m){let C=d[m];if(Ge(C,Uint8Array))w+C.length>g.length?(s.isBuffer(C)||(C=s.from(C)),C.copy(g,w)):Uint8Array.prototype.set.call(g,C,w);else if(s.isBuffer(C))C.copy(g,w);else throw new TypeError('"list" argument must be an Array of Buffers');w+=C.length}return g};function S(p,d){if(s.isBuffer(p))return p.length;if(ArrayBuffer.isView(p)||Ge(p,ArrayBuffer))return p.byteLength;if(typeof p!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof p);const v=p.length,m=arguments.length>2&&arguments[2]===!0;if(!m&&v===0)return 0;let g=!1;for(;;)switch(d){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return vr(p).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v*2;case"hex":return v>>>1;case"base64":return en(p).length;default:if(g)return m?-1:vr(p).length;d=(""+d).toLowerCase(),g=!0}}s.byteLength=S;function A(p,d,v){let m=!1;if((d===void 0||d<0)&&(d=0),d>this.length||((v===void 0||v>this.length)&&(v=this.length),v<=0)||(v>>>=0,d>>>=0,v<=d))return"";for(p||(p="utf8");;)switch(p){case"hex":return Y(this,d,v);case"utf8":case"utf-8":return X(this,d,v);case"ascii":return $(this,d,v);case"latin1":case"binary":return q(this,d,v);case"base64":return me(this,d,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,d,v);default:if(m)throw new TypeError("Unknown encoding: "+p);p=(p+"").toLowerCase(),m=!0}}s.prototype._isBuffer=!0;function T(p,d,v){const m=p[d];p[d]=p[v],p[v]=m}s.prototype.swap16=function(){const d=this.length;if(d%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let v=0;v<d;v+=2)T(this,v,v+1);return this},s.prototype.swap32=function(){const d=this.length;if(d%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let v=0;v<d;v+=4)T(this,v,v+3),T(this,v+1,v+2);return this},s.prototype.swap64=function(){const d=this.length;if(d%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let v=0;v<d;v+=8)T(this,v,v+7),T(this,v+1,v+6),T(this,v+2,v+5),T(this,v+3,v+4);return this},s.prototype.toString=function(){const d=this.length;return d===0?"":arguments.length===0?X(this,0,d):A.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(d){if(!s.isBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d?!0:s.compare(this,d)===0},s.prototype.inspect=function(){let d="";const v=e.INSPECT_MAX_BYTES;return d=this.toString("hex",0,v).replace(/(.{2})/g,"$1 ").trim(),this.length>v&&(d+=" ... "),"<Buffer "+d+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(d,v,m,g,w){if(Ge(d,Uint8Array)&&(d=s.from(d,d.offset,d.byteLength)),!s.isBuffer(d))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof d);if(v===void 0&&(v=0),m===void 0&&(m=d?d.length:0),g===void 0&&(g=0),w===void 0&&(w=this.length),v<0||m>d.length||g<0||w>this.length)throw new RangeError("out of range index");if(g>=w&&v>=m)return 0;if(g>=w)return-1;if(v>=m)return 1;if(v>>>=0,m>>>=0,g>>>=0,w>>>=0,this===d)return 0;let C=w-g,J=m-v;const ve=Math.min(C,J),fe=this.slice(g,w),_e=d.slice(v,m);for(let ue=0;ue<ve;++ue)if(fe[ue]!==_e[ue]){C=fe[ue],J=_e[ue];break}return C<J?-1:J<C?1:0};function F(p,d,v,m,g){if(p.length===0)return-1;if(typeof v=="string"?(m=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),v=+v,_r(v)&&(v=g?0:p.length-1),v<0&&(v=p.length+v),v>=p.length){if(g)return-1;v=p.length-1}else if(v<0)if(g)v=0;else return-1;if(typeof d=="string"&&(d=s.from(d,m)),s.isBuffer(d))return d.length===0?-1:z(p,d,v,m,g);if(typeof d=="number")return d=d&255,typeof Uint8Array.prototype.indexOf=="function"?g?Uint8Array.prototype.indexOf.call(p,d,v):Uint8Array.prototype.lastIndexOf.call(p,d,v):z(p,[d],v,m,g);throw new TypeError("val must be string, number or Buffer")}function z(p,d,v,m,g){let w=1,C=p.length,J=d.length;if(m!==void 0&&(m=String(m).toLowerCase(),m==="ucs2"||m==="ucs-2"||m==="utf16le"||m==="utf-16le")){if(p.length<2||d.length<2)return-1;w=2,C/=2,J/=2,v/=2}function ve(_e,ue){return w===1?_e[ue]:_e.readUInt16BE(ue*w)}let fe;if(g){let _e=-1;for(fe=v;fe<C;fe++)if(ve(p,fe)===ve(d,_e===-1?0:fe-_e)){if(_e===-1&&(_e=fe),fe-_e+1===J)return _e*w}else _e!==-1&&(fe-=fe-_e),_e=-1}else for(v+J>C&&(v=C-J),fe=v;fe>=0;fe--){let _e=!0;for(let ue=0;ue<J;ue++)if(ve(p,fe+ue)!==ve(d,ue)){_e=!1;break}if(_e)return fe}return-1}s.prototype.includes=function(d,v,m){return this.indexOf(d,v,m)!==-1},s.prototype.indexOf=function(d,v,m){return F(this,d,v,m,!0)},s.prototype.lastIndexOf=function(d,v,m){return F(this,d,v,m,!1)};function x(p,d,v,m){v=Number(v)||0;const g=p.length-v;m?(m=Number(m),m>g&&(m=g)):m=g;const w=d.length;m>w/2&&(m=w/2);let C;for(C=0;C<m;++C){const J=parseInt(d.substr(C*2,2),16);if(_r(J))return C;p[v+C]=J}return C}function re(p,d,v,m){return xt(vr(d,p.length-v),p,v,m)}function le(p,d,v,m){return xt(fo(d),p,v,m)}function be(p,d,v,m){return xt(en(d),p,v,m)}function ne(p,d,v,m){return xt(ho(d,p.length-v),p,v,m)}s.prototype.write=function(d,v,m,g){if(v===void 0)g="utf8",m=this.length,v=0;else if(m===void 0&&typeof v=="string")g=v,m=this.length,v=0;else if(isFinite(v))v=v>>>0,isFinite(m)?(m=m>>>0,g===void 0&&(g="utf8")):(g=m,m=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const w=this.length-v;if((m===void 0||m>w)&&(m=w),d.length>0&&(m<0||v<0)||v>this.length)throw new RangeError("Attempt to write outside buffer bounds");g||(g="utf8");let C=!1;for(;;)switch(g){case"hex":return x(this,d,v,m);case"utf8":case"utf-8":return re(this,d,v,m);case"ascii":case"latin1":case"binary":return le(this,d,v,m);case"base64":return be(this,d,v,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,d,v,m);default:if(C)throw new TypeError("Unknown encoding: "+g);g=(""+g).toLowerCase(),C=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function me(p,d,v){return d===0&&v===p.length?r.fromByteArray(p):r.fromByteArray(p.slice(d,v))}function X(p,d,v){v=Math.min(p.length,v);const m=[];let g=d;for(;g<v;){const w=p[g];let C=null,J=w>239?4:w>223?3:w>191?2:1;if(g+J<=v){let ve,fe,_e,ue;switch(J){case 1:w<128&&(C=w);break;case 2:ve=p[g+1],(ve&192)===128&&(ue=(w&31)<<6|ve&63,ue>127&&(C=ue));break;case 3:ve=p[g+1],fe=p[g+2],(ve&192)===128&&(fe&192)===128&&(ue=(w&15)<<12|(ve&63)<<6|fe&63,ue>2047&&(ue<55296||ue>57343)&&(C=ue));break;case 4:ve=p[g+1],fe=p[g+2],_e=p[g+3],(ve&192)===128&&(fe&192)===128&&(_e&192)===128&&(ue=(w&15)<<18|(ve&63)<<12|(fe&63)<<6|_e&63,ue>65535&&ue<1114112&&(C=ue))}}C===null?(C=65533,J=1):C>65535&&(C-=65536,m.push(C>>>10&1023|55296),C=56320|C&1023),m.push(C),g+=J}return K(m)}const U=4096;function K(p){const d=p.length;if(d<=U)return String.fromCharCode.apply(String,p);let v="",m=0;for(;m<d;)v+=String.fromCharCode.apply(String,p.slice(m,m+=U));return v}function $(p,d,v){let m="";v=Math.min(p.length,v);for(let g=d;g<v;++g)m+=String.fromCharCode(p[g]&127);return m}function q(p,d,v){let m="";v=Math.min(p.length,v);for(let g=d;g<v;++g)m+=String.fromCharCode(p[g]);return m}function Y(p,d,v){const m=p.length;(!d||d<0)&&(d=0),(!v||v<0||v>m)&&(v=m);let g="";for(let w=d;w<v;++w)g+=vo[p[w]];return g}function D(p,d,v){const m=p.slice(d,v);let g="";for(let w=0;w<m.length-1;w+=2)g+=String.fromCharCode(m[w]+m[w+1]*256);return g}s.prototype.slice=function(d,v){const m=this.length;d=~~d,v=v===void 0?m:~~v,d<0?(d+=m,d<0&&(d=0)):d>m&&(d=m),v<0?(v+=m,v<0&&(v=0)):v>m&&(v=m),v<d&&(v=d);const g=this.subarray(d,v);return Object.setPrototypeOf(g,s.prototype),g};function N(p,d,v){if(p%1!==0||p<0)throw new RangeError("offset is not uint");if(p+d>v)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(d,v,m){d=d>>>0,v=v>>>0,m||N(d,v,this.length);let g=this[d],w=1,C=0;for(;++C<v&&(w*=256);)g+=this[d+C]*w;return g},s.prototype.readUintBE=s.prototype.readUIntBE=function(d,v,m){d=d>>>0,v=v>>>0,m||N(d,v,this.length);let g=this[d+--v],w=1;for(;v>0&&(w*=256);)g+=this[d+--v]*w;return g},s.prototype.readUint8=s.prototype.readUInt8=function(d,v){return d=d>>>0,v||N(d,1,this.length),this[d]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(d,v){return d=d>>>0,v||N(d,2,this.length),this[d]|this[d+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(d,v){return d=d>>>0,v||N(d,2,this.length),this[d]<<8|this[d+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(d,v){return d=d>>>0,v||N(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+this[d+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(d,v){return d=d>>>0,v||N(d,4,this.length),this[d]*16777216+(this[d+1]<<16|this[d+2]<<8|this[d+3])},s.prototype.readBigUInt64LE=tt(function(d){d=d>>>0,Ye(d,"offset");const v=this[d],m=this[d+7];(v===void 0||m===void 0)&&it(d,this.length-8);const g=v+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24,w=this[++d]+this[++d]*2**8+this[++d]*2**16+m*2**24;return BigInt(g)+(BigInt(w)<<BigInt(32))}),s.prototype.readBigUInt64BE=tt(function(d){d=d>>>0,Ye(d,"offset");const v=this[d],m=this[d+7];(v===void 0||m===void 0)&&it(d,this.length-8);const g=v*2**24+this[++d]*2**16+this[++d]*2**8+this[++d],w=this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+m;return(BigInt(g)<<BigInt(32))+BigInt(w)}),s.prototype.readIntLE=function(d,v,m){d=d>>>0,v=v>>>0,m||N(d,v,this.length);let g=this[d],w=1,C=0;for(;++C<v&&(w*=256);)g+=this[d+C]*w;return w*=128,g>=w&&(g-=Math.pow(2,8*v)),g},s.prototype.readIntBE=function(d,v,m){d=d>>>0,v=v>>>0,m||N(d,v,this.length);let g=v,w=1,C=this[d+--g];for(;g>0&&(w*=256);)C+=this[d+--g]*w;return w*=128,C>=w&&(C-=Math.pow(2,8*v)),C},s.prototype.readInt8=function(d,v){return d=d>>>0,v||N(d,1,this.length),this[d]&128?(255-this[d]+1)*-1:this[d]},s.prototype.readInt16LE=function(d,v){d=d>>>0,v||N(d,2,this.length);const m=this[d]|this[d+1]<<8;return m&32768?m|4294901760:m},s.prototype.readInt16BE=function(d,v){d=d>>>0,v||N(d,2,this.length);const m=this[d+1]|this[d]<<8;return m&32768?m|4294901760:m},s.prototype.readInt32LE=function(d,v){return d=d>>>0,v||N(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24},s.prototype.readInt32BE=function(d,v){return d=d>>>0,v||N(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]},s.prototype.readBigInt64LE=tt(function(d){d=d>>>0,Ye(d,"offset");const v=this[d],m=this[d+7];(v===void 0||m===void 0)&&it(d,this.length-8);const g=this[d+4]+this[d+5]*2**8+this[d+6]*2**16+(m<<24);return(BigInt(g)<<BigInt(32))+BigInt(v+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24)}),s.prototype.readBigInt64BE=tt(function(d){d=d>>>0,Ye(d,"offset");const v=this[d],m=this[d+7];(v===void 0||m===void 0)&&it(d,this.length-8);const g=(v<<24)+this[++d]*2**16+this[++d]*2**8+this[++d];return(BigInt(g)<<BigInt(32))+BigInt(this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+m)}),s.prototype.readFloatLE=function(d,v){return d=d>>>0,v||N(d,4,this.length),t.read(this,d,!0,23,4)},s.prototype.readFloatBE=function(d,v){return d=d>>>0,v||N(d,4,this.length),t.read(this,d,!1,23,4)},s.prototype.readDoubleLE=function(d,v){return d=d>>>0,v||N(d,8,this.length),t.read(this,d,!0,52,8)},s.prototype.readDoubleBE=function(d,v){return d=d>>>0,v||N(d,8,this.length),t.read(this,d,!1,52,8)};function Z(p,d,v,m,g,w){if(!s.isBuffer(p))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>g||d<w)throw new RangeError('"value" argument is out of bounds');if(v+m>p.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(d,v,m,g){if(d=+d,v=v>>>0,m=m>>>0,!g){const J=Math.pow(2,8*m)-1;Z(this,d,v,m,J,0)}let w=1,C=0;for(this[v]=d&255;++C<m&&(w*=256);)this[v+C]=d/w&255;return v+m},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(d,v,m,g){if(d=+d,v=v>>>0,m=m>>>0,!g){const J=Math.pow(2,8*m)-1;Z(this,d,v,m,J,0)}let w=m-1,C=1;for(this[v+w]=d&255;--w>=0&&(C*=256);)this[v+w]=d/C&255;return v+m},s.prototype.writeUint8=s.prototype.writeUInt8=function(d,v,m){return d=+d,v=v>>>0,m||Z(this,d,v,1,255,0),this[v]=d&255,v+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(d,v,m){return d=+d,v=v>>>0,m||Z(this,d,v,2,65535,0),this[v]=d&255,this[v+1]=d>>>8,v+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(d,v,m){return d=+d,v=v>>>0,m||Z(this,d,v,2,65535,0),this[v]=d>>>8,this[v+1]=d&255,v+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(d,v,m){return d=+d,v=v>>>0,m||Z(this,d,v,4,4294967295,0),this[v+3]=d>>>24,this[v+2]=d>>>16,this[v+1]=d>>>8,this[v]=d&255,v+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(d,v,m){return d=+d,v=v>>>0,m||Z(this,d,v,4,4294967295,0),this[v]=d>>>24,this[v+1]=d>>>16,this[v+2]=d>>>8,this[v+3]=d&255,v+4};function ge(p,d,v,m,g){ze(d,m,g,p,v,7);let w=Number(d&BigInt(4294967295));p[v++]=w,w=w>>8,p[v++]=w,w=w>>8,p[v++]=w,w=w>>8,p[v++]=w;let C=Number(d>>BigInt(32)&BigInt(4294967295));return p[v++]=C,C=C>>8,p[v++]=C,C=C>>8,p[v++]=C,C=C>>8,p[v++]=C,v}function W(p,d,v,m,g){ze(d,m,g,p,v,7);let w=Number(d&BigInt(4294967295));p[v+7]=w,w=w>>8,p[v+6]=w,w=w>>8,p[v+5]=w,w=w>>8,p[v+4]=w;let C=Number(d>>BigInt(32)&BigInt(4294967295));return p[v+3]=C,C=C>>8,p[v+2]=C,C=C>>8,p[v+1]=C,C=C>>8,p[v]=C,v+8}s.prototype.writeBigUInt64LE=tt(function(d,v=0){return ge(this,d,v,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=tt(function(d,v=0){return W(this,d,v,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(d,v,m,g){if(d=+d,v=v>>>0,!g){const ve=Math.pow(2,8*m-1);Z(this,d,v,m,ve-1,-ve)}let w=0,C=1,J=0;for(this[v]=d&255;++w<m&&(C*=256);)d<0&&J===0&&this[v+w-1]!==0&&(J=1),this[v+w]=(d/C>>0)-J&255;return v+m},s.prototype.writeIntBE=function(d,v,m,g){if(d=+d,v=v>>>0,!g){const ve=Math.pow(2,8*m-1);Z(this,d,v,m,ve-1,-ve)}let w=m-1,C=1,J=0;for(this[v+w]=d&255;--w>=0&&(C*=256);)d<0&&J===0&&this[v+w+1]!==0&&(J=1),this[v+w]=(d/C>>0)-J&255;return v+m},s.prototype.writeInt8=function(d,v,m){return d=+d,v=v>>>0,m||Z(this,d,v,1,127,-128),d<0&&(d=255+d+1),this[v]=d&255,v+1},s.prototype.writeInt16LE=function(d,v,m){return d=+d,v=v>>>0,m||Z(this,d,v,2,32767,-32768),this[v]=d&255,this[v+1]=d>>>8,v+2},s.prototype.writeInt16BE=function(d,v,m){return d=+d,v=v>>>0,m||Z(this,d,v,2,32767,-32768),this[v]=d>>>8,this[v+1]=d&255,v+2},s.prototype.writeInt32LE=function(d,v,m){return d=+d,v=v>>>0,m||Z(this,d,v,4,2147483647,-2147483648),this[v]=d&255,this[v+1]=d>>>8,this[v+2]=d>>>16,this[v+3]=d>>>24,v+4},s.prototype.writeInt32BE=function(d,v,m){return d=+d,v=v>>>0,m||Z(this,d,v,4,2147483647,-2147483648),d<0&&(d=4294967295+d+1),this[v]=d>>>24,this[v+1]=d>>>16,this[v+2]=d>>>8,this[v+3]=d&255,v+4},s.prototype.writeBigInt64LE=tt(function(d,v=0){return ge(this,d,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=tt(function(d,v=0){return W(this,d,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function oe(p,d,v,m,g,w){if(v+m>p.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function E(p,d,v,m,g){return d=+d,v=v>>>0,g||oe(p,d,v,4),t.write(p,d,v,m,23,4),v+4}s.prototype.writeFloatLE=function(d,v,m){return E(this,d,v,!0,m)},s.prototype.writeFloatBE=function(d,v,m){return E(this,d,v,!1,m)};function R(p,d,v,m,g){return d=+d,v=v>>>0,g||oe(p,d,v,8),t.write(p,d,v,m,52,8),v+8}s.prototype.writeDoubleLE=function(d,v,m){return R(this,d,v,!0,m)},s.prototype.writeDoubleBE=function(d,v,m){return R(this,d,v,!1,m)},s.prototype.copy=function(d,v,m,g){if(!s.isBuffer(d))throw new TypeError("argument should be a Buffer");if(m||(m=0),!g&&g!==0&&(g=this.length),v>=d.length&&(v=d.length),v||(v=0),g>0&&g<m&&(g=m),g===m||d.length===0||this.length===0)return 0;if(v<0)throw new RangeError("targetStart out of bounds");if(m<0||m>=this.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("sourceEnd out of bounds");g>this.length&&(g=this.length),d.length-v<g-m&&(g=d.length-v+m);const w=g-m;return this===d&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(v,m,g):Uint8Array.prototype.set.call(d,this.subarray(m,g),v),w},s.prototype.fill=function(d,v,m,g){if(typeof d=="string"){if(typeof v=="string"?(g=v,v=0,m=this.length):typeof m=="string"&&(g=m,m=this.length),g!==void 0&&typeof g!="string")throw new TypeError("encoding must be a string");if(typeof g=="string"&&!s.isEncoding(g))throw new TypeError("Unknown encoding: "+g);if(d.length===1){const C=d.charCodeAt(0);(g==="utf8"&&C<128||g==="latin1")&&(d=C)}}else typeof d=="number"?d=d&255:typeof d=="boolean"&&(d=Number(d));if(v<0||this.length<v||this.length<m)throw new RangeError("Out of range index");if(m<=v)return this;v=v>>>0,m=m===void 0?this.length:m>>>0,d||(d=0);let w;if(typeof d=="number")for(w=v;w<m;++w)this[w]=d;else{const C=s.isBuffer(d)?d:s.from(d,g),J=C.length;if(J===0)throw new TypeError('The value "'+d+'" is invalid for argument "value"');for(w=0;w<m-v;++w)this[w+v]=C[w%J]}return this};const M={};function B(p,d,v){M[p]=class extends v{constructor(){super(),Object.defineProperty(this,"message",{value:d.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${p}]`,this.stack,delete this.name}get code(){return p}set code(g){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:g,writable:!0})}toString(){return`${this.name} [${p}]: ${this.message}`}}}B("ERR_BUFFER_OUT_OF_BOUNDS",function(p){return p?`${p} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),B("ERR_INVALID_ARG_TYPE",function(p,d){return`The "${p}" argument must be of type number. Received type ${typeof d}`},TypeError),B("ERR_OUT_OF_RANGE",function(p,d,v){let m=`The value of "${p}" is out of range.`,g=v;return Number.isInteger(v)&&Math.abs(v)>2**32?g=ee(String(v)):typeof v=="bigint"&&(g=String(v),(v>BigInt(2)**BigInt(32)||v<-(BigInt(2)**BigInt(32)))&&(g=ee(g)),g+="n"),m+=` It must be ${d}. Received ${g}`,m},RangeError);function ee(p){let d="",v=p.length;const m=p[0]==="-"?1:0;for(;v>=m+4;v-=3)d=`_${p.slice(v-3,v)}${d}`;return`${p.slice(0,v)}${d}`}function Pe(p,d,v){Ye(d,"offset"),(p[d]===void 0||p[d+v]===void 0)&&it(d,p.length-(v+1))}function ze(p,d,v,m,g,w){if(p>v||p<d){const C=typeof d=="bigint"?"n":"";let J;throw w>3?d===0||d===BigInt(0)?J=`>= 0${C} and < 2${C} ** ${(w+1)*8}${C}`:J=`>= -(2${C} ** ${(w+1)*8-1}${C}) and < 2 ** ${(w+1)*8-1}${C}`:J=`>= ${d}${C} and <= ${v}${C}`,new M.ERR_OUT_OF_RANGE("value",J,p)}Pe(m,g,w)}function Ye(p,d){if(typeof p!="number")throw new M.ERR_INVALID_ARG_TYPE(d,"number",p)}function it(p,d,v){throw Math.floor(p)!==p?(Ye(p,v),new M.ERR_OUT_OF_RANGE(v||"offset","an integer",p)):d<0?new M.ERR_BUFFER_OUT_OF_BOUNDS:new M.ERR_OUT_OF_RANGE(v||"offset",`>= ${v?1:0} and <= ${d}`,p)}const co=/[^+/0-9A-Za-z-_]/g;function lo(p){if(p=p.split("=")[0],p=p.trim().replace(co,""),p.length<2)return"";for(;p.length%4!==0;)p=p+"=";return p}function vr(p,d){d=d||1/0;let v;const m=p.length;let g=null;const w=[];for(let C=0;C<m;++C){if(v=p.charCodeAt(C),v>55295&&v<57344){if(!g){if(v>56319){(d-=3)>-1&&w.push(239,191,189);continue}else if(C+1===m){(d-=3)>-1&&w.push(239,191,189);continue}g=v;continue}if(v<56320){(d-=3)>-1&&w.push(239,191,189),g=v;continue}v=(g-55296<<10|v-56320)+65536}else g&&(d-=3)>-1&&w.push(239,191,189);if(g=null,v<128){if((d-=1)<0)break;w.push(v)}else if(v<2048){if((d-=2)<0)break;w.push(v>>6|192,v&63|128)}else if(v<65536){if((d-=3)<0)break;w.push(v>>12|224,v>>6&63|128,v&63|128)}else if(v<1114112){if((d-=4)<0)break;w.push(v>>18|240,v>>12&63|128,v>>6&63|128,v&63|128)}else throw new Error("Invalid code point")}return w}function fo(p){const d=[];for(let v=0;v<p.length;++v)d.push(p.charCodeAt(v)&255);return d}function ho(p,d){let v,m,g;const w=[];for(let C=0;C<p.length&&!((d-=2)<0);++C)v=p.charCodeAt(C),m=v>>8,g=v%256,w.push(g),w.push(m);return w}function en(p){return r.toByteArray(lo(p))}function xt(p,d,v,m){let g;for(g=0;g<m&&!(g+v>=d.length||g>=p.length);++g)d[g+v]=p[g];return g}function Ge(p,d){return p instanceof d||p!=null&&p.constructor!=null&&p.constructor.name!=null&&p.constructor.name===d.name}function _r(p){return p!==p}const vo=function(){const p="0123456789abcdef",d=new Array(256);for(let v=0;v<16;++v){const m=v*16;for(let g=0;g<16;++g)d[m+g]=p[v]+p[g]}return d}();function tt(p){return typeof BigInt>"u"?_o:p}function _o(){throw new Error("BigInt not supported")}})(Js);var Xr={},tc={},g2=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(tc,"__esModule",{value:!0});var Qm=function(){function e(r){this.position=0,this.length=r}return e.prototype.getUInt8=function(r){throw new Error("Not implemented")},e.prototype.getInt8=function(r){throw new Error("Not implemented")},e.prototype.getFloat64=function(r){throw new Error("Not implemented")},e.prototype.putUInt8=function(r,t){throw new Error("Not implemented")},e.prototype.putInt8=function(r,t){throw new Error("Not implemented")},e.prototype.putFloat64=function(r,t){throw new Error("Not implemented")},e.prototype.getInt16=function(r){return this.getInt8(r)<<8|this.getUInt8(r+1)},e.prototype.getUInt16=function(r){return this.getUInt8(r)<<8|this.getUInt8(r+1)},e.prototype.getInt32=function(r){return this.getInt8(r)<<24|this.getUInt8(r+1)<<16|this.getUInt8(r+2)<<8|this.getUInt8(r+3)},e.prototype.getUInt32=function(r){return this.getUInt8(r)<<24|this.getUInt8(r+1)<<16|this.getUInt8(r+2)<<8|this.getUInt8(r+3)},e.prototype.getInt64=function(r){return this.getInt8(r)<<56|this.getUInt8(r+1)<<48|this.getUInt8(r+2)<<40|this.getUInt8(r+3)<<32|this.getUInt8(r+4)<<24|this.getUInt8(r+5)<<16|this.getUInt8(r+6)<<8|this.getUInt8(r+7)},e.prototype.getSlice=function(r,t){return new O2(r,t,this)},e.prototype.putInt16=function(r,t){this.putInt8(r,t>>8),this.putUInt8(r+1,t&255)},e.prototype.putUInt16=function(r,t){this.putUInt8(r,t>>8&255),this.putUInt8(r+1,t&255)},e.prototype.putInt32=function(r,t){this.putInt8(r,t>>24),this.putUInt8(r+1,t>>16&255),this.putUInt8(r+2,t>>8&255),this.putUInt8(r+3,t&255)},e.prototype.putUInt32=function(r,t){this.putUInt8(r,t>>24&255),this.putUInt8(r+1,t>>16&255),this.putUInt8(r+2,t>>8&255),this.putUInt8(r+3,t&255)},e.prototype.putInt64=function(r,t){this.putInt8(r,t>>48),this.putUInt8(r+1,t>>42&255),this.putUInt8(r+2,t>>36&255),this.putUInt8(r+3,t>>30&255),this.putUInt8(r+4,t>>24&255),this.putUInt8(r+5,t>>16&255),this.putUInt8(r+6,t>>8&255),this.putUInt8(r+7,t&255)},e.prototype.putBytes=function(r,t){for(var n=0,o=t.remaining();n<o;n++)this.putUInt8(r+n,t.readUInt8())},e.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},e.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},e.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},e.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},e.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},e.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},e.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},e.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},e.prototype.writeUInt8=function(r){this.putUInt8(this._updatePos(1),r)},e.prototype.writeInt8=function(r){this.putInt8(this._updatePos(1),r)},e.prototype.writeInt16=function(r){this.putInt16(this._updatePos(2),r)},e.prototype.writeInt32=function(r){this.putInt32(this._updatePos(4),r)},e.prototype.writeUInt32=function(r){this.putUInt32(this._updatePos(4),r)},e.prototype.writeInt64=function(r){this.putInt64(this._updatePos(8),r)},e.prototype.writeFloat64=function(r){this.putFloat64(this._updatePos(8),r)},e.prototype.writeBytes=function(r){this.putBytes(this._updatePos(r.remaining()),r)},e.prototype.readSlice=function(r){return this.getSlice(this._updatePos(r),r)},e.prototype._updatePos=function(r){var t=this.position;return this.position+=r,t},e.prototype.remaining=function(){return this.length-this.position},e.prototype.hasRemaining=function(){return this.remaining()>0},e.prototype.reset=function(){this.position=0},e.prototype.toString=function(){return this.constructor.name+"( position="+this.position+` )
  `+this.toHex()},e.prototype.toHex=function(){for(var r="",t=0;t<this.length;t++){var n=this.getUInt8(t).toString(16);n.length===1&&(n="0"+n),r+=n,t!==this.length-1&&(r+=" ")}return r},e}();tc.default=Qm;var O2=function(e){g2(r,e);function r(t,n,o){var i=e.call(this,n)||this;return i._start=t,i._inner=o,i}return r.prototype.putUInt8=function(t,n){this._inner.putUInt8(this._start+t,n)},r.prototype.getUInt8=function(t){return this._inner.getUInt8(this._start+t)},r.prototype.putInt8=function(t,n){this._inner.putInt8(this._start+t,n)},r.prototype.putFloat64=function(t,n){this._inner.putFloat64(this._start+t,n)},r.prototype.getInt8=function(t){return this._inner.getInt8(this._start+t)},r.prototype.getFloat64=function(t){return this._inner.getFloat64(this._start+t)},r}(Qm),E2=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xr,"__esModule",{value:!0});Xr.BaseBuffer=void 0;var Xm=E2(tc);Xr.BaseBuffer=Xm.default;Xr.default=Xm.default;var w2=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Jm=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.alloc=void 0;var mu=Jm(Js),T2=Jm(Xr),ey=function(e){w2(r,e);function r(t){var n=this,o=P2(t);return n=e.call(this,o.length)||this,n._buffer=o,n}return r.prototype.getUInt8=function(t){return this._buffer.readUInt8(t)},r.prototype.getInt8=function(t){return this._buffer.readInt8(t)},r.prototype.getFloat64=function(t){return this._buffer.readDoubleBE(t)},r.prototype.putUInt8=function(t,n){this._buffer.writeUInt8(n,t)},r.prototype.putInt8=function(t,n){this._buffer.writeInt8(n,t)},r.prototype.putFloat64=function(t,n){this._buffer.writeDoubleBE(n,t)},r.prototype.putBytes=function(t,n){if(n instanceof r){var o=Math.min(n.length-n.position,this.length-t);n._buffer.copy(this._buffer,t,n.position,n.position+o),n.position+=o}else e.prototype.putBytes.call(this,t,n)},r.prototype.getSlice=function(t,n){return new r(this._buffer.slice(t,t+n))},r}(T2.default);Lt.default=ey;function S2(e){return new ey(e)}Lt.alloc=S2;function P2(e){return e instanceof mu.default.Buffer?e:typeof e=="number"&&typeof mu.default.Buffer.alloc=="function"?mu.default.Buffer.alloc(e):new mu.default.Buffer(e)}var C2=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gd,"__esModule",{value:!0});var Zv=C2(Lt),cn=H,ty=cn.internal.util,ry=ty.ENCRYPTION_OFF,I2=ty.ENCRYPTION_ON,Qv=1,A2=3,R2=function(){function e(r,t,n){t===void 0&&(t=B2),n===void 0&&(n=function(u){return new WebSocket(u)});var o=this;this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._config=r,this._receiveTimeout=null,this._receiveTimeoutStarted=!1,this._receiveTimeoutId=null,this._closingPromise=null;var i=N2(r,t),a=i.scheme,s=i.error;if(s){this._error=s;return}this._ws=j2(a,r.address,n),this._ws.binaryType="arraybuffer";var c=this;this._ws.onclose=function(u){u&&!u.wasClean&&c._handleConnectionError(),c._open=!1},this._ws.onopen=function(){c._clearConnectionTimeout();var u=c._pending;c._pending=null;for(var l=0;l<u.length;l++)c.write(u[l])},this._ws.onmessage=function(u){if(o._resetTimeout(),c.onmessage){var l=new Zv.default(u.data);c.onmessage(l)}},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout()}return e.prototype._handleConnectionError=function(){if(this._connectionTimeoutFired){this._error=(0,cn.newError)("Failed to establish connection in ".concat(this._config.connectionTimeout,"ms"),this._config.connectionErrorCode),this.onerror&&this.onerror(this._error);return}this._open&&!this._timedout&&(this._error=(0,cn.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))},e.prototype.write=function(r){if(this._pending!==null)this._pending.push(r);else if(r instanceof Zv.default)try{this._ws.send(r._buffer)}catch(t){if(this._ws.readyState!==Qv)this._handleConnectionError();else throw t}else throw(0,cn.newError)("Don't know how to send buffer: "+r)},e.prototype.close=function(){var r=this;return this._closingPromise===null&&(this._closingPromise=new Promise(function(t,n){r._clearConnectionTimeout(),r._ws&&r._ws.readyState!==A2?(r._open=!1,r.stopReceiveTimeout(),r._ws.onclose=function(){t()},r._ws.close()):t()})),this._closingPromise},e.prototype.setupReceiveTimeout=function(r){this._receiveTimeout=r},e.prototype.stopReceiveTimeout=function(){this._receiveTimeout!==null&&this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!1,this._receiveTimeoutId!=null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=null)},e.prototype.startReceiveTimeout=function(){this._open&&this._receiveTimeout!==null&&!this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!0,this._resetTimeout())},e.prototype._resetTimeout=function(){var r=this;this._receiveTimeoutStarted&&(this._receiveTimeoutId!==null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=setTimeout(function(){r._receiveTimeoutId=null,r._timedout=!0,r.stopReceiveTimeout(),r._error=(0,cn.newError)("Connection lost. Server didn't respond in ".concat(r._receiveTimeout,"ms"),r._config.connectionErrorCode),r.close(),r.onerror&&r.onerror(r._error)},this._receiveTimeout))},e.prototype._setupConnectionTimeout=function(){var r=this,t=this._config.connectionTimeout;if(t){var n=this._ws;return setTimeout(function(){n.readyState!==Qv&&(r._connectionTimeoutFired=!0,n.close())},t)}return null},e.prototype._clearConnectionTimeout=function(){var r=this._connectionTimeoutId;(r||r===0)&&(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(r))},e}();gd.default=R2;function j2(e,r,t){var n=e+"://"+r.asHostPort();try{return t(n)}catch(i){if($2(i,r)){var o=k2(e,r);return t(o)}else throw i}}function $2(e,r){return e.name==="SyntaxError"&&M2(r.asHostPort())}function M2(e){return e.charAt(0)==="["&&e.indexOf("]")!==-1}function k2(e,r){var t=r.host().replace(/:/g,"-"),n=t.replace("%","s"),o=n+".ipv6-literal.net";return"".concat(e,"://").concat(o,":").concat(r.port())}function N2(e,r){var t=D2(e),n=L2(e),o=e.trust,i=U2(r);if(F2(t,n,i),n)return{scheme:"ws",error:null};if(i)return{scheme:"wss",error:null};if(t){if(!o||o==="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES")return{scheme:"wss",error:null};var a=(0,cn.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+o+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+ry+'"` in the driver configuration.');return{scheme:null,error:a}}return{scheme:"ws",error:null}}function D2(e){return e.encrypted===!0||e.encrypted===I2}function L2(e){return e.encrypted===!1||e.encrypted===ry}function U2(e){var r=typeof e=="function"?e():"";return r&&r.toLowerCase().indexOf("https")>=0}function F2(e,r,t){t===null||(e&&!t?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):r&&t&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))}function B2(){return typeof window<"u"&&window.location?window.location.protocol:null}var Ed={},x2=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ed,"__esModule",{value:!0});var W2=H,V2=W2.internal.resolver.BaseHostNameResolver,q2=function(e){x2(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.resolve=function(t){return this._resolveToItself(t)},r}(V2);Ed.default=q2;var ny=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(On,"__esModule",{value:!0});On.HostNameResolver=On.Channel=void 0;var H2=ny(gd),z2=ny(Ed);On.Channel=H2.default;On.HostNameResolver=z2.default;var En={},wd={},Y2=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(wd,"__esModule",{value:!0});var G2=Xr,K2=Lt,Z2=function(e){Y2(r,e);function r(t){for(var n=this,o=0,i=0;i<t.length;i++)o+=t[i].length;return n=e.call(this,o)||this,n._buffers=t,n}return r.prototype.getUInt8=function(t){for(var n=0;n<this._buffers.length;n++){var o=this._buffers[n];if(t>=o.length)t-=o.length;else return o.getUInt8(t)}},r.prototype.getInt8=function(t){for(var n=0;n<this._buffers.length;n++){var o=this._buffers[n];if(t>=o.length)t-=o.length;else return o.getInt8(t)}},r.prototype.getFloat64=function(t){for(var n=(0,K2.alloc)(8),o=0;o<8;o++)n.putUInt8(o,this.getUInt8(t+o));return n.getFloat64(0)},r}(G2.BaseBuffer);wd.default=Z2;var Q2=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),oy=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(En,"__esModule",{value:!0});En.Dechunker=En.Chunker=void 0;var X2=oy(tc),Xv=Lt,J2=oy(wd),yu=2,eU=0,tU=1400,rU=function(e){Q2(r,e);function r(t,n){var o=e.call(this,0)||this;return o._bufferSize=n||tU,o._ch=t,o._buffer=(0,Xv.alloc)(o._bufferSize),o._currentChunkStart=0,o._chunkOpen=!1,o}return r.prototype.putUInt8=function(t,n){this._ensure(1),this._buffer.writeUInt8(n)},r.prototype.putInt8=function(t,n){this._ensure(1),this._buffer.writeInt8(n)},r.prototype.putFloat64=function(t,n){this._ensure(8),this._buffer.writeFloat64(n)},r.prototype.putBytes=function(t,n){for(;n.remaining()>0;)this._ensure(1),this._buffer.remaining()>n.remaining()?this._buffer.writeBytes(n):this._buffer.writeBytes(n.readSlice(this._buffer.remaining()));return this},r.prototype.flush=function(){if(this._buffer.position>0){this._closeChunkIfOpen();var t=this._buffer;this._buffer=null,this._ch.write(t.getSlice(0,t.position)),this._buffer=(0,Xv.alloc)(this._bufferSize),this._chunkOpen=!1}return this},r.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<yu&&this.flush(),this._buffer.writeInt16(eU)},r.prototype._ensure=function(t){var n=this._chunkOpen?t:t+yu;this._buffer.remaining()<n&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+yu,this._chunkOpen=!0)},r.prototype._closeChunkIfOpen=function(){if(this._chunkOpen){var t=this._buffer.position-(this._currentChunkStart+yu);this._buffer.putUInt16(this._currentChunkStart,t),this._chunkOpen=!1}},r}(X2.default);En.Chunker=rU;var nU=function(){function e(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return e.prototype.AWAITING_CHUNK=function(r){return r.remaining()>=2?this._onHeader(r.readUInt16()):(this._partialChunkHeader=r.readUInt8()<<8,this.IN_HEADER)},e.prototype.IN_HEADER=function(r){return this._onHeader((this._partialChunkHeader|r.readUInt8())&65535)},e.prototype.IN_CHUNK=function(r){return this._chunkSize<=r.remaining()?(this._currentMessage.push(r.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=r.remaining(),this._currentMessage.push(r.readSlice(r.remaining())),this.IN_CHUNK)},e.prototype.CLOSED=function(r){},e.prototype._onHeader=function(r){if(r===0){var t=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:t=this._currentMessage[0];break;default:t=new J2.default(this._currentMessage);break}return this._currentMessage=[],this.onmessage(t),this.AWAITING_CHUNK}else return this._chunkSize=r,this.IN_CHUNK},e.prototype.write=function(r){for(;r.hasRemaining();)this._state=this._state(r)},e}();En.Dechunker=nU;var Td={};Object.defineProperty(Td,"__esModule",{value:!0});var rc=H,iy=rc.internal.util,oU=iy.ENCRYPTION_OFF,iU=iy.ENCRYPTION_ON,aU=rc.error.SERVICE_UNAVAILABLE,Jv=[null,void 0,!0,!1,iU,oU],e_=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"],uU=function(){function e(r,t,n){this.address=r,this.encrypted=sU(t),this.trust=cU(t),this.trustedCertificates=lU(t),this.knownHostsPath=fU(t),this.connectionErrorCode=n||aU,this.connectionTimeout=t.connectionTimeout}return e}();Td.default=uU;function sU(e){var r=e.encrypted;if(Jv.indexOf(r)===-1)throw(0,rc.newError)("Illegal value of the encrypted setting ".concat(r,". Expected one of ").concat(Jv));return r}function cU(e){var r=e.trust;if(e_.indexOf(r)===-1)throw(0,rc.newError)("Illegal value of the trust setting ".concat(r,". Expected one of ").concat(e_));return r}function lU(e){return e.trustedCertificates||[]}function fU(e){return e.knownHosts||null}var Sd={},ay={},kf={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(e,r){var t=Js,n=t.Buffer;function o(a,s){for(var c in a)s[c]=a[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=t:(o(t,r),r.Buffer=i);function i(a,s,c){return n(a,s,c)}i.prototype=Object.create(n.prototype),o(n,i),i.from=function(a,s,c){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,s,c)},i.alloc=function(a,s,c){if(typeof a!="number")throw new TypeError("Argument must be a number");var u=n(a);return s!==void 0?typeof c=="string"?u.fill(s,c):u.fill(s):u.fill(0),u},i.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},i.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(a)}})(kf,kf.exports);var dU=kf.exports,Pd=dU.Buffer,t_=Pd.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function hU(e){if(!e)return"utf8";for(var r;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(r)return;e=(""+e).toLowerCase(),r=!0}}function vU(e){var r=hU(e);if(typeof r!="string"&&(Pd.isEncoding===t_||!t_(e)))throw new Error("Unknown encoding: "+e);return r||e}ay.StringDecoder=Qa;function Qa(e){this.encoding=vU(e);var r;switch(this.encoding){case"utf16le":this.text=gU,this.end=OU,r=4;break;case"utf8":this.fillLast=mU,r=4;break;case"base64":this.text=EU,this.end=wU,r=3;break;default:this.write=TU,this.end=SU;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Pd.allocUnsafe(r)}Qa.prototype.write=function(e){if(e.length===0)return"";var r,t;if(this.lastNeed){if(r=this.fillLast(e),r===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<e.length?r?r+this.text(e,t):this.text(e,t):r||""};Qa.prototype.end=bU;Qa.prototype.text=yU;Qa.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function ef(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function _U(e,r,t){var n=r.length-1;if(n<t)return 0;var o=ef(r[n]);return o>=0?(o>0&&(e.lastNeed=o-1),o):--n<t||o===-2?0:(o=ef(r[n]),o>=0?(o>0&&(e.lastNeed=o-2),o):--n<t||o===-2?0:(o=ef(r[n]),o>=0?(o>0&&(o===2?o=0:e.lastNeed=o-3),o):0))}function pU(e,r,t){if((r[0]&192)!==128)return e.lastNeed=0,"�";if(e.lastNeed>1&&r.length>1){if((r[1]&192)!==128)return e.lastNeed=1,"�";if(e.lastNeed>2&&r.length>2&&(r[2]&192)!==128)return e.lastNeed=2,"�"}}function mU(e){var r=this.lastTotal-this.lastNeed,t=pU(this,e);if(t!==void 0)return t;if(this.lastNeed<=e.length)return e.copy(this.lastChar,r,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,r,0,e.length),this.lastNeed-=e.length}function yU(e,r){var t=_U(this,e,r);if(!this.lastNeed)return e.toString("utf8",r);this.lastTotal=t;var n=e.length-(t-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",r,n)}function bU(e){var r=e&&e.length?this.write(e):"";return this.lastNeed?r+"�":r}function gU(e,r){if((e.length-r)%2===0){var t=e.toString("utf16le",r);if(t){var n=t.charCodeAt(t.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",r,e.length-1)}function OU(e){var r=e&&e.length?this.write(e):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,t)}return r}function EU(e,r){var t=(e.length-r)%3;return t===0?e.toString("base64",r):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",r,e.length-t))}function wU(e){var r=e&&e.length?this.write(e):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function TU(e){return e.toString(this.encoding)}function SU(e){return e&&e.length?this.write(e):""}var uy=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sd,"__esModule",{value:!0});var PU=uy(Lt),CU=H,tf=uy(Js),IU=ay,r_=new IU.StringDecoder("utf8");function AU(e){return new PU.default(kU(e))}function RU(e,r){if(Object.prototype.hasOwnProperty.call(e,"_buffer"))return jU(e,r);if(Object.prototype.hasOwnProperty.call(e,"_buffers"))return $U(e,r);throw(0,CU.newError)("Don't know how to decode strings from '".concat(e,"'"))}function jU(e,r){var t=e.position,n=t+r;return e.position=Math.min(n,e.length),e._buffer.toString("utf8",t,n)}function $U(e,r){return MU(e,r,function(t){return r_.write(t._buffer)},function(){return r_.end()})}function MU(e,r,t,n){var o=r,i=e.position;e._updatePos(Math.min(r,e.length-i));var a=e._buffers.reduce(function(s,c){if(o<=0)return s;if(i>=c.length)return i-=c.length,"";c._updatePos(i-c.position);var u=Math.min(c.length-i,o),l=c.readSlice(u);return c._updatePos(u),o=Math.max(o-l.length,0),i=0,s+t(l)},"");return a+n()}function kU(e){return typeof tf.default.Buffer.from=="function"?tf.default.Buffer.from(e,"utf8"):new tf.default.Buffer(e,"utf8")}Sd.default={encode:AU,decode:RU};(function(e){var r=f&&f.__createBinding||(Object.create?function(s,c,u,l){l===void 0&&(l=u);var h=Object.getOwnPropertyDescriptor(c,u);(!h||("get"in h?!c.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(s,l,h)}:function(s,c,u,l){l===void 0&&(l=u),s[l]=c[u]}),t=f&&f.__exportStar||function(s,c){for(var u in s)u!=="default"&&!Object.prototype.hasOwnProperty.call(c,u)&&r(c,s,u)},n=f&&f.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.utf8=e.alloc=e.ChannelConfig=void 0,t(On,e),t(En,e);var o=Td;Object.defineProperty(e,"ChannelConfig",{enumerable:!0,get:function(){return n(o).default}});var i=Lt;Object.defineProperty(e,"alloc",{enumerable:!0,get:function(){return i.alloc}});var a=Sd;Object.defineProperty(e,"utf8",{enumerable:!0,get:function(){return n(a).default}})})(no);Object.defineProperty(bd,"__esModule",{value:!0});var NU=no,sy=H,DU=1616949271;function un(e,r){return{major:e,minor:r}}function LU(e){if(e.length>4)throw(0,sy.newError)("It should not have more than 4 versions of the protocol");var r=(0,NU.alloc)(5*4);return r.writeInt32(DU),e.forEach(function(t){if(t instanceof Array){var n=t[0],o=n.major,i=n.minor,a=t[1].minor,s=i-a;r.writeInt32(s<<16|i<<8|o)}else{var o=t.major,i=t.minor;r.writeInt32(i<<8|o)}}),r.reset(),r}function UU(e,r){var t=[e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readUInt8()];if(t[0]===72&&t[1]===84&&t[2]===84&&t[3]===80)throw r.error("Handshake failed since server responded with HTTP."),(0,sy.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return+(t[3]+"."+t[2])}function FU(){return LU([[un(5,4),un(5,0)],[un(4,4),un(4,2)],un(4,1),un(3,0)])}function BU(e,r){var t=this;return new Promise(function(n,o){var i=function(a){o(a)};e.onerror=i.bind(t),e._error&&i(e._error),e.onmessage=function(a){try{var s=UU(a,r);n({protocolVersion:s,consumeRemainingBuffer:function(c){a.hasRemaining()&&c(a.readSlice(a.remaining()))}})}catch(c){o(c)}},e.write(FU())})}bd.default=BU;var Cd={},nc={},Fe={},ie={},oc={},Id=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),xU=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oc,"__esModule",{value:!0});xU(H);var ic=function(){function e(){}return e.ofRecord=function(r){return r===null?e.ofNull():new qU(r)},e.ofMessageResponse=function(r){return r===null?e.ofNull():new WU(r)},e.ofNull=function(){return new VU},Object.defineProperty(e.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),e}();oc.default=ic;var WU=function(e){Id(r,e);function r(t){var n=e.call(this)||this;return n._response=t,n}return Object.defineProperty(r.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isNull",{get:function(){return this._response===null},enumerable:!1,configurable:!0}),r}(ic),VU=function(e){Id(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),r}(ic),qU=function(e){Id(r,e);function r(t){var n=e.call(this)||this;return n._record=t,n}return Object.defineProperty(r.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isNull",{get:function(){return this._record===null},enumerable:!1,configurable:!0}),r}(ic),Ut=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),HU=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ie,"__esModule",{value:!0});ie.TelemetryObserver=ie.ProcedureRouteObserver=ie.RouteObserver=ie.CompletedObserver=ie.FailedObserver=ie.ResetObserver=ie.LogoffObserver=ie.LoginObserver=ie.ResultStreamObserver=ie.StreamObserver=void 0;var We=H,cy=HU(oc),zU=We.internal.constants.FETCH_ALL,Xt=We.error.PROTOCOL_ERROR,Jr=function(){function e(){}return e.prototype.onNext=function(r){},e.prototype.onError=function(r){},e.prototype.onCompleted=function(r){},e}();ie.StreamObserver=Jr;var ac=function(e){Ut(r,e);function r(t){var n=t===void 0?{}:t,o=n.reactive,i=o===void 0?!1:o,a=n.moreFunction,s=n.discardFunction,c=n.fetchSize,u=c===void 0?zU:c,l=n.beforeError,h=n.afterError,_=n.beforeKeys,y=n.afterKeys,b=n.beforeComplete,O=n.afterComplete,P=n.server,I=n.highRecordWatermark,j=I===void 0?Number.MAX_VALUE:I,S=n.lowRecordWatermark,A=S===void 0?Number.MAX_VALUE:S,T=e.call(this)||this;return T._fieldKeys=null,T._fieldLookup=null,T._head=null,T._queuedRecords=[],T._tail=null,T._error=null,T._observers=[],T._meta={},T._server=P,T._beforeError=l,T._afterError=h,T._beforeKeys=_,T._afterKeys=y,T._beforeComplete=b,T._afterComplete=O,T._queryId=null,T._moreFunction=a,T._discardFunction=s,T._discard=!1,T._fetchSize=u,T._lowRecordWatermark=A,T._highRecordWatermark=j,T._setState(i?ut.READY:ut.READY_STREAMING),T._setupAutoPull(),T._paused=!1,T}return r.prototype.pause=function(){this._paused=!0},r.prototype.resume=function(){this._paused=!1,this._setupAutoPull(!0),this._state.pull(this)},r.prototype.onNext=function(t){var n=new We.Record(this._fieldKeys,t,this._fieldLookup);this._observers.some(function(o){return o.onNext})?this._observers.forEach(function(o){o.onNext&&o.onNext(n)}):(this._queuedRecords.push(n),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},r.prototype.onCompleted=function(t){this._state.onSuccess(this,t)},r.prototype.onError=function(t){this._state.onError(this,t)},r.prototype.cancel=function(){this._discard=!0},r.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(ut.STREAMING)},r.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(ut.SUCCEEDED)},r.prototype.subscribe=function(t){if(this._head&&t.onKeys&&t.onKeys(this._head),this._queuedRecords.length>0&&t.onNext)for(var n=0;n<this._queuedRecords.length;n++)t.onNext(this._queuedRecords[n]),this._queuedRecords.length-n-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===ut.READY&&this._handleStreaming());this._tail&&t.onCompleted&&t.onCompleted(this._tail),this._error&&t.onError(this._error),this._observers.push(t),this._state===ut.READY&&this._handleStreaming()},r.prototype._handleHasMore=function(t){this._setState(ut.READY),this._handleStreaming(),delete t.has_more},r.prototype._handlePullSuccess=function(t){var n=this,o=Object.assign(this._server?{server:this._server}:{},this._meta,t);if(![void 0,null,"r","w","rw","s"].includes(o.type)){this.onError((0,We.newError)(`Server returned invalid query type. Expected one of [undefined, null, "r", "w", "rw", "s"] but got '`.concat(o.type,"'"),Xt));return}this._setState(ut.SUCCEEDED);var i=null;this._beforeComplete&&(i=this._beforeComplete(o));var a=function(){n._tail=o,n._observers.some(function(s){return s.onCompleted})&&n._observers.forEach(function(s){s.onCompleted&&s.onCompleted(o)}),n._afterComplete&&n._afterComplete(o)};i?Promise.resolve(i).then(function(){return a()}):a()},r.prototype._handleRunSuccess=function(t,n){var o=this;if(this._fieldKeys===null){if(this._fieldKeys=[],this._fieldLookup={},t.fields&&t.fields.length>0){this._fieldKeys=t.fields;for(var i=0;i<t.fields.length;i++)this._fieldLookup[t.fields[i]]=i;delete t.fields}t.qid!==null&&t.qid!==void 0&&(this._queryId=t.qid,delete t.qid),this._storeMetadataForCompletion(t);var a=null;this._beforeKeys&&(a=this._beforeKeys(this._fieldKeys));var s=function(){o._head=o._fieldKeys,o._observers.some(function(c){return c.onKeys})&&o._observers.forEach(function(c){c.onKeys&&c.onKeys(o._fieldKeys)}),o._afterKeys&&o._afterKeys(o._fieldKeys),n()};a?Promise.resolve(a).then(function(){return s()}):s()}},r.prototype._handleError=function(t){var n=this;this._setState(ut.FAILED),this._error=t;var o=null;this._beforeError&&(o=this._beforeError(t));var i=function(){n._observers.some(function(a){return a.onError})&&n._observers.forEach(function(a){a.onError&&a.onError(t)}),n._afterError&&n._afterError(t)};o?Promise.resolve(o).then(function(){return i()}):i()},r.prototype._handleStreaming=function(){this._head&&this._observers.some(function(t){return t.onNext||t.onCompleted})&&!this._paused&&(this._discard||this._autoPull)&&this._more()},r.prototype._more=function(){this._discard?this._discardFunction(this._queryId,this):this._moreFunction(this._queryId,this._fetchSize,this),this._setState(ut.STREAMING)},r.prototype._storeMetadataForCompletion=function(t){for(var n=Object.keys(t),o=n.length,i="";o--;)i=n[o],this._meta[i]=t[i]},r.prototype._setState=function(t){this._state=t},r.prototype._setupAutoPull=function(){this._autoPull=!0},r}(Jr);ie.ResultStreamObserver=ac;var YU=function(e){Ut(r,e);function r(t){var n=t===void 0?{}:t,o=n.onError,i=n.onCompleted,a=e.call(this)||this;return a._onError=o,a._onCompleted=i,a}return r.prototype.onNext=function(t){this.onError((0,We.newError)("Received RECORD when initializing "+We.json.stringify(t)))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(Jr);ie.LoginObserver=YU;var GU=function(e){Ut(r,e);function r(t){var n=t===void 0?{}:t,o=n.onError,i=n.onCompleted,a=e.call(this)||this;return a._onError=o,a._onCompleted=i,a}return r.prototype.onNext=function(t){this.onError((0,We.newError)("Received RECORD when logging off "+We.json.stringify(t)))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(Jr);ie.LogoffObserver=GU;var KU=function(e){Ut(r,e);function r(t){var n=t===void 0?{}:t,o=n.onProtocolError,i=n.onError,a=n.onComplete,s=e.call(this)||this;return s._onProtocolError=o,s._onError=i,s._onComplete=a,s}return r.prototype.onNext=function(t){this.onError((0,We.newError)("Received RECORD when resetting: received record is: "+We.json.stringify(t),Xt))},r.prototype.onError=function(t){t.code===Xt&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onComplete&&this._onComplete(t)},r}(Jr);ie.ResetObserver=KU;var ZU=function(e){Ut(r,e);function r(t){var n=t===void 0?{}:t,o=n.onError,i=n.onCompleted,a=e.call(this)||this;return a._onError=o,a._onCompleted=i,a}return r.prototype.onNext=function(t){this.onError((0,We.newError)("Received RECORD when sending telemetry "+We.json.stringify(t),Xt))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(ac);ie.TelemetryObserver=ZU;var QU=function(e){Ut(r,e);function r(t){var n=t.error,o=t.onError,i=e.call(this,{beforeError:o})||this;return i.onError(n),i}return r}(ac);ie.FailedObserver=QU;var XU=function(e){Ut(r,e);function r(){var t=e.call(this)||this;return e.prototype.markCompleted.call(t),t}return r}(ac);ie.CompletedObserver=XU;var JU=function(e){Ut(r,e);function r(t){var n=t.resultObserver,o=t.onProtocolError,i=t.onError,a=t.onCompleted,s=e.call(this)||this;return s._resultObserver=n,s._onError=i,s._onCompleted=a,s._records=[],s._onProtocolError=o,n.subscribe(s),s}return r.prototype.onNext=function(t){this._records.push(t)},r.prototype.onError=function(t){t.code===Xt&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(){if(this._records!==null&&this._records.length!==1){this.onError((0,We.newError)("Illegal response from router. Received "+this._records.length+` records but expected only one.
`+We.json.stringify(this._records),Xt));return}this._onCompleted&&this._onCompleted(cy.default.ofRecord(this._records[0]))},r}(Jr);ie.ProcedureRouteObserver=JU;var eF=function(e){Ut(r,e);function r(t){var n=t===void 0?{}:t,o=n.onProtocolError,i=n.onError,a=n.onCompleted,s=e.call(this)||this;return s._onProtocolError=o,s._onError=i,s._onCompleted=a,s}return r.prototype.onNext=function(t){this.onError((0,We.newError)("Received RECORD when resetting: received record is: "+We.json.stringify(t),Xt))},r.prototype.onError=function(t){t.code===Xt&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(cy.default.ofMessageResponse(t))},r}(Jr);ie.RouteObserver=eF;var ut={READY_STREAMING:{onSuccess:function(e,r){e._handleRunSuccess(r,function(){e._setState(ut.STREAMING)})},onError:function(e,r){e._handleError(r)},name:function(){return"READY_STREAMING"},pull:function(){}},READY:{onSuccess:function(e,r){e._handleRunSuccess(r,function(){return e._handleStreaming()})},onError:function(e,r){e._handleError(r)},name:function(){return"READY"},pull:function(e){return e._more()}},STREAMING:{onSuccess:function(e,r){r.has_more?e._handleHasMore(r):e._handlePullSuccess(r)},onError:function(e,r){e._handleError(r)},name:function(){return"STREAMING"},pull:function(){}},FAILED:{onError:function(e){},name:function(){return"FAILED"},pull:function(){}},SUCCEEDED:{name:function(){return"SUCCEEDED"},pull:function(){}}};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.assertNotificationFilterIsEmpty=Fe.assertImpersonatedUserIsEmpty=Fe.assertTxConfigIsEmpty=Fe.assertDatabaseIsEmpty=void 0;var zo=H;function tF(e,r,t){if(r===void 0&&(r=function(){}),e&&!e.isEmpty()){var n=(0,zo.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw r(n.message),t.onError(n),n}}Fe.assertTxConfigIsEmpty=tF;function rF(e,r,t){if(r===void 0&&(r=function(){}),e){var n=(0,zo.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw r(n.message),t.onError(n),n}}Fe.assertDatabaseIsEmpty=rF;function nF(e,r,t){if(r===void 0&&(r=function(){}),e){var n=(0,zo.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+"Trying to impersonate ".concat(e,"."));throw r(n.message),t.onError(n),n}}Fe.assertImpersonatedUserIsEmpty=nF;function oF(e,r,t){if(r===void 0&&(r=function(){}),e!==void 0){var n=(0,zo.newError)("Driver is connected to a database that does not support user notification filters. Please upgrade to Neo4j 5.7.0 or later in order to use this functionality. "+"Trying to set notifications to ".concat(zo.json.stringify(e),"."));throw r(n.message),t.onError(n),n}}Fe.assertNotificationFilterIsEmpty=oF;var xe={},xr={},Nt={},Wr={};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.reuseOngoingRequest=Wr.identity=void 0;var iF=H;function aF(e){return e}Wr.identity=aF;function uF(e,r){r===void 0&&(r=null);var t=new Map;return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=iF.json.stringify(n);if(t.has(i))return t.get(i);var a=e.apply(r,n);return t.set(i,a),a.finally(function(){t.delete(i)})}}Wr.reuseOngoingRequest=uF;var uc={},sF=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(uc,"__esModule",{value:!0});uc.equals=void 0;function cF(e,r){var t,n;if(e===r)return!0;if(e===null||r===null)return!1;if(typeof e=="object"&&typeof r=="object"){var o=Object.keys(e),i=Object.keys(r);if(o.length!==i.length)return!1;try{for(var a=sF(o),s=a.next();!s.done;s=a.next()){var c=s.value;if(e[c]!==r[c])return!1}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!0}return!1}uc.equals=cF;var lF=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),fF=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),ly=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&lF(r,e,t);return fF(r,e),r};Object.defineProperty(Nt,"__esModule",{value:!0});Nt.object=Nt.functional=void 0;Nt.functional=ly(Wr);Nt.object=ly(uc);var Jt={};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.verifyStructSize=Jt.Structure=void 0;var fy=H,dF=fy.error.PROTOCOL_ERROR,dy=function(){function e(r,t){this.signature=r,this.fields=t}return Object.defineProperty(e.prototype,"size",{get:function(){return this.fields.length},enumerable:!1,configurable:!0}),e.prototype.toString=function(){for(var r="",t=0;t<this.fields.length;t++)t>0&&(r+=", "),r+=this.fields[t];return"Structure("+this.signature+", ["+r+"])"},e}();Jt.Structure=dy;function hF(e,r,t){if(r!==t)throw(0,fy.newError)("Wrong struct size for ".concat(e,", expected ").concat(r," but was ").concat(t),dF)}Jt.verifyStructSize=hF;Jt.default=dy;Object.defineProperty(xr,"__esModule",{value:!0});xr.Unpacker=xr.Packer=void 0;var $o=no,hy=Nt,vy=Jt,Te=H,vF=Te.error.PROTOCOL_ERROR,_y=128,py=144,my=160,yy=176,by=192,gy=193,Oy=194,Ey=195,wy=200,Ty=201,Sy=202,Py=203,Cy=208,Iy=209,Ay=210,Ry=212,jy=213,$y=214,My=204,ky=205,Ny=206,Dy=216,Ly=217,Uy=218,Fy=220,By=221,_F=function(){function e(r){this._ch=r,this._byteArraysSupported=!0}return e.prototype.packable=function(r,t){var n=this;t===void 0&&(t=hy.functional.identity);try{r=t(r)}catch(a){return function(){throw a}}if(r===null)return function(){return n._ch.writeUInt8(by)};if(r===!0)return function(){return n._ch.writeUInt8(Ey)};if(r===!1)return function(){return n._ch.writeUInt8(Oy)};if(typeof r=="number")return function(){return n.packFloat(r)};if(typeof r=="string")return function(){return n.packString(r)};if(typeof r=="bigint")return function(){return n.packInteger((0,Te.int)(r))};if((0,Te.isInt)(r))return function(){return n.packInteger(r)};if(r instanceof Int8Array)return function(){return n.packBytes(r)};if(r instanceof Array)return function(){n.packListHeader(r.length);for(var a=0;a<r.length;a++)n.packable(r[a]===void 0?null:r[a],t)()};if(mF(r))return this.packableIterable(r,t);if(r instanceof vy.Structure){for(var o=[],i=0;i<r.fields.length;i++)o[i]=this.packable(r.fields[i],t);return function(){return n.packStruct(r.signature,o)}}else return typeof r=="object"?function(){for(var a=Object.keys(r),s=0,c=0;c<a.length;c++)r[a[c]]!==void 0&&s++;n.packMapHeader(s);for(var c=0;c<a.length;c++){var u=a[c];r[u]!==void 0&&(n.packString(u),n.packable(r[u],t)())}}:this._nonPackableValue("Unable to pack the given value: ".concat(r))},e.prototype.packableIterable=function(r,t){try{var n=Array.from(r);return this.packable(n,t)}catch(o){throw(0,Te.newError)("Cannot pack given iterable, ".concat(o.message,": ").concat(r))}},e.prototype.packStruct=function(r,t){t=t||[],this.packStructHeader(t.length,r);for(var n=0;n<t.length;n++)t[n]()},e.prototype.packInteger=function(r){var t=r.high,n=r.low;r.greaterThanOrEqual(-16)&&r.lessThan(128)?this._ch.writeInt8(n):r.greaterThanOrEqual(-128)&&r.lessThan(-16)?(this._ch.writeUInt8(wy),this._ch.writeInt8(n)):r.greaterThanOrEqual(-32768)&&r.lessThan(32768)?(this._ch.writeUInt8(Ty),this._ch.writeInt16(n)):r.greaterThanOrEqual(-2147483648)&&r.lessThan(2147483648)?(this._ch.writeUInt8(Sy),this._ch.writeInt32(n)):(this._ch.writeUInt8(Py),this._ch.writeInt32(t),this._ch.writeInt32(n))},e.prototype.packFloat=function(r){this._ch.writeUInt8(gy),this._ch.writeFloat64(r)},e.prototype.packString=function(r){var t=$o.utf8.encode(r),n=t.length;if(n<16)this._ch.writeUInt8(_y|n),this._ch.writeBytes(t);else if(n<256)this._ch.writeUInt8(Cy),this._ch.writeUInt8(n),this._ch.writeBytes(t);else if(n<65536)this._ch.writeUInt8(Iy),this._ch.writeUInt8(n/256>>0),this._ch.writeUInt8(n%256),this._ch.writeBytes(t);else if(n<4294967296)this._ch.writeUInt8(Ay),this._ch.writeUInt8((n/16777216>>0)%256),this._ch.writeUInt8((n/65536>>0)%256),this._ch.writeUInt8((n/256>>0)%256),this._ch.writeUInt8(n%256),this._ch.writeBytes(t);else throw(0,Te.newError)("UTF-8 strings of size "+n+" are not supported")},e.prototype.packListHeader=function(r){if(r<16)this._ch.writeUInt8(py|r);else if(r<256)this._ch.writeUInt8(Ry),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(jy),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8($y),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Te.newError)("Lists of size "+r+" are not supported")},e.prototype.packBytes=function(r){if(this._byteArraysSupported){this.packBytesHeader(r.length);for(var t=0;t<r.length;t++)this._ch.writeInt8(r[t])}else throw(0,Te.newError)("Byte arrays are not supported by the database this driver is connected to")},e.prototype.packBytesHeader=function(r){if(r<256)this._ch.writeUInt8(My),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(ky),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(Ny),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Te.newError)("Byte arrays of size "+r+" are not supported")},e.prototype.packMapHeader=function(r){if(r<16)this._ch.writeUInt8(my|r);else if(r<256)this._ch.writeUInt8(Dy),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(Ly),this._ch.writeUInt8(r/256>>0),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(Uy),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Te.newError)("Maps of size "+r+" are not supported")},e.prototype.packStructHeader=function(r,t){if(r<16)this._ch.writeUInt8(yy|r),this._ch.writeUInt8(t);else if(r<256)this._ch.writeUInt8(Fy),this._ch.writeUInt8(r),this._ch.writeUInt8(t);else if(r<65536)this._ch.writeUInt8(By),this._ch.writeUInt8(r/256>>0),this._ch.writeUInt8(r%256);else throw(0,Te.newError)("Structures of size "+r+" are not supported")},e.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},e.prototype._nonPackableValue=function(r){return function(){throw(0,Te.newError)(r,vF)}},e}();xr.Packer=_F;var pF=function(){function e(r,t){r===void 0&&(r=!1),t===void 0&&(t=!1),this._disableLosslessIntegers=r,this._useBigInt=t}return e.prototype.unpack=function(r,t){t===void 0&&(t=hy.functional.identity);var n=r.readUInt8(),o=n&240,i=n&15;if(n===by)return null;var a=this._unpackBoolean(n);if(a!==null)return a;var s=this._unpackNumberOrInteger(n,r);if(s!==null){if((0,Te.isInt)(s)){if(this._useBigInt)return s.toBigInt();if(this._disableLosslessIntegers)return s.toNumberOrInfinity()}return s}var c=this._unpackString(n,o,i,r);if(c!==null)return c;var u=this._unpackList(n,o,i,r,t);if(u!==null)return u;var l=this._unpackByteArray(n,r);if(l!==null)return l;var h=this._unpackMap(n,o,i,r,t);if(h!==null)return h;var _=this._unpackStruct(n,o,i,r,t);if(_!==null)return _;throw(0,Te.newError)("Unknown packed value with marker "+n.toString(16))},e.prototype.unpackInteger=function(r){var t=r.readUInt8(),n=this._unpackInteger(t,r);if(n==null)throw(0,Te.newError)("Unable to unpack integer value with marker "+t.toString(16));return n},e.prototype._unpackBoolean=function(r){return r===Ey?!0:r===Oy?!1:null},e.prototype._unpackNumberOrInteger=function(r,t){return r===gy?t.readFloat64():this._unpackInteger(r,t)},e.prototype._unpackInteger=function(r,t){if(r>=0&&r<128)return(0,Te.int)(r);if(r>=240&&r<256)return(0,Te.int)(r-256);if(r===wy)return(0,Te.int)(t.readInt8());if(r===Ty)return(0,Te.int)(t.readInt16());if(r===Sy){var n=t.readInt32();return(0,Te.int)(n)}else if(r===Py){var o=t.readInt32(),i=t.readInt32();return new Te.Integer(i,o)}else return null},e.prototype._unpackString=function(r,t,n,o){return t===_y?$o.utf8.decode(o,n):r===Cy?$o.utf8.decode(o,o.readUInt8()):r===Iy?$o.utf8.decode(o,o.readUInt16()):r===Ay?$o.utf8.decode(o,o.readUInt32()):null},e.prototype._unpackList=function(r,t,n,o,i){return t===py?this._unpackListWithSize(n,o,i):r===Ry?this._unpackListWithSize(o.readUInt8(),o,i):r===jy?this._unpackListWithSize(o.readUInt16(),o,i):r===$y?this._unpackListWithSize(o.readUInt32(),o,i):null},e.prototype._unpackListWithSize=function(r,t,n){for(var o=[],i=0;i<r;i++)o.push(this.unpack(t,n));return o},e.prototype._unpackByteArray=function(r,t){return r===My?this._unpackByteArrayWithSize(t.readUInt8(),t):r===ky?this._unpackByteArrayWithSize(t.readUInt16(),t):r===Ny?this._unpackByteArrayWithSize(t.readUInt32(),t):null},e.prototype._unpackByteArrayWithSize=function(r,t){for(var n=new Int8Array(r),o=0;o<r;o++)n[o]=t.readInt8();return n},e.prototype._unpackMap=function(r,t,n,o,i){return t===my?this._unpackMapWithSize(n,o,i):r===Dy?this._unpackMapWithSize(o.readUInt8(),o,i):r===Ly?this._unpackMapWithSize(o.readUInt16(),o,i):r===Uy?this._unpackMapWithSize(o.readUInt32(),o,i):null},e.prototype._unpackMapWithSize=function(r,t,n){for(var o={},i=0;i<r;i++){var a=this.unpack(t,n);o[a]=this.unpack(t,n)}return o},e.prototype._unpackStruct=function(r,t,n,o,i){return t===yy?this._unpackStructWithSize(n,o,i):r===Fy?this._unpackStructWithSize(o.readUInt8(),o,i):r===By?this._unpackStructWithSize(o.readUInt16(),o,i):null},e.prototype._unpackStructWithSize=function(r,t,n){for(var o=t.readUInt8(),i=new vy.Structure(o,[]),a=0;a<r;a++)i.fields.push(this.unpack(t,n));return n(i)},e}();xr.Unpacker=pF;function mF(e){return e==null?!1:typeof e[Symbol.iterator]=="function"}var wn={},xy=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),yF=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),bF=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),gF=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&yF(r,e,t);return bF(r,e),r};Object.defineProperty(wn,"__esModule",{value:!0});wn.Unpacker=wn.Packer=void 0;var Wy=gF(xr),OF=function(e){xy(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},r}(Wy.Packer);wn.Packer=OF;var EF=function(e){xy(r,e);function r(t,n){return t===void 0&&(t=!1),n===void 0&&(n=!1),e.call(this,t,n)||this}return r}(Wy.Unpacker);wn.Unpacker=EF;var wF=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),TF=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Ad=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&wF(r,e,t);return TF(r,e),r};Object.defineProperty(xe,"__esModule",{value:!0});xe.structure=xe.v2=xe.v1=void 0;var SF=Ad(xr);xe.v1=SF;var Vy=Ad(wn);xe.v2=Vy;var PF=Ad(Jt);xe.structure=PF;xe.default=Vy;var He={};Object.defineProperty(He,"__esModule",{value:!0});He.SIGNATURES=void 0;var Me=H,qy=Me.internal.constants,CF=qy.ACCESS_MODE_READ,bu=qy.FETCH_ALL,n_=Me.internal.util.assertString,Hy=1,zy=15,Nf=16,Yy=63,Mo=1,Gy=2,Ky=17,Zy=18,Qy=19,Xy=84,Df=102,Jy=106,eb=107,tb=47,rb=63,IF="r",ko=-1,AF=Object.freeze({INIT:Hy,RESET:zy,RUN:Nf,PULL_ALL:Yy,HELLO:Mo,GOODBYE:Gy,BEGIN:Ky,COMMIT:Zy,ROLLBACK:Qy,TELEMETRY:Xy,ROUTE:Df,LOGON:Jy,LOGOFF:eb,DISCARD:tb,PULL:rb});He.SIGNATURES=AF;var oo=function(){function e(r,t,n){this.signature=r,this.fields=t,this.toString=n}return e.init=function(r,t){return new e(Hy,[r,t],function(){return"INIT ".concat(r," {...}")})},e.run=function(r,t){return new e(Nf,[r,t],function(){return"RUN ".concat(r," ").concat(Me.json.stringify(t))})},e.pullAll=function(){return RF},e.reset=function(){return jF},e.hello=function(r,t,n,o){n===void 0&&(n=null),o===void 0&&(o=null);var i=Object.assign({user_agent:r},t);return n&&(i.routing=n),o&&(i.patch_bolt=o),new e(Mo,[i],function(){return"HELLO {user_agent: '".concat(r,"', ...}")})},e.hello5x1=function(r,t){t===void 0&&(t=null);var n={user_agent:r};return t&&(n.routing=t),new e(Mo,[n],function(){return"HELLO {user_agent: '".concat(r,"', ...}")})},e.hello5x2=function(r,t,n){t===void 0&&(t=null),n===void 0&&(n=null);var o={user_agent:r};return t&&(t.minimumSeverityLevel&&(o.notifications_minimum_severity=t.minimumSeverityLevel),t.disabledCategories&&(o.notifications_disabled_categories=t.disabledCategories)),n&&(o.routing=n),new e(Mo,[o],function(){return"HELLO ".concat(Me.json.stringify(o))})},e.hello5x3=function(r,t,n,o){n===void 0&&(n=null),o===void 0&&(o=null);var i={};return r&&(i.user_agent=r),t&&(i.bolt_agent={product:t.product,platform:t.platform,language:t.language,language_details:t.languageDetails}),n&&(n.minimumSeverityLevel&&(i.notifications_minimum_severity=n.minimumSeverityLevel),n.disabledCategories&&(i.notifications_disabled_categories=n.disabledCategories)),o&&(i.routing=o),new e(Mo,[i],function(){return"HELLO ".concat(Me.json.stringify(i))})},e.logon=function(r){return new e(Jy,[r],function(){return"LOGON { ... }"})},e.logoff=function(){return new e(eb,[],function(){return"LOGOFF"})},e.begin=function(r){var t=r===void 0?{}:r,n=t.bookmarks,o=t.txConfig,i=t.database,a=t.mode,s=t.impersonatedUser,c=t.notificationFilter,u=o_(n,o,i,a,s,c);return new e(Ky,[u],function(){return"BEGIN ".concat(Me.json.stringify(u))})},e.commit=function(){return $F},e.rollback=function(){return MF},e.runWithMetadata=function(r,t,n){var o=n===void 0?{}:n,i=o.bookmarks,a=o.txConfig,s=o.database,c=o.mode,u=o.impersonatedUser,l=o.notificationFilter,h=o_(i,a,s,c,u,l);return new e(Nf,[r,t,h],function(){return"RUN ".concat(r," ").concat(Me.json.stringify(t)," ").concat(Me.json.stringify(h))})},e.goodbye=function(){return kF},e.pull=function(r){var t=r===void 0?{}:r,n=t.stmtId,o=n===void 0?ko:n,i=t.n,a=i===void 0?bu:i,s=i_(o??ko,a||bu);return new e(rb,[s],function(){return"PULL ".concat(Me.json.stringify(s))})},e.discard=function(r){var t=r===void 0?{}:r,n=t.stmtId,o=n===void 0?ko:n,i=t.n,a=i===void 0?bu:i,s=i_(o??ko,a||bu);return new e(tb,[s],function(){return"DISCARD ".concat(Me.json.stringify(s))})},e.telemetry=function(r){var t=r.api,n=(0,Me.int)(t);return new e(Xy,[n],function(){return"TELEMETRY ".concat(n.toString())})},e.route=function(r,t,n){return r===void 0&&(r={}),t===void 0&&(t=[]),n===void 0&&(n=null),new e(Df,[r,t,n],function(){return"ROUTE ".concat(Me.json.stringify(r)," ").concat(Me.json.stringify(t)," ").concat(n)})},e.routeV4x4=function(r,t,n){r===void 0&&(r={}),t===void 0&&(t=[]),n===void 0&&(n={});var o={};return n.databaseName&&(o.db=n.databaseName),n.impersonatedUser&&(o.imp_user=n.impersonatedUser),new e(Df,[r,t,o],function(){return"ROUTE ".concat(Me.json.stringify(r)," ").concat(Me.json.stringify(t)," ").concat(Me.json.stringify(o))})},e}();He.default=oo;function o_(e,r,t,n,o,i){var a={};return e.isEmpty()||(a.bookmarks=e.values()),r.timeout!==null&&(a.tx_timeout=r.timeout),r.metadata&&(a.tx_metadata=r.metadata),t&&(a.db=n_(t,"database")),o&&(a.imp_user=n_(o,"impersonatedUser")),n===CF&&(a.mode=IF),i&&(i.minimumSeverityLevel&&(a.notifications_minimum_severity=i.minimumSeverityLevel),i.disabledCategories&&(a.notifications_disabled_categories=i.disabledCategories)),a}function i_(e,r){var t={n:(0,Me.int)(r)};return e!==ko&&(t.qid=(0,Me.int)(e)),t}var RF=new oo(Yy,[],function(){return"PULL_ALL"}),jF=new oo(zy,[],function(){return"RESET"}),$F=new oo(Zy,[],function(){return"COMMIT"}),MF=new oo(Qy,[],function(){return"ROLLBACK"}),kF=new oo(Gy,[],function(){return"GOODBYE"}),sc={},$e={};Object.defineProperty($e,"__esModule",{value:!0});$e.TypeTransformer=void 0;var NF=xe,DF=H,LF=DF.internal.objectUtil,UF=function(){function e(r){this._transformers=r,this._transformersPerSignature=new Map(r.map(function(t){return[t.signature,t]})),this.fromStructure=this.fromStructure.bind(this),this.toStructure=this.toStructure.bind(this),Object.freeze(this)}return e.prototype.fromStructure=function(r){try{if(r instanceof NF.structure.Structure&&this._transformersPerSignature.has(r.signature)){var t=this._transformersPerSignature.get(r.signature).fromStructure;return t(r)}return r}catch(n){return LF.createBrokenObject(n)}},e.prototype.toStructure=function(r){var t=this._transformers.find(function(n){var o=n.isTypeInstance;return o(r)});return t!==void 0?t.toStructure(r):r},e}();$e.default=UF;var FF=function(){function e(r){var t=r.signature,n=r.fromStructure,o=r.toStructure,i=r.isTypeInstance;this.signature=t,this.isTypeInstance=i,this.fromStructure=n,this.toStructure=o,Object.freeze(this)}return e.prototype.extendsWith=function(r){var t=r.signature,n=r.fromStructure,o=r.toStructure,i=r.isTypeInstance;return new e({signature:t||this.signature,fromStructure:n||this.fromStructure,toStructure:o||this.toStructure,isTypeInstance:i||this.isTypeInstance})},e}();$e.TypeTransformer=FF;var cc=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(sc,"__esModule",{value:!0});var Ue=H,lc=xe,fc=$e,dc=Ue.error.PROTOCOL_ERROR,BF=78,xF=3,WF=82,VF=5,qF=114,HF=3,zF=80,YF=3;function GF(){return new fc.TypeTransformer({signature:BF,isTypeInstance:function(e){return e instanceof Ue.Node},toStructure:function(e){throw(0,Ue.newError)("It is not allowed to pass nodes in query parameters, given: ".concat(e),dc)},fromStructure:function(e){lc.structure.verifyStructSize("Node",xF,e.size);var r=cc(e.fields,3),t=r[0],n=r[1],o=r[2];return new Ue.Node(t,n,o)}})}function KF(){return new fc.TypeTransformer({signature:WF,isTypeInstance:function(e){return e instanceof Ue.Relationship},toStructure:function(e){throw(0,Ue.newError)("It is not allowed to pass relationships in query parameters, given: ".concat(e),dc)},fromStructure:function(e){lc.structure.verifyStructSize("Relationship",VF,e.size);var r=cc(e.fields,5),t=r[0],n=r[1],o=r[2],i=r[3],a=r[4];return new Ue.Relationship(t,n,o,i,a)}})}function ZF(){return new fc.TypeTransformer({signature:qF,isTypeInstance:function(e){return e instanceof Ue.UnboundRelationship},toStructure:function(e){throw(0,Ue.newError)("It is not allowed to pass unbound relationships in query parameters, given: ".concat(e),dc)},fromStructure:function(e){lc.structure.verifyStructSize("UnboundRelationship",HF,e.size);var r=cc(e.fields,3),t=r[0],n=r[1],o=r[2];return new Ue.UnboundRelationship(t,n,o)}})}function QF(){return new fc.TypeTransformer({signature:zF,isTypeInstance:function(e){return e instanceof Ue.Path},toStructure:function(e){throw(0,Ue.newError)("It is not allowed to pass paths in query parameters, given: ".concat(e),dc)},fromStructure:function(e){lc.structure.verifyStructSize("Path",YF,e.size);for(var r=cc(e.fields,3),t=r[0],n=r[1],o=r[2],i=[],a=t[0],s=0;s<o.length;s+=2){var c=t[o[s+1]],u=(0,Ue.toNumber)(o[s]),l=void 0;u>0?(l=n[u-1],l instanceof Ue.UnboundRelationship&&(n[u-1]=l=l.bindTo(a,c))):(l=n[-u-1],l instanceof Ue.UnboundRelationship&&(n[-u-1]=l=l.bindTo(c,a))),i.push(new Ue.PathSegment(a,l,c)),a=c}return new Ue.Path(t[0],t[t.length-1],i)}})}sc.default={createNodeTransformer:GF,createRelationshipTransformer:KF,createUnboundRelationshipTransformer:ZF,createPathTransformer:QF};var XF=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),JF=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),e4=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&XF(r,e,t);return JF(r,e),r},nb=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nc,"__esModule",{value:!0});var Po=Fe,rf=xe,wr=e4(He),sn=ie,Tn=H,t4=nb(sc),r4=nb($e),a_=Tn.internal.bookmarks.Bookmarks,ob=Tn.internal.constants,u_=ob.ACCESS_MODE_WRITE,n4=ob.BOLT_PROTOCOL_V1;Tn.internal.logger.Logger;var s_=Tn.internal.txConfig.TxConfig,o4=function(){function e(r,t,n,o,i,a){var s=n===void 0?{}:n,c=s.disableLosslessIntegers,u=s.useBigInt;o===void 0&&(o=function(){return null}),this._server=r||{},this._chunker=t,this._packer=this._createPacker(t),this._unpacker=this._createUnpacker(c,u),this._responseHandler=o(this),this._log=i,this._onProtocolError=a,this._fatalError=null,this._lastMessageSignature=null,this._config={disableLosslessIntegers:c,useBigInt:u}}return Object.defineProperty(e.prototype,"transformer",{get:function(){var r=this;return this._transformer===void 0&&(this._transformer=new r4.default(Object.values(t4.default).map(function(t){return t(r._config,r._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return n4},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportsReAuth",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initialized",{get:function(){return!!this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authToken",{get:function(){return this._authToken},enumerable:!1,configurable:!0}),e.prototype.packer=function(){return this._packer},e.prototype.packable=function(r){return this._packer.packable(r,this.transformer.toStructure)},e.prototype.unpacker=function(){return this._unpacker},e.prototype.unpack=function(r){return this._unpacker.unpack(r,this.transformer.fromStructure)},e.prototype.transformMetadata=function(r){return r},e.prototype.initialize=function(r){var t=this,n=r===void 0?{}:r,o=n.userAgent;n.boltAgent;var i=n.authToken,a=n.notificationFilter,s=n.onError,c=n.onComplete,u=new sn.LoginObserver({onError:function(l){return t._onLoginError(l,s)},onCompleted:function(l){return t._onLoginCompleted(l,c)}});return(0,Po.assertNotificationFilterIsEmpty)(a,this._onProtocolError,u),this.write(wr.default.init(o,i),u,!0),u},e.prototype.logoff=function(r){var t=r===void 0?{}:r,n=t.onComplete,o=t.onError;t.flush;var i=new sn.LogoffObserver({onCompleted:n,onError:o}),a=(0,Tn.newError)("Driver is connected to a database that does not support logoff. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(a.message),i.onError(a),a},e.prototype.logon=function(r){var t=this,n=r===void 0?{}:r,o=n.authToken,i=n.onComplete,a=n.onError;n.flush;var s=new sn.LoginObserver({onCompleted:function(){return t._onLoginCompleted({},o,i)},onError:function(u){return t._onLoginError(u,a)}}),c=(0,Tn.newError)("Driver is connected to a database that does not support logon. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(c.message),s.onError(c),c},e.prototype.prepareToClose=function(){},e.prototype.beginTransaction=function(r){var t=r===void 0?{}:r,n=t.bookmarks,o=t.txConfig,i=t.database,a=t.mode,s=t.impersonatedUser,c=t.notificationFilter,u=t.beforeError,l=t.afterError,h=t.beforeComplete,_=t.afterComplete;return this.run("BEGIN",n?n.asBeginTransactionParameters():{},{bookmarks:n,txConfig:o,database:i,mode:a,impersonatedUser:s,notificationFilter:c,beforeError:u,afterError:l,beforeComplete:h,afterComplete:_,flush:!1})},e.prototype.commitTransaction=function(r){var t=r===void 0?{}:r,n=t.beforeError,o=t.afterError,i=t.beforeComplete,a=t.afterComplete;return this.run("COMMIT",{},{bookmarks:a_.empty(),txConfig:s_.empty(),mode:u_,beforeError:n,afterError:o,beforeComplete:i,afterComplete:a})},e.prototype.rollbackTransaction=function(r){var t=r===void 0?{}:r,n=t.beforeError,o=t.afterError,i=t.beforeComplete,a=t.afterComplete;return this.run("ROLLBACK",{},{bookmarks:a_.empty(),txConfig:s_.empty(),mode:u_,beforeError:n,afterError:o,beforeComplete:i,afterComplete:a})},e.prototype.run=function(r,t,n){var o=n===void 0?{}:n;o.bookmarks;var i=o.txConfig,a=o.database;o.mode;var s=o.impersonatedUser,c=o.notificationFilter,u=o.beforeKeys,l=o.afterKeys,h=o.beforeError,_=o.afterError,y=o.beforeComplete,b=o.afterComplete,O=o.flush,P=O===void 0?!0:O,I=o.highRecordWatermark,j=I===void 0?Number.MAX_VALUE:I,S=o.lowRecordWatermark,A=S===void 0?Number.MAX_VALUE:S,T=new sn.ResultStreamObserver({server:this._server,beforeKeys:u,afterKeys:l,beforeError:h,afterError:_,beforeComplete:y,afterComplete:b,highRecordWatermark:j,lowRecordWatermark:A});return(0,Po.assertTxConfigIsEmpty)(i,this._onProtocolError,T),(0,Po.assertDatabaseIsEmpty)(a,this._onProtocolError,T),(0,Po.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,T),(0,Po.assertNotificationFilterIsEmpty)(c,this._onProtocolError,T),this.write(wr.default.run(r,t),T,!1),this.write(wr.default.pullAll(),T,P),T},Object.defineProperty(e.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),e.prototype.reset=function(r){var t=r===void 0?{}:r,n=t.onError,o=t.onComplete,i=new sn.ResetObserver({onProtocolError:this._onProtocolError,onError:n,onComplete:o});return this.write(wr.default.reset(),i,!0),i},e.prototype.telemetry=function(r,t){r.api;var n=t===void 0?{}:t;n.onError;var o=n.onCompleted,i=new sn.CompletedObserver;return o&&o(),i},e.prototype._createPacker=function(r){return new rf.v1.Packer(r)},e.prototype._createUnpacker=function(r,t){return new rf.v1.Unpacker(r,t)},e.prototype.write=function(r,t,n){var o=this.queueObserverIfProtocolIsNotBroken(t);if(o){this._log.isDebugEnabled()&&this._log.debug("C: ".concat(r)),this._lastMessageSignature=r.signature;var i=new rf.structure.Structure(r.signature,r.fields);this.packable(i)(),this._chunker.messageBoundary(),n&&this._chunker.flush()}},e.prototype.isLastMessageLogon=function(){return this._lastMessageSignature===wr.SIGNATURES.HELLO||this._lastMessageSignature===wr.SIGNATURES.LOGON},e.prototype.isLastMessageReset=function(){return this._lastMessageSignature===wr.SIGNATURES.RESET},e.prototype.notifyFatalError=function(r){return this._fatalError=r,this._responseHandler._notifyErrorToObservers(r)},e.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},e.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},e.prototype.queueObserverIfProtocolIsNotBroken=function(r){return this.isBroken()?(this.notifyFatalErrorToObserver(r),!1):this._responseHandler._queueObserver(r)},e.prototype.isBroken=function(){return!!this._fatalError},e.prototype.notifyFatalErrorToObserver=function(r){r&&r.onError&&r.onError(this._fatalError)},e.prototype.resetFailure=function(){this._responseHandler._resetFailure()},e.prototype._onLoginCompleted=function(r,t,n){if(this._initialized=!0,this._authToken=t,r){var o=r.server;this._server.version||(this._server.version=o)}n&&n(r)},e.prototype._onLoginError=function(r,t){this._onProtocolError(r.message),t&&t(r)},e}();nc.default=o4;var hc={},vc={},Mt={};Object.defineProperty(Mt,"__esModule",{value:!0});Mt.epochSecondAndNanoToLocalDateTime=Mt.nanoOfDayToLocalTime=Mt.epochDayToDate=void 0;var $r=H,hr=$r.internal.temporalUtil,i4=hr.DAYS_0000_TO_1970,nf=hr.DAYS_PER_400_YEAR_CYCLE,c_=hr.NANOS_PER_HOUR,l_=hr.NANOS_PER_MINUTE,Lf=hr.NANOS_PER_SECOND,f_=hr.SECONDS_PER_DAY,a4=hr.floorDiv,u4=hr.floorMod;function ib(e){e=(0,$r.int)(e);var r=e.add(i4).subtract(60),t=(0,$r.int)(0);if(r.lessThan(0)){var n=r.add(1).div(nf).subtract(1);t=n.multiply(400),r=r.add(n.multiply(-nf))}var o=r.multiply(400).add(591).div(nf),i=r.subtract(o.multiply(365).add(o.div(4)).subtract(o.div(100)).add(o.div(400)));i.lessThan(0)&&(o=o.subtract(1),i=r.subtract(o.multiply(365).add(o.div(4)).subtract(o.div(100)).add(o.div(400)))),o=o.add(t);var a=i,s=a.multiply(5).add(2).div(153),c=s.add(2).modulo(12).add(1),u=a.subtract(s.multiply(306).add(5).div(10)).add(1);return o=o.add(s.div(10)),new $r.Date(o,c,u)}Mt.epochDayToDate=ib;function ab(e){e=(0,$r.int)(e);var r=e.div(c_);e=e.subtract(r.multiply(c_));var t=e.div(l_);e=e.subtract(t.multiply(l_));var n=e.div(Lf),o=e.subtract(n.multiply(Lf));return new $r.LocalTime(r,t,n,o)}Mt.nanoOfDayToLocalTime=ab;function s4(e,r){var t=a4(e,f_),n=u4(e,f_),o=n.multiply(Lf).add(r),i=ib(t),a=ab(o);return new $r.LocalDateTime(i.year,i.month,i.day,a.hour,a.minute,a.second,a.nanosecond)}Mt.epochSecondAndNanoToLocalDateTime=s4;var qu=f&&f.__assign||function(){return qu=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},qu.apply(this,arguments)},Ft=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},c4=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vc,"__esModule",{value:!0});var de=H,De=xe,Bt=$e,io=Mt,l4=c4(sc),Rd=de.internal.temporalUtil,f4=Rd.dateToEpochDay,jd=Rd.localDateTimeToEpochSecond,ub=Rd.localTimeToNanoOfDay,d_=88,d4=3,h_=89,h4=4,v_=69,v4=4,__=116,_4=1,p_=84,p4=2,m_=68,m4=1,y_=100,y4=2,b_=70,b4=3,g_=102,g4=3;function O4(){return new Bt.TypeTransformer({signature:d_,isTypeInstance:function(e){return(0,de.isPoint)(e)&&(e.z===null||e.z===void 0)},toStructure:function(e){return new De.structure.Structure(d_,[(0,de.int)(e.srid),e.x,e.y])},fromStructure:function(e){De.structure.verifyStructSize("Point2D",d4,e.size);var r=Ft(e.fields,3),t=r[0],n=r[1],o=r[2];return new de.Point(t,n,o,void 0)}})}function E4(){return new Bt.TypeTransformer({signature:h_,isTypeInstance:function(e){return(0,de.isPoint)(e)&&e.z!==null&&e.z!==void 0},toStructure:function(e){return new De.structure.Structure(h_,[(0,de.int)(e.srid),e.x,e.y,e.z])},fromStructure:function(e){De.structure.verifyStructSize("Point3D",h4,e.size);var r=Ft(e.fields,4),t=r[0],n=r[1],o=r[2],i=r[3];return new de.Point(t,n,o,i)}})}function w4(){return new Bt.TypeTransformer({signature:v_,isTypeInstance:de.isDuration,toStructure:function(e){var r=(0,de.int)(e.months),t=(0,de.int)(e.days),n=(0,de.int)(e.seconds),o=(0,de.int)(e.nanoseconds);return new De.structure.Structure(v_,[r,t,n,o])},fromStructure:function(e){De.structure.verifyStructSize("Duration",v4,e.size);var r=Ft(e.fields,4),t=r[0],n=r[1],o=r[2],i=r[3];return new de.Duration(t,n,o,i)}})}function T4(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Bt.TypeTransformer({signature:__,isTypeInstance:de.isLocalTime,toStructure:function(n){var o=ub(n.hour,n.minute,n.second,n.nanosecond);return new De.structure.Structure(__,[o])},fromStructure:function(n){De.structure.verifyStructSize("LocalTime",_4,n.size);var o=Ft(n.fields,1),i=o[0],a=(0,io.nanoOfDayToLocalTime)(i);return ao(a,r,t)}})}function S4(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Bt.TypeTransformer({signature:p_,isTypeInstance:de.isTime,toStructure:function(n){var o=ub(n.hour,n.minute,n.second,n.nanosecond),i=(0,de.int)(n.timeZoneOffsetSeconds);return new De.structure.Structure(p_,[o,i])},fromStructure:function(n){De.structure.verifyStructSize("Time",p4,n.size);var o=Ft(n.fields,2),i=o[0],a=o[1],s=(0,io.nanoOfDayToLocalTime)(i),c=new de.Time(s.hour,s.minute,s.second,s.nanosecond,a);return ao(c,r,t)}})}function P4(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Bt.TypeTransformer({signature:m_,isTypeInstance:de.isDate,toStructure:function(n){var o=f4(n.year,n.month,n.day);return new De.structure.Structure(m_,[o])},fromStructure:function(n){De.structure.verifyStructSize("Date",m4,n.size);var o=Ft(n.fields,1),i=o[0],a=(0,io.epochDayToDate)(i);return ao(a,r,t)}})}function C4(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Bt.TypeTransformer({signature:y_,isTypeInstance:de.isLocalDateTime,toStructure:function(n){var o=jd(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),i=(0,de.int)(n.nanosecond);return new De.structure.Structure(y_,[o,i])},fromStructure:function(n){De.structure.verifyStructSize("LocalDateTime",y4,n.size);var o=Ft(n.fields,2),i=o[0],a=o[1],s=(0,io.epochSecondAndNanoToLocalDateTime)(i,a);return ao(s,r,t)}})}function I4(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Bt.TypeTransformer({signature:g_,isTypeInstance:function(n){return(0,de.isDateTime)(n)&&n.timeZoneId!=null},toStructure:function(n){var o=jd(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),i=(0,de.int)(n.nanosecond),a=n.timeZoneId;return new De.structure.Structure(g_,[o,i,a])},fromStructure:function(n){De.structure.verifyStructSize("DateTimeWithZoneId",g4,n.size);var o=Ft(n.fields,3),i=o[0],a=o[1],s=o[2],c=(0,io.epochSecondAndNanoToLocalDateTime)(i,a),u=new de.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,c.nanosecond,null,s);return ao(u,r,t)}})}function A4(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Bt.TypeTransformer({signature:b_,isTypeInstance:function(n){return(0,de.isDateTime)(n)&&n.timeZoneId==null},toStructure:function(n){var o=jd(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),i=(0,de.int)(n.nanosecond),a=(0,de.int)(n.timeZoneOffsetSeconds);return new De.structure.Structure(b_,[o,i,a])},fromStructure:function(n){De.structure.verifyStructSize("DateTimeWithZoneOffset",b4,n.size);var o=Ft(n.fields,3),i=o[0],a=o[1],s=o[2],c=(0,io.epochSecondAndNanoToLocalDateTime)(i,a),u=new de.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,c.nanosecond,s,null);return ao(u,r,t)}})}function ao(e,r,t){if(!r&&!t)return e;var n=function(s){return t?s.toBigInt():s.toNumberOrInfinity()},o=Object.create(Object.getPrototypeOf(e));for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)===!0){var a=e[i];o[i]=(0,de.isInt)(a)?n(a):a}return Object.freeze(o),o}vc.default=qu(qu({},l4.default),{createPoint2DTransformer:O4,createPoint3DTransformer:E4,createDurationTransformer:w4,createLocalTimeTransformer:T4,createTimeTransformer:S4,createDateTransformer:P4,createLocalDateTimeTransformer:C4,createDateTimeWithZoneIdTransformer:I4,createDateTimeWithOffsetTransformer:A4});var R4=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_c=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hc,"__esModule",{value:!0});var j4=_c(nc),O_=_c(xe),$4=H,M4=_c(vc),k4=_c($e),N4=$4.internal.constants.BOLT_PROTOCOL_V2,D4=function(e){R4(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype._createPacker=function(t){return new O_.default.Packer(t)},r.prototype._createUnpacker=function(t,n){return new O_.default.Unpacker(t,n)},Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new k4.default(Object.values(M4.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return N4},enumerable:!1,configurable:!0}),r}(j4.default);hc.default=D4;var pc={},mc={},Uf=f&&f.__assign||function(){return Uf=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Uf.apply(this,arguments)},L4=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(mc,"__esModule",{value:!0});var U4=L4(vc);mc.default=Uf({},U4.default);var F4=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Hu=f&&f.__assign||function(){return Hu=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Hu.apply(this,arguments)},yc=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pc,"__esModule",{value:!0});var B4=yc(hc),Tr=yc(He),Sr=Fe,Ir=ie,x4=yc(mc),W4=yc($e),$d=H;$d.internal.bookmarks.Bookmarks;var V4=$d.internal.constants.BOLT_PROTOCOL_V3,q4=$d.internal.txConfig.TxConfig,sb="context",H4="CALL dbms.cluster.routing.getRoutingTable($".concat(sb,")"),z4=new Ir.StreamObserver,Y4=function(e){F4(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return V4},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new W4.default(Object.values(x4.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.transformMetadata=function(t){return"t_first"in t&&(t.result_available_after=t.t_first,delete t.t_first),"t_last"in t&&(t.result_consumed_after=t.t_last,delete t.t_last),t},r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l=new Ir.LoginObserver({onError:function(h){return n._onLoginError(h,c)},onCompleted:function(h){return n._onLoginCompleted(h,a,u)}});return(0,Sr.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(Tr.default.hello(i,a),l,!0),l},r.prototype.prepareToClose=function(){this.write(Tr.default.goodbye(),z4,!0)},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.impersonatedUser,c=n.notificationFilter,u=n.mode,l=n.beforeError,h=n.afterError,_=n.beforeComplete,y=n.afterComplete,b=new Ir.ResultStreamObserver({server:this._server,beforeError:l,afterError:h,beforeComplete:_,afterComplete:y});return b.prepareToHandleSingleResponse(),(0,Sr.assertDatabaseIsEmpty)(a,this._onProtocolError,b),(0,Sr.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,b),(0,Sr.assertNotificationFilterIsEmpty)(c,this._onProtocolError,b),this.write(Tr.default.begin({bookmarks:o,txConfig:i,mode:u}),b,!0),b},r.prototype.commitTransaction=function(t){var n=t===void 0?{}:t,o=n.beforeError,i=n.afterError,a=n.beforeComplete,s=n.afterComplete,c=new Ir.ResultStreamObserver({server:this._server,beforeError:o,afterError:i,beforeComplete:a,afterComplete:s});return c.prepareToHandleSingleResponse(),this.write(Tr.default.commit(),c,!0),c},r.prototype.rollbackTransaction=function(t){var n=t===void 0?{}:t,o=n.beforeError,i=n.afterError,a=n.beforeComplete,s=n.afterComplete,c=new Ir.ResultStreamObserver({server:this._server,beforeError:o,afterError:i,beforeComplete:a,afterComplete:s});return c.prepareToHandleSingleResponse(),this.write(Tr.default.rollback(),c,!0),c},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.impersonatedUser,l=i.notificationFilter,h=i.mode,_=i.beforeKeys,y=i.afterKeys,b=i.beforeError,O=i.afterError,P=i.beforeComplete,I=i.afterComplete,j=i.flush,S=j===void 0?!0:j,A=i.highRecordWatermark,T=A===void 0?Number.MAX_VALUE:A,F=i.lowRecordWatermark,z=F===void 0?Number.MAX_VALUE:F,x=new Ir.ResultStreamObserver({server:this._server,beforeKeys:_,afterKeys:y,beforeError:b,afterError:O,beforeComplete:P,afterComplete:I,highRecordWatermark:T,lowRecordWatermark:z});return(0,Sr.assertDatabaseIsEmpty)(c,this._onProtocolError,x),(0,Sr.assertImpersonatedUserIsEmpty)(u,this._onProtocolError,x),(0,Sr.assertNotificationFilterIsEmpty)(l,this._onProtocolError,x),this.write(Tr.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,mode:h}),x,!1),this.write(Tr.default.pullAll(),x,S),x},r.prototype.requestRoutingInformation=function(t){var n,o=t.routingContext,i=o===void 0?{}:o,a=t.sessionContext,s=a===void 0?{}:a,c=t.onError,u=t.onCompleted,l=this.run(H4,(n={},n[sb]=i,n),Hu(Hu({},s),{txConfig:q4.empty()}));return new Ir.ProcedureRouteObserver({resultObserver:l,onProtocolError:this._onProtocolError,onError:c,onCompleted:u})},r}(B4.default);pc.default=Y4;var bc={},gc={},Ff=f&&f.__assign||function(){return Ff=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ff.apply(this,arguments)},G4=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gc,"__esModule",{value:!0});var K4=G4(mc);gc.default=Ff({},K4.default);var Z4=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zu=f&&f.__assign||function(){return zu=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},zu.apply(this,arguments)},Oc=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bc,"__esModule",{value:!0});var Q4=Oc(pc),Co=Oc(He),gu=Fe,of=ie,X4=Oc(gc),J4=Oc($e),Md=H;Md.internal.bookmarks.Bookmarks;var cb=Md.internal.constants,eB=cb.BOLT_PROTOCOL_V4_0,tB=cb.FETCH_ALL,rB=Md.internal.txConfig.TxConfig,lb="context",fb="database",nB="CALL dbms.routing.getRoutingTable($".concat(lb,", $").concat(fb,")"),oB=function(e){Z4(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return eB},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new J4.default(Object.values(X4.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.impersonatedUser,c=n.notificationFilter,u=n.mode,l=n.beforeError,h=n.afterError,_=n.beforeComplete,y=n.afterComplete,b=new of.ResultStreamObserver({server:this._server,beforeError:l,afterError:h,beforeComplete:_,afterComplete:y});return b.prepareToHandleSingleResponse(),(0,gu.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,b),(0,gu.assertNotificationFilterIsEmpty)(c,this._onProtocolError,b),this.write(Co.default.begin({bookmarks:o,txConfig:i,database:a,mode:u}),b,!0),b},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.impersonatedUser,l=i.notificationFilter,h=i.mode,_=i.beforeKeys,y=i.afterKeys,b=i.beforeError,O=i.afterError,P=i.beforeComplete,I=i.afterComplete,j=i.flush,S=j===void 0?!0:j,A=i.reactive,T=A===void 0?!1:A,F=i.fetchSize,z=F===void 0?tB:F,x=i.highRecordWatermark,re=x===void 0?Number.MAX_VALUE:x,le=i.lowRecordWatermark,be=le===void 0?Number.MAX_VALUE:le,ne=new of.ResultStreamObserver({server:this._server,reactive:T,fetchSize:z,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:_,afterKeys:y,beforeError:b,afterError:O,beforeComplete:P,afterComplete:I,highRecordWatermark:re,lowRecordWatermark:be});(0,gu.assertImpersonatedUserIsEmpty)(u,this._onProtocolError,ne),(0,gu.assertNotificationFilterIsEmpty)(l,this._onProtocolError,ne);var me=T;return this.write(Co.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,database:c,mode:h}),ne,me&&S),T||this.write(Co.default.pull({n:z}),ne,S),ne},r.prototype._requestMore=function(t,n,o){this.write(Co.default.pull({stmtId:t,n}),o,!0)},r.prototype._requestDiscard=function(t,n){this.write(Co.default.discard({stmtId:t}),n,!0)},r.prototype._noOp=function(){},r.prototype.requestRoutingInformation=function(t){var n,o=t.routingContext,i=o===void 0?{}:o,a=t.databaseName,s=a===void 0?null:a,c=t.sessionContext,u=c===void 0?{}:c,l=t.onError,h=t.onCompleted,_=this.run(nB,(n={},n[lb]=i,n[fb]=s,n),zu(zu({},u),{txConfig:rB.empty()}));return new of.ProcedureRouteObserver({resultObserver:_,onProtocolError:this._onProtocolError,onError:l,onCompleted:h})},r}(Q4.default);bc.default=oB;var Ec={},wc={},Bf=f&&f.__assign||function(){return Bf=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Bf.apply(this,arguments)},iB=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wc,"__esModule",{value:!0});var aB=iB(gc);wc.default=Bf({},aB.default);var uB=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Tc=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ec,"__esModule",{value:!0});var sB=Tc(bc),cB=Tc(He),lB=ie,fB=H,dB=Fe,hB=Tc(wc),vB=Tc($e),_B=fB.internal.constants.BOLT_PROTOCOL_V4_1,pB=function(e){uB(r,e);function r(t,n,o,i,a,s,c){i===void 0&&(i=function(){return null});var u=e.call(this,t,n,o,i,a,s)||this;return u._serversideRouting=c,u}return Object.defineProperty(r.prototype,"version",{get:function(){return _B},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new vB.default(Object.values(hB.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l=new lB.LoginObserver({onError:function(h){return n._onLoginError(h,c)},onCompleted:function(h){return n._onLoginCompleted(h,a,u)}});return(0,dB.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(cB.default.hello(i,a,this._serversideRouting),l,!0),l},r}(sB.default);Ec.default=pB;var Sc={},Pc={},xf=f&&f.__assign||function(){return xf=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},xf.apply(this,arguments)},mB=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pc,"__esModule",{value:!0});var yB=mB(wc);Pc.default=xf({},yB.default);var bB=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),kd=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sc,"__esModule",{value:!0});var gB=kd(Ec),OB=H,EB=kd(Pc),wB=kd($e),TB=OB.internal.constants.BOLT_PROTOCOL_V4_2,SB=function(e){bB(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return TB},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new wB.default(Object.values(EB.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r}(gB.default);Sc.default=SB;var Xa={},Cc={},Wf=f&&f.__assign||function(){return Wf=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Wf.apply(this,arguments)},PB=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cc,"__esModule",{value:!0});var CB=PB(Pc);Cc.default=Wf({},CB.default);var Ja={},eu={},Vf=f&&f.__assign||function(){return Vf=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Vf.apply(this,arguments)},IB=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(eu,"__esModule",{value:!0});var AB=IB(Cc);eu.default=Vf({},AB.default);var db=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},RB=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ja,"__esModule",{value:!0});var Yu=xe,et=H,hb=RB(eu),jB=Mt,$B=Wr,Yo=et.internal.temporalUtil.localDateTimeToEpochSecond,E_=73,MB=3,w_=105,kB=3;function NB(e,r){var t=e.disableLosslessIntegers,n=e.useBigInt,o=hb.default.createDateTimeWithZoneIdTransformer(e);return o.extendsWith({signature:w_,fromStructure:function(i){Yu.structure.verifyStructSize("DateTimeWithZoneId",kB,i.size);var a=db(i.fields,3),s=a[0],c=a[1],u=a[2],l=qf(u,s,c),h=new et.DateTime(l.year,l.month,l.day,l.hour,l.minute,l.second,(0,et.int)(c),l.timeZoneOffsetSeconds,u);return vb(h,t,n)},toStructure:function(i){var a=Yo(i.year,i.month,i.day,i.hour,i.minute,i.second,i.nanosecond),s=i.timeZoneOffsetSeconds!=null?i.timeZoneOffsetSeconds:DB(i.timeZoneId,a,i.nanosecond);i.timeZoneOffsetSeconds==null&&r.warn('DateTime objects without "timeZoneOffsetSeconds" property are prune to bugs related to ambiguous times. For instance, 2022-10-30T2:30:00[Europe/Berlin] could be GMT+1 or GMT+2.');var c=a.subtract(s),u=(0,et.int)(i.nanosecond),l=i.timeZoneId;return new Yu.structure.Structure(w_,[c,u,l])}})}function DB(e,r,t){var n=qf(e,r,t),o=Yo(n.year,n.month,n.day,n.hour,n.minute,n.second,t),i=o.subtract(r),a=r.subtract(i),s=qf(e,a,t),c=Yo(s.year,s.month,s.day,s.hour,s.minute,s.second,t),u=c.subtract(a);return u}var af=new Map;function LB(e){if(!af.has(e)){var r=new Intl.DateTimeFormat("en-US",{timeZone:e,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,era:"narrow"});af.set(e,r)}return af.get(e)}function qf(e,r,t){var n=LB(e),o=(0,et.int)(r).multiply(1e3).add((0,et.int)(t).div(1e6)).toNumber(),i=n.formatToParts(o),a=i.reduce(function(c,u){return u.type==="era"?c.adjustEra=u.value.toUpperCase()==="B"?function(l){return l.subtract(1).negate()}:$B.identity:u.type==="hour"?c.hour=(0,et.int)(u.value).modulo(24):u.type!=="literal"&&(c[u.type]=(0,et.int)(u.value)),c},{});a.year=a.adjustEra(a.year);var s=Yo(a.year,a.month,a.day,a.hour,a.minute,a.second,a.nanosecond);return a.timeZoneOffsetSeconds=s.subtract(r),a.hour=a.hour.modulo(24),a}function UB(e){var r=e.disableLosslessIntegers,t=e.useBigInt,n=hb.default.createDateTimeWithOffsetTransformer(e);return n.extendsWith({signature:E_,toStructure:function(o){var i=Yo(o.year,o.month,o.day,o.hour,o.minute,o.second,o.nanosecond),a=(0,et.int)(o.nanosecond),s=(0,et.int)(o.timeZoneOffsetSeconds),c=i.subtract(s);return new Yu.structure.Structure(E_,[c,a,s])},fromStructure:function(o){Yu.structure.verifyStructSize("DateTimeWithZoneOffset",MB,o.size);var i=db(o.fields,3),a=i[0],s=i[1],c=i[2],u=(0,et.int)(a).add(c),l=(0,jB.epochSecondAndNanoToLocalDateTime)(u,s),h=new et.DateTime(l.year,l.month,l.day,l.hour,l.minute,l.second,l.nanosecond,c,null);return vb(h,r,t)}})}function vb(e,r,t){if(!r&&!t)return e;var n=function(s){return t?s.toBigInt():s.toNumberOrInfinity()},o=Object.create(Object.getPrototypeOf(e));for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)===!0){var a=e[i];o[i]=(0,et.isInt)(a)?n(a):a}return Object.freeze(o),o}Ja.default={createDateTimeWithZoneIdTransformer:NB,createDateTimeWithOffsetTransformer:UB};var FB=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gu=f&&f.__assign||function(){return Gu=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Gu.apply(this,arguments)},tu=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xa,"__esModule",{value:!0});var BB=tu(Sc),T_=tu(He),S_=ie,xB=Fe,P_=tu(Cc),WB=tu(Ja),C_=tu($e),_b=H,VB=_b.internal.bookmarks.Bookmarks,qB=_b.internal.constants.BOLT_PROTOCOL_V4_3,HB=function(e){FB(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return qB},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new C_.default(Object.values(P_.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.requestRoutingInformation=function(t){var n=t.routingContext,o=n===void 0?{}:n,i=t.databaseName,a=i===void 0?null:i,s=t.sessionContext,c=s===void 0?{}:s,u=t.onError,l=t.onCompleted,h=new S_.RouteObserver({onProtocolError:this._onProtocolError,onError:u,onCompleted:l}),_=c.bookmarks||VB.empty();return this.write(T_.default.route(o,_.values(),a),h,!0),h},r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l=new S_.LoginObserver({onError:function(h){return n._onLoginError(h,c)},onCompleted:function(h){return h.patch_bolt!==void 0&&n._applyPatches(h.patch_bolt),n._onLoginCompleted(h,a,u)}});return(0,xB.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(T_.default.hello(i,a,this._serversideRouting,["utc"]),l,!0),l},r.prototype._applyPatches=function(t){t.includes("utc")&&this._applyUtcPatch()},r.prototype._applyUtcPatch=function(){var t=this;this._transformer=new C_.default(Object.values(Gu(Gu({},P_.default),WB.default)).map(function(n){return n(t._config,t._log)}))},r}(BB.default);Xa.default=HB;var Ic={},zB=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ku=f&&f.__assign||function(){return Ku=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ku.apply(this,arguments)},ru=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ic,"__esModule",{value:!0});var YB=ru(Xa),pb=H,Ou=ru(He),uf=ie,I_=Fe,A_=ru(eu),GB=ru(Ja),R_=ru($e),mb=pb.internal.constants,KB=mb.BOLT_PROTOCOL_V4_4,ZB=mb.FETCH_ALL,QB=pb.internal.bookmarks.Bookmarks,XB=function(e){zB(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return KB},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new R_.default(Object.values(A_.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.requestRoutingInformation=function(t){var n=t.routingContext,o=n===void 0?{}:n,i=t.databaseName,a=i===void 0?null:i,s=t.impersonatedUser,c=s===void 0?null:s,u=t.sessionContext,l=u===void 0?{}:u,h=t.onError,_=t.onCompleted,y=new uf.RouteObserver({onProtocolError:this._onProtocolError,onError:h,onCompleted:_}),b=l.bookmarks||QB.empty();return this.write(Ou.default.routeV4x4(o,b.values(),{databaseName:a,impersonatedUser:c}),y,!0),y},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.mode,l=i.impersonatedUser,h=i.notificationFilter,_=i.beforeKeys,y=i.afterKeys,b=i.beforeError,O=i.afterError,P=i.beforeComplete,I=i.afterComplete,j=i.flush,S=j===void 0?!0:j,A=i.reactive,T=A===void 0?!1:A,F=i.fetchSize,z=F===void 0?ZB:F,x=i.highRecordWatermark,re=x===void 0?Number.MAX_VALUE:x,le=i.lowRecordWatermark,be=le===void 0?Number.MAX_VALUE:le,ne=new uf.ResultStreamObserver({server:this._server,reactive:T,fetchSize:z,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:_,afterKeys:y,beforeError:b,afterError:O,beforeComplete:P,afterComplete:I,highRecordWatermark:re,lowRecordWatermark:be});(0,I_.assertNotificationFilterIsEmpty)(h,this._onProtocolError,ne);var me=T;return this.write(Ou.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l}),ne,me&&S),T||this.write(Ou.default.pull({n:z}),ne,S),ne},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.mode,c=n.impersonatedUser,u=n.notificationFilter,l=n.beforeError,h=n.afterError,_=n.beforeComplete,y=n.afterComplete,b=new uf.ResultStreamObserver({server:this._server,beforeError:l,afterError:h,beforeComplete:_,afterComplete:y});return b.prepareToHandleSingleResponse(),(0,I_.assertNotificationFilterIsEmpty)(u,this._onProtocolError,b),this.write(Ou.default.begin({bookmarks:o,txConfig:i,database:a,mode:s,impersonatedUser:c}),b,!0),b},r.prototype._applyUtcPatch=function(){var t=this;this._transformer=new R_.default(Object.values(Ku(Ku({},A_.default),GB.default)).map(function(n){return n(t._config,t._log)}))},r}(YB.default);Ic.default=XB;var Ac={},Rc={},Wo=f&&f.__assign||function(){return Wo=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Wo.apply(this,arguments)},Nd=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},yb=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rc,"__esModule",{value:!0});var Dd=xe,Ld=H,jc=yb(eu),JB=yb(Ja),e3=4,t3=8,r3=4;function n3(e){var r=jc.default.createNodeTransformer(e);return r.extendsWith({fromStructure:function(t){Dd.structure.verifyStructSize("Node",e3,t.size);var n=Nd(t.fields,4),o=n[0],i=n[1],a=n[2],s=n[3];return new Ld.Node(o,i,a,s)}})}function o3(e){var r=jc.default.createRelationshipTransformer(e);return r.extendsWith({fromStructure:function(t){Dd.structure.verifyStructSize("Relationship",t3,t.size);var n=Nd(t.fields,8),o=n[0],i=n[1],a=n[2],s=n[3],c=n[4],u=n[5],l=n[6],h=n[7];return new Ld.Relationship(o,i,a,s,c,u,l,h)}})}function i3(e){var r=jc.default.createUnboundRelationshipTransformer(e);return r.extendsWith({fromStructure:function(t){Dd.structure.verifyStructSize("UnboundRelationship",r3,t.size);var n=Nd(t.fields,4),o=n[0],i=n[1],a=n[2],s=n[3];return new Ld.UnboundRelationship(o,i,a,s)}})}Rc.default=Wo(Wo(Wo({},jc.default),JB.default),{createNodeTransformer:n3,createRelationshipTransformer:o3,createUnboundRelationshipTransformer:i3});var a3=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),$c=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ac,"__esModule",{value:!0});var u3=$c(Ic),s3=Fe,c3=$c(Rc),l3=$c($e),f3=$c(He),d3=ie,h3=H,v3=h3.internal.constants.BOLT_PROTOCOL_V5_0,_3=function(e){a3(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return v3},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new l3.default(Object.values(c3.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l=new d3.LoginObserver({onError:function(h){return n._onLoginError(h,c)},onCompleted:function(h){return n._onLoginCompleted(h,a,u)}});return(0,s3.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(f3.default.hello(i,a,this._serversideRouting),l,!0),l},r}(u3.default);Ac.default=_3;var Mc={},kc={},Hf=f&&f.__assign||function(){return Hf=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Hf.apply(this,arguments)},p3=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(kc,"__esModule",{value:!0});var m3=p3(Rc);kc.default=Hf({},m3.default);var y3=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Zu=f&&f.__assign||function(){return Zu=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Zu.apply(this,arguments)},Nc=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mc,"__esModule",{value:!0});var b3=Nc(Ac),g3=Fe,O3=Nc(kc),E3=Nc($e),sf=Nc(He),cf=ie,w3=H,T3=w3.internal.constants.BOLT_PROTOCOL_V5_1,S3=function(e){y3(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return T3},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new E3.default(Object.values(O3.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l={},h=new cf.LoginObserver({onError:function(_){return n._onLoginError(_,c)},onCompleted:function(_){return l.metadata=_,n._onLoginCompleted(_)}});return(0,g3.assertNotificationFilterIsEmpty)(s,this._onProtocolError,h),this.write(sf.default.hello5x1(i,this._serversideRouting),h,!1),this.logon({authToken:a,onComplete:function(_){return u(Zu(Zu({},_),l.metadata))},onError:c,flush:!0})},r.prototype.logon=function(t){var n=this,o=t===void 0?{}:t,i=o.authToken,a=o.onComplete,s=o.onError,c=o.flush,u=new cf.LoginObserver({onCompleted:function(){return n._onLoginCompleted(null,i,a)},onError:function(l){return n._onLoginError(l,s)}});return this.write(sf.default.logon(i),u,c),u},r.prototype.logoff=function(t){var n=t===void 0?{}:t,o=n.onComplete,i=n.onError,a=n.flush,s=new cf.LogoffObserver({onCompleted:o,onError:i});return this.write(sf.default.logoff(),s,a),s},r}(b3.default);Mc.default=S3;var Dc={},Lc={},zf=f&&f.__assign||function(){return zf=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},zf.apply(this,arguments)},P3=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lc,"__esModule",{value:!0});var C3=P3(kc);Lc.default=zf({},C3.default);var I3=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qu=f&&f.__assign||function(){return Qu=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Qu.apply(this,arguments)},Uc=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dc,"__esModule",{value:!0});var A3=Uc(Mc),R3=Uc(Lc),j3=Uc($e),Eu=Uc(He),lf=ie,$3=H,bb=$3.internal.constants,M3=bb.BOLT_PROTOCOL_V5_2,k3=bb.FETCH_ALL,N3=function(e){I3(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return M3},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new j3.default(Object.values(R3.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l={},h=new lf.LoginObserver({onError:function(_){return n._onLoginError(_,c)},onCompleted:function(_){return l.metadata=_,n._onLoginCompleted(_)}});return this.write(Eu.default.hello5x2(i,s,this._serversideRouting),h,!1),this.logon({authToken:a,onComplete:function(_){return u(Qu(Qu({},_),l.metadata))},onError:c,flush:!0})},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.mode,c=n.impersonatedUser,u=n.notificationFilter,l=n.beforeError,h=n.afterError,_=n.beforeComplete,y=n.afterComplete,b=new lf.ResultStreamObserver({server:this._server,beforeError:l,afterError:h,beforeComplete:_,afterComplete:y});return b.prepareToHandleSingleResponse(),this.write(Eu.default.begin({bookmarks:o,txConfig:i,database:a,mode:s,impersonatedUser:c,notificationFilter:u}),b,!0),b},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.mode,l=i.impersonatedUser,h=i.notificationFilter,_=i.beforeKeys,y=i.afterKeys,b=i.beforeError,O=i.afterError,P=i.beforeComplete,I=i.afterComplete,j=i.flush,S=j===void 0?!0:j,A=i.reactive,T=A===void 0?!1:A,F=i.fetchSize,z=F===void 0?k3:F,x=i.highRecordWatermark,re=x===void 0?Number.MAX_VALUE:x,le=i.lowRecordWatermark,be=le===void 0?Number.MAX_VALUE:le,ne=new lf.ResultStreamObserver({server:this._server,reactive:T,fetchSize:z,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:_,afterKeys:y,beforeError:b,afterError:O,beforeComplete:P,afterComplete:I,highRecordWatermark:re,lowRecordWatermark:be}),me=T;return this.write(Eu.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l,notificationFilter:h}),ne,me&&S),T||this.write(Eu.default.pull({n:z}),ne,S),ne},r}(A3.default);Dc.default=N3;var Fc={},Bc={},Yf=f&&f.__assign||function(){return Yf=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Yf.apply(this,arguments)},D3=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bc,"__esModule",{value:!0});var L3=D3(Lc);Bc.default=Yf({},L3.default);var U3=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xu=f&&f.__assign||function(){return Xu=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Xu.apply(this,arguments)},xc=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fc,"__esModule",{value:!0});var F3=xc(Dc),B3=xc(Bc),x3=xc($e),W3=xc(He),V3=ie,q3=H,H3=q3.internal.constants.BOLT_PROTOCOL_V5_3,z3=function(e){U3(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return H3},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new x3.default(Object.values(B3.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent,a=o.boltAgent,s=o.authToken,c=o.notificationFilter,u=o.onError,l=o.onComplete,h={},_=new V3.LoginObserver({onError:function(y){return n._onLoginError(y,u)},onCompleted:function(y){return h.metadata=y,n._onLoginCompleted(y)}});return this.write(W3.default.hello5x3(i,a,c,this._serversideRouting),_,!1),this.logon({authToken:s,onComplete:function(y){return l(Xu(Xu({},y),h.metadata))},onError:u,flush:!0})},r}(F3.default);Fc.default=z3;var Ud={},Fd={},Gf=f&&f.__assign||function(){return Gf=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Gf.apply(this,arguments)},Y3=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fd,"__esModule",{value:!0});var G3=Y3(Bc);Fd.default=Gf({},G3.default);var K3=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Wc=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ud,"__esModule",{value:!0});var Z3=Wc(Fc),Q3=Wc(Fd),X3=Wc(He),J3=ie,e6=Wc($e),t6=H,r6=t6.internal.constants.BOLT_PROTOCOL_V5_4,n6=function(e){K3(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return r6},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new e6.default(Object.values(Q3.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.telemetry=function(t,n){var o=t.api,i=n===void 0?{}:n,a=i.onError,s=i.onCompleted,c=new J3.TelemetryObserver({onCompleted:s,onError:a});return this.write(X3.default.telemetry({api:o}),c,!1),c},r}(Z3.default);Ud.default=n6;var Bd={};Object.defineProperty(Bd,"__esModule",{value:!0});var Pr=H,o6=112,i6=113,a6=126,u6=127;function It(){}function j_(e){return e}var s6={onNext:It,onCompleted:It,onError:It},c6=function(){function e(r){var t=r===void 0?{}:r,n=t.transformMetadata,o=t.log,i=t.observer;this._pendingObservers=[],this._log=o,this._transformMetadata=n||j_,this._observer=Object.assign({onObserversCountChange:It,onError:It,onFailure:It,onErrorApplyTransformation:j_},i)}return Object.defineProperty(e.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),e.prototype.handleResponse=function(r){var t=r.fields[0];switch(r.signature){case i6:this._log.isDebugEnabled()&&this._log.debug("S: RECORD ".concat(Pr.json.stringify(r))),this._currentObserver.onNext(t);break;case o6:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS ".concat(Pr.json.stringify(r)));try{var n=this._transformMetadata(t);this._currentObserver.onCompleted(n)}finally{this._updateCurrentObserver()}break;case u6:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE ".concat(Pr.json.stringify(r)));try{var o=l6(t.code),i=(0,Pr.newError)(t.message,o);this._currentFailure=this._observer.onErrorApplyTransformation(i),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case a6:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED ".concat(Pr.json.stringify(r)));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,Pr.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,Pr.newError)("Unknown Bolt protocol message: "+r))}},e.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onObserversCountChange(this._observersCount)},Object.defineProperty(e.prototype,"_observersCount",{get:function(){return this._currentObserver==null?this._pendingObservers.length:this._pendingObservers.length+1},enumerable:!1,configurable:!0}),e.prototype._queueObserver=function(r){return r=r||s6,r.onCompleted=r.onCompleted||It,r.onError=r.onError||It,r.onNext=r.onNext||It,this._currentObserver===void 0?this._currentObserver=r:this._pendingObservers.push(r),this._observer.onObserversCountChange(this._observersCount),!0},e.prototype._notifyErrorToObservers=function(r){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(r);this._pendingObservers.length>0;){var t=this._pendingObservers.shift();t&&t.onError&&t.onError(r)}},e.prototype.hasOngoingObservableRequests=function(){return this._currentObserver!=null||this._pendingObservers.length>0},e.prototype._resetFailure=function(){this._currentFailure=null},e}();Bd.default=c6;function l6(e){return e==="Neo.TransientError.Transaction.Terminated"?"Neo.ClientError.Transaction.Terminated":e==="Neo.TransientError.Transaction.LockClientStopped"?"Neo.ClientError.Transaction.LockClientStopped":e}var Xe=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cd,"__esModule",{value:!0});var f6=H,d6=Xe(nc),h6=Xe(hc),v6=Xe(pc),_6=Xe(bc),p6=Xe(Ec),m6=Xe(Sc),y6=Xe(Xa),b6=Xe(Ic),g6=Xe(Ac),O6=Xe(Mc),E6=Xe(Dc),w6=Xe(Fc),T6=Xe(Ud),S6=Xe(Bd);function P6(e){var r=e===void 0?{}:e,t=r.version,n=r.chunker,o=r.dechunker,i=r.channel,a=r.disableLosslessIntegers,s=r.useBigInt,c=r.serversideRouting,u=r.server,l=r.log,h=r.observer,_=function(y){var b=new S6.default({transformMetadata:y.transformMetadata.bind(y),log:l,observer:h});return i.onerror=h.onError.bind(h),i.onmessage=function(O){return o.write(O)},o.onmessage=function(O){try{b.handleResponse(y.unpack(O))}catch(P){return h.onError(P)}},b};return C6(t,u,n,{disableLosslessIntegers:a,useBigInt:s},c,_,h.onProtocolError.bind(h),l)}Cd.default=P6;function C6(e,r,t,n,o,i,a,s){switch(e){case 1:return new d6.default(r,t,n,i,s,a);case 2:return new h6.default(r,t,n,i,s,a);case 3:return new v6.default(r,t,n,i,s,a);case 4:return new _6.default(r,t,n,i,s,a);case 4.1:return new p6.default(r,t,n,i,s,a,o);case 4.2:return new m6.default(r,t,n,i,s,a,o);case 4.3:return new y6.default(r,t,n,i,s,a,o);case 4.4:return new b6.default(r,t,n,i,s,a,o);case 5:return new g6.default(r,t,n,i,s,a,o);case 5.1:return new O6.default(r,t,n,i,s,a,o);case 5.2:return new E6.default(r,t,n,i,s,a,o);case 5.3:return new w6.default(r,t,n,i,s,a,o);case 5.4:return new T6.default(r,t,n,i,s,a,o);default:throw(0,f6.newError)("Unknown Bolt protocol version: "+e)}}(function(e){var r=f&&f.__createBinding||(Object.create?function(c,u,l,h){h===void 0&&(h=l);var _=Object.getOwnPropertyDescriptor(u,l);(!_||("get"in _?!u.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(c,h,_)}:function(c,u,l,h){h===void 0&&(h=l),c[h]=u[l]}),t=f&&f.__exportStar||function(c,u){for(var l in c)l!=="default"&&!Object.prototype.hasOwnProperty.call(u,l)&&r(u,c,l)},n=f&&f.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.RawRoutingTable=e.BoltProtocol=void 0;var o=n(bd),i=n(Cd),a=n(Xa),s=n(oc);t(ie,e),e.BoltProtocol=a.default,e.RawRoutingTable=s.default,e.default={handshake:o.default,create:i.default}})(yd);var xd={},er={};Object.defineProperty(er,"__esModule",{value:!0});er.DEFAULT_ACQUISITION_TIMEOUT=er.DEFAULT_MAX_SIZE=void 0;var ku=100;er.DEFAULT_MAX_SIZE=ku;var Nu=60*1e3;er.DEFAULT_ACQUISITION_TIMEOUT=Nu;var I6=function(){function e(r,t){this.maxSize=$_(r,ku),this.acquisitionTimeout=$_(t,Nu)}return e.defaultConfig=function(){return new e(ku,Nu)},e.fromDriverConfig=function(r){var t=M_(r.maxConnectionPoolSize),n=t?r.maxConnectionPoolSize:ku,o=M_(r.connectionAcquisitionTimeout),i=o?r.connectionAcquisitionTimeout:Nu;return new e(n,i)},e}();er.default=I6;function $_(e,r){return e===0||e?e:r}function M_(e){return e===0||e}var Wd={},wu=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Tu=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},A6=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wd,"__esModule",{value:!0});var R6=A6(er),Kf=H,j6=Kf.internal.logger.Logger,$6=function(){function e(r){var t=r===void 0?{}:r,n=t.create,o=n===void 0?function(S,A,T){return Promise.resolve()}:n,i=t.destroy,a=i===void 0?function(S){return Promise.resolve()}:i,s=t.validateOnAcquire,c=s===void 0?function(S,A){return!0}:s,u=t.validateOnRelease,l=u===void 0?function(S){return!0}:u,h=t.installIdleObserver,_=h===void 0?function(S,A){}:h,y=t.removeIdleObserver,b=y===void 0?function(S){}:y,O=t.config,P=O===void 0?R6.default.defaultConfig():O,I=t.log,j=I===void 0?j6.noOp():I;this._create=o,this._destroy=a,this._validateOnAcquire=c,this._validateOnRelease=l,this._installIdleObserver=_,this._removeIdleObserver=b,this._maxSize=P.maxSize,this._acquisitionTimeout=P.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=j,this._closed=!1}return e.prototype.acquire=function(r,t,n){var o=this,i=t.asKey(),a=this._acquireRequests,s=a[i];return s||(a[i]=[]),new Promise(function(c,u){var l=null,h=setTimeout(function(){var _=a[i];if(_&&(a[i]=_.filter(function(O){return O!==l})),!l.isCompleted()){var y=o.activeResourceCount(t),b=o.has(t)?o._pools[i].length:0;l.reject((0,Kf.newError)("Connection acquisition timed out in ".concat(o._acquisitionTimeout," ms. Pool status: Active conn count = ").concat(y,", Idle conn count = ").concat(b,".")))}},o._acquisitionTimeout);l=new k6(i,r,n,c,u,h,o._log),a[i].push(l),o._processPendingAcquireRequests(t)})},e.prototype.purge=function(r){return this._purgeKey(r.asKey())},e.prototype.apply=function(r,t){var n=r.asKey();n in this._pools&&this._pools[n].apply(t)},e.prototype.close=function(){return wu(this,void 0,void 0,function(){var r=this;return Tu(this,function(t){switch(t.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(n){return r._purgeKey(n)}))];case 1:return[2,t.sent()]}})})},e.prototype.keepAll=function(r){var t=this,n=r.map(function(a){return a.asKey()}),o=Object.keys(this._pools),i=o.filter(function(a){return n.indexOf(a)===-1});return Promise.all(i.map(function(a){return t._purgeKey(a)}))},e.prototype.has=function(r){return r.asKey()in this._pools},e.prototype.activeResourceCount=function(r){return this._activeResourceCounts[r.asKey()]||0},e.prototype._getOrInitializePoolFor=function(r){var t=this._pools[r];return t||(t=new N6,this._pools[r]=t,this._pendingCreates[r]=0),t},e.prototype._acquire=function(r,t,n){return wu(this,void 0,void 0,function(){var o,i,a,c,s,c,u,l=this;return Tu(this,function(h){switch(h.label){case 0:if(this._closed)throw(0,Kf.newError)("Pool is closed, it is no more able to serve requests.");if(o=t.asKey(),i=this._getOrInitializePoolFor(o),n)return[3,6];h.label=1;case 1:return i.length?(a=i.pop(),this._removeIdleObserver&&this._removeIdleObserver(a),[4,this._validateOnAcquire(r,a)]):[3,6];case 2:return h.sent()?(k_(o,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(a," acquired from the pool ").concat(o)),[2,{resource:a,pool:i}]):[3,3];case 3:return i.removeInUse(a),[4,this._destroy(a)];case 4:h.sent(),h.label=5;case 5:return[3,1];case 6:if(this._maxSize>0&&(c=this.activeResourceCount(t)+this._pendingCreates[o],c>=this._maxSize))return[2,{resource:null,pool:i}];this._pendingCreates[o]=this._pendingCreates[o]+1,h.label=7;case 7:return h.trys.push([7,,11,12]),c=this.activeResourceCount(t)+i.length,c>=this._maxSize&&n?(u=i.pop(),this._removeIdleObserver&&this._removeIdleObserver(u),i.removeInUse(u),[4,this._destroy(u)]):[3,9];case 8:h.sent(),h.label=9;case 9:return[4,this._create(r,t,function(_,y){return l._release(_,y,i)})];case 10:return s=h.sent(),i.pushInUse(s),k_(o,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(s," created for the pool ").concat(o)),[3,12];case 11:return this._pendingCreates[o]=this._pendingCreates[o]-1,[7];case 12:return[2,{resource:s,pool:i}]}})})},e.prototype._release=function(r,t,n){return wu(this,void 0,void 0,function(){var o,i=this;return Tu(this,function(a){switch(a.label){case 0:o=r.asKey(),a.label=1;case 1:return a.trys.push([1,,9,10]),n.isActive()?[4,this._validateOnRelease(t)]:[3,6];case 2:return a.sent()?[3,4]:(this._log.isDebugEnabled()&&this._log.debug("".concat(t," destroyed and can't be released to the pool ").concat(o," because it is not functional")),n.removeInUse(t),[4,this._destroy(t)]);case 3:return a.sent(),[3,5];case 4:this._installIdleObserver&&this._installIdleObserver(t,{onError:function(s){i._log.debug("Idle connection ".concat(t," destroyed because of error: ").concat(s));var c=i._pools[o];c&&(i._pools[o]=c.filter(function(u){return u!==t}),c.removeInUse(t)),i._destroy(t).catch(function(){})}}),n.push(t),this._log.isDebugEnabled()&&this._log.debug("".concat(t," released to the pool ").concat(o)),a.label=5;case 5:return[3,8];case 6:return this._log.isDebugEnabled()&&this._log.debug("".concat(t," destroyed and can't be released to the pool ").concat(o," because pool has been purged")),n.removeInUse(t),[4,this._destroy(t)];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:return M6(o,this._activeResourceCounts),this._processPendingAcquireRequests(r),[7];case 10:return[2]}})})},e.prototype._purgeKey=function(r){return wu(this,void 0,void 0,function(){var t,n,o;return Tu(this,function(i){switch(i.label){case 0:if(t=this._pools[r],n=[],!t)return[3,2];for(;t.length;)o=t.pop(),this._removeIdleObserver&&this._removeIdleObserver(o),n.push(this._destroy(o));return t.close(),delete this._pools[r],[4,Promise.all(n)];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype._processPendingAcquireRequests=function(r){var t=this,n=r.asKey(),o=this._acquireRequests[n];if(o){var i=o.shift();i?this._acquire(i.context,r,i.requireNew).catch(function(a){return i.reject(a),{resource:null}}).then(function(a){var s=a.resource,c=a.pool;s?i.isCompleted()?t._release(r,s,c):i.resolve(s):i.isCompleted()||(t._acquireRequests[n]||(t._acquireRequests[n]=[]),t._acquireRequests[n].unshift(i))}):delete this._acquireRequests[n]}},e}();function k_(e,r){var t=r[e]||0;r[e]=t+1}function M6(e,r){var t=r[e]||0,n=t-1;n>0?r[e]=n:delete r[e]}var k6=function(){function e(r,t,n,o,i,a,s){this._key=r,this._context=t,this._resolve=o,this._reject=i,this._timeoutId=a,this._log=s,this._completed=!1,this._config=n||{}}return Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requireNew",{get:function(){return this._config.requireNew||!1},enumerable:!1,configurable:!0}),e.prototype.isCompleted=function(){return this._completed},e.prototype.resolve=function(r){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug("".concat(r," acquired from the pool ").concat(this._key)),this._resolve(r))},e.prototype.reject=function(r){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(r))},e}(),N6=function(){function e(){this._active=!0,this._elements=[],this._elementsInUse=new Set}return e.prototype.isActive=function(){return this._active},e.prototype.close=function(){this._active=!1,this._elements=[],this._elementsInUse=new Set},e.prototype.filter=function(r){return this._elements=this._elements.filter(r),this},e.prototype.apply=function(r){this._elements.forEach(r),this._elementsInUse.forEach(r)},Object.defineProperty(e.prototype,"length",{get:function(){return this._elements.length},enumerable:!1,configurable:!0}),e.prototype.pop=function(){var r=this._elements.pop();return this._elementsInUse.add(r),r},e.prototype.push=function(r){return this._elementsInUse.delete(r),this._elements.push(r)},e.prototype.pushInUse=function(r){this._elementsInUse.add(r)},e.prototype.removeInUse=function(r){this._elementsInUse.delete(r)},e}();Wd.default=$6;(function(e){var r=f&&f.__createBinding||(Object.create?function(s,c,u,l){l===void 0&&(l=u);var h=Object.getOwnPropertyDescriptor(c,u);(!h||("get"in h?!c.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(s,l,h)}:function(s,c,u,l){l===void 0&&(l=u),s[l]=c[u]}),t=f&&f.__setModuleDefault||(Object.create?function(s,c){Object.defineProperty(s,"default",{enumerable:!0,value:c})}:function(s,c){s.default=c}),n=f&&f.__importStar||function(s){if(s&&s.__esModule)return s;var c={};if(s!=null)for(var u in s)u!=="default"&&Object.prototype.hasOwnProperty.call(s,u)&&r(c,s,u);return t(c,s),c},o=f&&f.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_MAX_SIZE=e.DEFAULT_ACQUISITION_TIMEOUT=e.PoolConfig=e.Pool=void 0;var i=n(er);e.PoolConfig=i.default,Object.defineProperty(e,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return i.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(e,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return i.DEFAULT_MAX_SIZE}});var a=o(Wd);e.Pool=a.default,e.default=a.default})(xd);var gb={},Vc={},D6=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Vc,"__esModule",{value:!0});var L6=H,U6=function(e){D6(r,e);function r(t){var n=e.call(this)||this;return n._connection=t,n}return r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t;n.accessMode,n.database,n.bookmarks;var o=this._connection;return this._connection=null,Promise.resolve(o)},r}(L6.ConnectionProvider);Vc.default=U6;var nu={},qc={},ou={},F6=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ou,"__esModule",{value:!0});var B6=H,x6=function(e){F6(r,e);function r(t){var n=e.call(this)||this;return n._errorHandler=t,n}return Object.defineProperty(r.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"authToken",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(r.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.connect=function(t,n,o,i){throw new Error("not implemented")},r.prototype.write=function(t,n,o){throw new Error("not implemented")},r.prototype.close=function(){throw new Error("not implemented")},r.prototype.handleAndTransformError=function(t,n){return this._errorHandler?this._errorHandler.handleAndTransformError(t,n,this):t},r}(B6.Connection);ou.default=x6;var iu={},W6=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),N_=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},D_=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Ob=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(iu,"__esModule",{value:!0});iu.createChannelConnection=void 0;var Su=no,ln=H,V6=Ob(ou),L_=Ob(yd),q6=ln.error.PROTOCOL_ERROR,H6=ln.internal.logger.Logger,z6=0;function Y6(e,r,t,n,o,i){o===void 0&&(o=null),i===void 0&&(i=function(c){return new Su.Channel(c)});var a=new Su.ChannelConfig(e,r,t.errorCode()),s=i(a);return L_.default.handshake(s,n).then(function(c){var u=c.protocolVersion,l=c.consumeRemainingBuffer,h=new Su.Chunker(s),_=new Su.Dechunker,y=function(O){return L_.default.create({version:u,channel:s,chunker:h,dechunker:_,disableLosslessIntegers:r.disableLosslessIntegers,useBigInt:r.useBigInt,serversideRouting:o,server:O.server,log:O.logger,observer:{onObserversCountChange:O._handleOngoingRequestsNumberChange.bind(O),onError:O._handleFatalError.bind(O),onFailure:O._resetOnFailure.bind(O),onProtocolError:O._handleProtocolError.bind(O),onErrorApplyTransformation:function(P){return O.handleAndTransformError(P,O._address)}}})},b=new Eb(s,t,e,n,r.disableLosslessIntegers,o,h,r.notificationFilter,y,r.telemetryDisabled);return l(function(O){return _.write(O)}),b}).catch(function(c){return s.close().then(function(){throw c})})}iu.createChannelConnection=Y6;var Eb=function(e){W6(r,e);function r(t,n,o,i,a,s,c,u,l,h){a===void 0&&(a=!1),s===void 0&&(s=null);var _=e.call(this,n)||this;return _._authToken=null,_._idle=!1,_._reseting=!1,_._resetObservers=[],_._id=z6++,_._address=o,_._server={address:o.asHostPort()},_._creationTimestamp=Date.now(),_._disableLosslessIntegers=a,_._ch=t,_._chunker=c,_._log=G6(_,i),_._serversideRouting=s,_._notificationFilter=u,_._telemetryDisabledDriverConfig=h===!0,_._telemetryDisabledConnection=!0,_._dbConnectionId=null,_._protocol=l(_),_._isBroken=!1,_._log.isDebugEnabled()&&_._log.debug("created towards ".concat(o)),_}return r.prototype.beginTransaction=function(t){return this._sendTelemetryIfEnabled(t),this._protocol.beginTransaction(t)},r.prototype.run=function(t,n,o){return this._sendTelemetryIfEnabled(o),this._protocol.run(t,n,o)},r.prototype._sendTelemetryIfEnabled=function(t){this._telemetryDisabledConnection||this._telemetryDisabledDriverConfig||t==null||t.apiTelemetryConfig==null||this._protocol.telemetry({api:t.apiTelemetryConfig.api},{onCompleted:t.apiTelemetryConfig.onTelemetrySuccess,onError:t.beforeError})},r.prototype.commitTransaction=function(t){return this._protocol.commitTransaction(t)},r.prototype.rollbackTransaction=function(t){return this._protocol.rollbackTransaction(t)},r.prototype.getProtocolVersion=function(){return this._protocol.version},Object.defineProperty(r.prototype,"authToken",{get:function(){return this._authToken},set:function(t){this._authToken=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return this._protocol.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(t){this._dbConnectionId=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){return this._idleTimestamp},set:function(t){this._idleTimestamp=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){return this._creationTimestamp},enumerable:!1,configurable:!0}),r.prototype.connect=function(t,n,o,i){return N_(this,void 0,void 0,function(){var a=this;return D_(this,function(s){switch(s.label){case 0:if(this._protocol.initialized&&!this._protocol.supportsReAuth)throw(0,ln.newError)("Connection does not support re-auth");return this._authToken=o,this._protocol.initialized?[3,2]:[4,this._initialize(t,n,o)];case 1:return[2,s.sent()];case 2:return i?[4,new Promise(function(c,u){a._protocol.logoff({onError:u}),a._protocol.logon({authToken:o,onError:u,onComplete:function(){return c(a)},flush:!0})})]:[3,4];case 3:return[2,s.sent()];case 4:return this._protocol.logoff(),this._protocol.logon({authToken:o,flush:!0}),[2,this]}})})},r.prototype._initialize=function(t,n,o){var i=this,a=this;return new Promise(function(s,c){i._protocol.initialize({userAgent:t,boltAgent:n,authToken:o,notificationFilter:i._notificationFilter,onError:function(u){return c(u)},onComplete:function(u){if(u){var l=u.server;(!i.version||l)&&(i.version=l);var h=u.connection_id;if(i.databaseId||(i.databaseId=h),u.hints){var _=u.hints["connection.recv_timeout_seconds"];if(_!=null){var y=(0,ln.toNumber)(_);Number.isInteger(y)&&y>0?i._ch.setupReceiveTimeout(y*1e3):i._log.info("Server located at ".concat(i._address," supplied an invalid connection receive timeout value (").concat(y,"). ")+"Please, verify the server configuration and status because this can be the symptom of a bigger issue.")}var b=u.hints["telemetry.enabled"];b===!0&&(i._telemetryDisabledConnection=!1)}}s(a)}})})},r.prototype.protocol=function(){return this._protocol},Object.defineProperty(r.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return this._server.version},set:function(t){this._server.version=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),r.prototype._handleFatalError=function(t){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||t,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by ".concat(this._error," (").concat(ln.json.stringify(this._error),")")),this._protocol.notifyFatalError(this._error)},r.prototype._setIdle=function(t){this._idle=!0,this._ch.stopReceiveTimeout(),this._protocol.queueObserverIfProtocolIsNotBroken(t)},r.prototype._unsetIdle=function(){this._idle=!1,this._updateCurrentObserver()},r.prototype._queueObserver=function(t){return this._protocol.queueObserverIfProtocolIsNotBroken(t)},r.prototype.hasOngoingObservableRequests=function(){return!this._idle&&this._protocol.hasOngoingObservableRequests()},r.prototype.resetAndFlush=function(){var t=this;return new Promise(function(n,o){t._reset({onError:function(i){if(t._isBroken)o(i);else{var a=t._handleProtocolError("Received FAILURE as a response for RESET: "+i);o(a)}},onComplete:function(){n()}})})},r.prototype._resetOnFailure=function(){var t=this;this.isOpen()&&this._reset({onError:function(){t._protocol.resetFailure()},onComplete:function(){t._protocol.resetFailure()}})},r.prototype._reset=function(t){var n=this;if(this._reseting){this._protocol.isLastMessageReset()?this._resetObservers.push(t):this._protocol.reset({onError:function(i){t.onError(i)},onComplete:function(){t.onComplete()}});return}this._resetObservers.push(t),this._reseting=!0;var o=function(i){n._reseting=!1;var a=n._resetObservers;n._resetObservers=[],a.forEach(i)};this._protocol.reset({onError:function(i){o(function(a){return a.onError(i)})},onComplete:function(){o(function(i){return i.onComplete()})}})},r.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},r.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},r.prototype._handleOngoingRequestsNumberChange=function(t){this._idle||(t===0?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout())},r.prototype.close=function(){return N_(this,void 0,void 0,function(){return D_(this,function(t){switch(t.label){case 0:return this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return t.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},r.prototype.toString=function(){return"Connection [".concat(this.id,"][").concat(this.databaseId||"","]")},r.prototype._handleProtocolError=function(t){this._protocol.resetFailure(),this._updateCurrentObserver();var n=(0,ln.newError)(t,q6);return this._handleFatalError(n),n},r}(V6.default);iu.default=Eb;function G6(e,r){return new H6(r._level,function(t,n){return r._loggerFunction(t,"".concat(e," ").concat(n))})}var Vd={},K6=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Z6=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vd,"__esModule",{value:!0});var Q6=Z6(ou),X6=function(e){K6(r,e);function r(t,n){var o=e.call(this,n)||this;return n&&(o._originalErrorHandler=t._errorHandler,t._errorHandler=o._errorHandler),o._delegate=t,o}return r.prototype.beginTransaction=function(t){return this._delegate.beginTransaction(t)},r.prototype.run=function(t,n,o){return this._delegate.run(t,n,o)},r.prototype.commitTransaction=function(t){return this._delegate.commitTransaction(t)},r.prototype.rollbackTransaction=function(t){return this._delegate.rollbackTransaction(t)},r.prototype.getProtocolVersion=function(){return this._delegate.getProtocolVersion()},Object.defineProperty(r.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(t){this._delegate.databaseId=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"authToken",{get:function(){return this._delegate.authToken},set:function(t){this._delegate.authToken=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return this._delegate.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return this._delegate.version},set:function(t){this._delegate.version=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){return this._delegate.creationTimestamp},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){return this._delegate.idleTimestamp},set:function(t){this._delegate.idleTimestamp=t},enumerable:!1,configurable:!0}),r.prototype.isOpen=function(){return this._delegate.isOpen()},r.prototype.protocol=function(){return this._delegate.protocol()},r.prototype.connect=function(t,n,o,i){return this._delegate.connect(t,n,o,i)},r.prototype.write=function(t,n,o){return this._delegate.write(t,n,o)},r.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},r.prototype.hasOngoingObservableRequests=function(){return this._delegate.hasOngoingObservableRequests()},r.prototype.close=function(){return this._delegate.close()},r.prototype.release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate.release()},r}(Q6.default);Vd.default=X6;var qd={};Object.defineProperty(qd,"__esModule",{value:!0});var wb=H,J6=wb.error.SERVICE_UNAVAILABLE,e8=wb.error.SESSION_EXPIRED,t8=function(){function e(r,t,n,o){this._errorCode=r,this._handleUnavailability=t||ff,this._handleWriteFailure=n||ff,this._handleSecurityError=o||ff}return e.create=function(r){var t=r.errorCode,n=r.handleUnavailability,o=r.handleWriteFailure,i=r.handleSecurityError;return new e(t,n,o,i)},e.prototype.errorCode=function(){return this._errorCode},e.prototype.handleAndTransformError=function(r,t,n){return r8(r)?this._handleSecurityError(r,t,n):n8(r)?this._handleUnavailability(r,t,n):o8(r)?this._handleWriteFailure(r,t,n):r},e}();qd.default=t8;function r8(e){return e!=null&&e.code!=null&&e.code.startsWith("Neo.ClientError.Security.")}function n8(e){return e?e.code===e8||e.code===J6||e.code==="Neo.TransientError.General.DatabaseUnavailable":!1}function o8(e){return e?e.code==="Neo.ClientError.Cluster.NotALeader"||e.code==="Neo.ClientError.General.ForbiddenOnReadOnlyDatabase":!1}function ff(e){return e}(function(e){var r=f&&f.__createBinding||(Object.create?function(u,l,h,_){_===void 0&&(_=h);var y=Object.getOwnPropertyDescriptor(l,h);(!y||("get"in y?!l.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return l[h]}}),Object.defineProperty(u,_,y)}:function(u,l,h,_){_===void 0&&(_=h),u[_]=l[h]}),t=f&&f.__setModuleDefault||(Object.create?function(u,l){Object.defineProperty(u,"default",{enumerable:!0,value:l})}:function(u,l){u.default=l}),n=f&&f.__importStar||function(u){if(u&&u.__esModule)return u;var l={};if(u!=null)for(var h in u)h!=="default"&&Object.prototype.hasOwnProperty.call(u,h)&&r(l,u,h);return t(l,u),l},o=f&&f.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.createChannelConnection=e.ConnectionErrorHandler=e.DelegateConnection=e.ChannelConnection=e.Connection=void 0;var i=o(ou);e.Connection=i.default;var a=n(iu);e.ChannelConnection=a.default,Object.defineProperty(e,"createChannelConnection",{enumerable:!0,get:function(){return a.createChannelConnection}});var s=o(Vd);e.DelegateConnection=s.default;var c=o(qd);e.ConnectionErrorHandler=c.default,e.default=i.default})(qc);var Hd={},i8=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},a8=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Hd,"__esModule",{value:!0});var u8=H,U_=Nt,s8=function(){function e(r){var t=r.authTokenManager,n=r.userAgent,o=r.boltAgent;this._authTokenManager=t||(0,u8.staticAuthTokenManager)({}),this._userAgent=n,this._boltAgent=o}return e.prototype.authenticate=function(r){var t=r.connection,n=r.auth,o=r.skipReAuth,i=r.waitReAuth,a=r.forceReAuth;return i8(this,void 0,void 0,function(){var s,c;return a8(this,function(u){switch(u.label){case 0:return n==null?[3,3]:(s=t.supportsReAuth===!0&&(!U_.object.equals(t.authToken,n)&&o!==!0||a===!0),t.authToken==null||s?[4,t.connect(this._userAgent,this._boltAgent,n,i||!1)]:[3,2]);case 1:return[2,u.sent()];case 2:return[2,t];case 3:return[4,this._authTokenManager.getToken()];case 4:return c=u.sent(),U_.object.equals(c,t.authToken)?[3,6]:[4,t.connect(this._userAgent,this._boltAgent,c,!1)];case 5:return[2,u.sent()];case 6:return[2,t]}})})},e.prototype.handleError=function(r){var t=r.connection,n=r.code;return t&&n.startsWith("Neo.ClientError.Security.")?this._authTokenManager.handleSecurityException(t.authToken,n):!1},e}();Hd.default=s8;var zd={},c8=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},l8=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(zd,"__esModule",{value:!0});var f8=function(){function e(r){var t=r.connectionLivenessCheckTimeout;this._connectionLivenessCheckTimeout=t}return e.prototype.check=function(r){return c8(this,void 0,void 0,function(){var t;return l8(this,function(n){switch(n.label){case 0:return this._isCheckDisabled||this._isNewlyCreatedConnection(r)?[2,!0]:(t=Date.now()-r.idleTimestamp,this._connectionLivenessCheckTimeout===0||t>this._connectionLivenessCheckTimeout?[4,r.resetAndFlush().then(function(){return!0})]:[3,2]);case 1:return[2,n.sent()];case 2:return[2,!0]}})})},Object.defineProperty(e.prototype,"_isCheckDisabled",{get:function(){return this._connectionLivenessCheckTimeout==null||this._connectionLivenessCheckTimeout<0},enumerable:!1,configurable:!0}),e.prototype._isNewlyCreatedConnection=function(r){return r.authToken==null},e}();zd.default=f8;var d8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),h8=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),v8=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),_8=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&h8(r,e,t);return v8(r,e),r},Io=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Ao=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},p8=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},m8=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))},Tb=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nu,"__esModule",{value:!0});var F_=qc,df=_8(xd),No=H,y8=Tb(Hd),b8=Nt,g8=Tb(zd),O8=No.error.SERVICE_UNAVAILABLE,E8=["Neo.ClientError.Security.CredentialsExpired","Neo.ClientError.Security.Forbidden","Neo.ClientError.Security.TokenExpired","Neo.ClientError.Security.Unauthorized"],w8=function(e){d8(r,e);function r(t,n){var o=t.id,i=t.config,a=t.log,s=t.userAgent,c=t.boltAgent,u=t.authTokenManager,l=t.newPool,h=l===void 0?function(){for(var y=[],b=0;b<arguments.length;b++)y[b]=arguments[b];return new(df.default.bind.apply(df.default,m8([void 0],p8(y),!1)))}:l;n===void 0&&(n=null);var _=e.call(this)||this;return _._id=o,_._config=i,_._log=a,_._authenticationProvider=new y8.default({authTokenManager:u,userAgent:s,boltAgent:c}),_._livenessCheckProvider=new g8.default({connectionLivenessCheckTimeout:i.connectionLivenessCheckTimeout}),_._userAgent=s,_._boltAgent=c,_._createChannelConnection=n||function(y){return(0,F_.createChannelConnection)(y,_._config,_._createConnectionErrorHandler(),_._log)},_._connectionPool=h({create:_._createConnection.bind(_),destroy:_._destroyConnection.bind(_),validateOnAcquire:_._validateConnectionOnAcquire.bind(_),validateOnRelease:_._validateConnectionOnRelease.bind(_),installIdleObserver:r._installIdleObserverOnConnection.bind(_),removeIdleObserver:r._removeIdleObserverOnConnection.bind(_),config:df.PoolConfig.fromDriverConfig(i),log:_._log}),_._openConnections={},_}return r.prototype._createConnectionErrorHandler=function(){return new F_.ConnectionErrorHandler(O8)},r.prototype._createConnection=function(t,n,o){var i=this,a=t.auth;return this._createChannelConnection(n).then(function(s){return s.release=function(){return s.idleTimestamp=Date.now(),o(n,s)},i._openConnections[s.id]=s,i._authenticationProvider.authenticate({connection:s,auth:a}).catch(function(c){throw i._destroyConnection(s),c})})},r.prototype._validateConnectionOnAcquire=function(t,n){var o=t.auth,i=t.skipReAuth;return Io(this,void 0,void 0,function(){var a,s;return Ao(this,function(c){switch(c.label){case 0:if(!this._validateConnection(n))return[2,!1];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this._livenessCheckProvider.check(n)];case 2:return c.sent(),[3,4];case 3:return a=c.sent(),this._log.debug("The connection ".concat(n.id," is not alive because of an error ").concat(a.code," '").concat(a.message,"'")),[2,!1];case 4:return c.trys.push([4,6,,7]),[4,this._authenticationProvider.authenticate({connection:n,auth:o,skipReAuth:i})];case 5:return c.sent(),[2,!0];case 6:return s=c.sent(),this._log.debug("The connection ".concat(n.id," is not valid because of an error ").concat(s.code," '").concat(s.message,"'")),[2,!1];case 7:return[2]}})})},r.prototype._validateConnectionOnRelease=function(t){return t._sticky!==!0&&this._validateConnection(t)},r.prototype._validateConnection=function(t){if(!t.isOpen())return!1;var n=this._config.maxConnectionLifetime,o=Date.now()-t.creationTimestamp;return!(o>n)},r.prototype._destroyConnection=function(t){return delete this._openConnections[t.id],t.close()},r.prototype._verifyConnectivityAndGetServerVersion=function(t){var n=t.address;return Io(this,void 0,void 0,function(){var o,i;return Ao(this,function(a){switch(a.label){case 0:return[4,this._connectionPool.acquire({},n)];case 1:o=a.sent(),i=new No.ServerInfo(o.server,o.protocol().version),a.label=2;case 2:return a.trys.push([2,,5,7]),o.protocol().isLastMessageLogon()?[3,4]:[4,o.resetAndFlush()];case 3:a.sent(),a.label=4;case 4:return[3,7];case 5:return[4,o.release()];case 6:return a.sent(),[7];case 7:return[2,i]}})})},r.prototype._verifyAuthentication=function(t){var n=t.getAddress,o=t.auth;return Io(this,void 0,void 0,function(){var i,a,s,c,u,l;return Ao(this,function(h){switch(h.label){case 0:i=[],h.label=1;case 1:return h.trys.push([1,8,9,11]),[4,n()];case 2:return a=h.sent(),[4,this._connectionPool.acquire({auth:o,skipReAuth:!0},a)];case 3:if(s=h.sent(),i.push(s),c=!s.protocol().isLastMessageLogon(),!s.supportsReAuth)throw(0,No.newError)("Driver is connected to a database that does not support user switch.");return c&&s.supportsReAuth?[4,this._authenticationProvider.authenticate({connection:s,auth:o,waitReAuth:!0,forceReAuth:!0})]:[3,5];case 4:return h.sent(),[3,7];case 5:return c&&!s.supportsReAuth?[4,this._connectionPool.acquire({auth:o},a,{requireNew:!0})]:[3,7];case 6:u=h.sent(),u._sticky=!0,i.push(u),h.label=7;case 7:return[2,!0];case 8:if(l=h.sent(),E8.includes(l.code))return[2,!1];throw l;case 9:return[4,Promise.all(i.map(function(_){return _.release()}))];case 10:return h.sent(),[7];case 11:return[2]}})})},r.prototype._verifyStickyConnection=function(t){var n=t.auth,o=t.connection;return t.address,Io(this,void 0,void 0,function(){var i,a;return Ao(this,function(s){switch(s.label){case 0:return i=b8.object.equals(n,o.authToken),a=!i,o._sticky=i&&!o.supportsReAuth,a||o._sticky?[4,o.release()]:[3,2];case 1:throw s.sent(),(0,No.newError)("Driver is connected to a database that does not support user switch.");case 2:return[2]}})})},r.prototype.close=function(){return Io(this,void 0,void 0,function(){return Ao(this,function(t){switch(t.label){case 0:return[4,this._connectionPool.close()];case 1:return t.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(n){return n.close()}))];case 2:return t.sent(),[2]}})})},r._installIdleObserverOnConnection=function(t,n){t._setIdle(n)},r._removeIdleObserverOnConnection=function(t){t._unsetIdle()},r.prototype._handleSecurityError=function(t,n,o){var i=this._authenticationProvider.handleError({connection:o,code:t.code});return i&&(t.retriable=!0),t.code==="Neo.ClientError.Security.AuthorizationExpired"&&this._connectionPool.apply(n,function(a){a.authToken=null}),o&&o.close().catch(function(){}),t},r}(No.ConnectionProvider);nu.default=w8;var Yd={},T8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Vt=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},qt=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},S8=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yd,"__esModule",{value:!0});var P8=S8(nu),hf=qc,Sb=H,Hc=Sb.internal.constants,C8=Hc.BOLT_PROTOCOL_V3,I8=Hc.BOLT_PROTOCOL_V4_0,A8=Hc.BOLT_PROTOCOL_V4_4,R8=Hc.BOLT_PROTOCOL_V5_1,j8=Sb.error.SERVICE_UNAVAILABLE,$8=function(e){T8(r,e);function r(t){var n=t.id,o=t.config,i=t.log,a=t.address,s=t.userAgent,c=t.boltAgent,u=t.authTokenManager,l=t.newPool,h=e.call(this,{id:n,config:o,log:i,userAgent:s,boltAgent:c,authTokenManager:u,newPool:l})||this;return h._address=a,h}return r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t;n.accessMode;var o=n.database;n.bookmarks;var i=n.auth,a=n.forceReAuth;return Vt(this,void 0,void 0,function(){var s,c,u=this;return qt(this,function(l){switch(l.label){case 0:return s=hf.ConnectionErrorHandler.create({errorCode:j8,handleSecurityError:function(h,_,y){return u._handleSecurityError(h,_,y,o)}}),[4,this._connectionPool.acquire({auth:i,forceReAuth:a},this._address)];case 1:return c=l.sent(),i?[4,this._verifyStickyConnection({auth:i,connection:c,address:this._address})]:[3,3];case 2:return l.sent(),[2,c];case 3:return[2,new hf.DelegateConnection(c,s)]}})})},r.prototype._handleSecurityError=function(t,n,o,i){return this._log.warn("Direct driver ".concat(this._id," will close connection to ").concat(n," for database '").concat(i,"' because of an error ").concat(t.code," '").concat(t.message,"'")),e.prototype._handleSecurityError.call(this,t,n,o)},r.prototype._hasProtocolVersion=function(t){return Vt(this,void 0,void 0,function(){var n,o;return qt(this,function(i){switch(i.label){case 0:return[4,(0,hf.createChannelConnection)(this._address,this._config,this._createConnectionErrorHandler(),this._log)];case 1:return n=i.sent(),o=n.protocol()?n.protocol().version:null,[4,n.close()];case 2:return i.sent(),o?[2,t(o)]:[2,!1]}})})},r.prototype.supportsMultiDb=function(){return Vt(this,void 0,void 0,function(){return qt(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=I8})];case 1:return[2,t.sent()]}})})},r.prototype.getNegotiatedProtocolVersion=function(){var t=this;return new Promise(function(n,o){t._hasProtocolVersion(n).catch(o)})},r.prototype.supportsTransactionConfig=function(){return Vt(this,void 0,void 0,function(){return qt(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=C8})];case 1:return[2,t.sent()]}})})},r.prototype.supportsUserImpersonation=function(){return Vt(this,void 0,void 0,function(){return qt(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=A8})];case 1:return[2,t.sent()]}})})},r.prototype.supportsSessionAuth=function(){return Vt(this,void 0,void 0,function(){return qt(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=R8})];case 1:return[2,t.sent()]}})})},r.prototype.verifyAuthentication=function(t){var n=t.auth;return Vt(this,void 0,void 0,function(){var o=this;return qt(this,function(i){return[2,this._verifyAuthentication({auth:n,getAddress:function(){return o._address}})]})})},r.prototype.verifyConnectivityAndGetServerInfo=function(){return Vt(this,void 0,void 0,function(){return qt(this,function(t){switch(t.label){case 0:return[4,this._verifyConnectivityAndGetServerVersion({address:this._address})];case 1:return[2,t.sent()]}})})},r}(P8.default);Yd.default=$8;var Gd={},Vr={},Kd={},uo={},vf=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},_f=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(uo,"__esModule",{value:!0});uo.createValidRoutingTable=void 0;var nt=H,Pb=nt.internal.constants,M8=Pb.ACCESS_MODE_WRITE,k8=Pb.ACCESS_MODE_READ,pf=nt.internal.serverAddress.ServerAddress,Zd=nt.error.PROTOCOL_ERROR,N8=1,Cb=function(){function e(r){var t=r===void 0?{}:r,n=t.database,o=t.routers,i=t.readers,a=t.writers,s=t.expirationTime,c=t.ttl;this.database=n||null,this.databaseName=n||"default database",this.routers=o||[],this.readers=i||[],this.writers=a||[],this.expirationTime=s||(0,nt.int)(0),this.ttl=c}return e.fromRawRoutingTable=function(r,t,n){return Ib(r,t,n)},e.prototype.forget=function(r){this.readers=Pu(this.readers,r),this.writers=Pu(this.writers,r)},e.prototype.forgetRouter=function(r){this.routers=Pu(this.routers,r)},e.prototype.forgetWriter=function(r){this.writers=Pu(this.writers,r)},e.prototype.isStaleFor=function(r){return this.expirationTime.lessThan(Date.now())||this.routers.length<N8||r===k8&&this.readers.length===0||r===M8&&this.writers.length===0},e.prototype.isExpiredFor=function(r){return this.expirationTime.add(r).lessThan(Date.now())},e.prototype.allServers=function(){return _f(_f(_f([],vf(this.routers),!1),vf(this.readers),!1),vf(this.writers),!1)},e.prototype.toString=function(){return"RoutingTable["+"database=".concat(this.databaseName,", ")+"expirationTime=".concat(this.expirationTime,", ")+"currentTime=".concat(Date.now(),", ")+"routers=[".concat(this.routers,"], ")+"readers=[".concat(this.readers,"], ")+"writers=[".concat(this.writers,"]]")},e}();uo.default=Cb;function Pu(e,r){return e.filter(function(t){return t.asKey()!==r.asKey()})}function Ib(e,r,t){var n=t.ttl,o=L8(t,r),i=D8(t,r),a=i.routers,s=i.readers,c=i.writers;return B_(a,"routers",r),B_(s,"readers",r),new Cb({database:e||t.db,routers:a,readers:s,writers:c,expirationTime:o,ttl:n})}uo.createValidRoutingTable=Ib;function D8(e,r){try{var t=[],n=[],o=[];return e.servers.forEach(function(i){var a=i.role,s=i.addresses;a==="ROUTE"?t=mf(s).map(function(c){return pf.fromUrl(c)}):a==="WRITE"?o=mf(s).map(function(c){return pf.fromUrl(c)}):a==="READ"&&(n=mf(s).map(function(c){return pf.fromUrl(c)}))}),{routers:t,readers:n,writers:o}}catch(i){throw(0,nt.newError)("Unable to parse servers entry from router ".concat(r,` from addresses:
`).concat(nt.json.stringify(e.servers),`
Error message: `).concat(i.message),Zd)}}function L8(e,r){try{var t=(0,nt.int)(Date.now()),n=(0,nt.int)(e.ttl).multiply(1e3).add(t);return n.lessThan(t)?nt.Integer.MAX_VALUE:n}catch(o){throw(0,nt.newError)("Unable to parse TTL entry from router ".concat(r,` from raw routing table:
`).concat(nt.json.stringify(e),`
Error message: `).concat(o.message),Zd)}}function B_(e,r,t){if(e.length===0)throw(0,nt.newError)("Received no "+r+" from router "+t,Zd)}function mf(e){if(!Array.isArray(e))throw new TypeError("Array expected but got: "+e);return Array.from(e)}var U8=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Kd,"__esModule",{value:!0});var F8=U8(uo),B8=function(){function e(r){this._routingContext=r}return e.prototype.lookupRoutingTableOnRouter=function(r,t,n,o){var i=this;return r._acquireConnection(function(a){return i._requestRawRoutingTable(a,r,t,n,o).then(function(s){return s.isNull?null:F8.default.fromRawRoutingTable(t,n,s)})})},e.prototype._requestRawRoutingTable=function(r,t,n,o,i){var a=this;return new Promise(function(s,c){r.protocol().requestRoutingInformation({routingContext:a._routingContext,databaseName:n,impersonatedUser:i,sessionContext:{bookmarks:t._lastBookmarks,mode:t._mode,database:t._database,afterComplete:t._onComplete},onCompleted:s,onError:c})})},e}();Kd.default=B8;var Ab=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vr,"__esModule",{value:!0});Vr.RoutingTable=Vr.Rediscovery=void 0;var Rb=Ab(Kd);Vr.Rediscovery=Rb.default;var x8=Ab(uo);Vr.RoutingTable=x8.default;Vr.default=Rb.default;var W8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ju=f&&f.__assign||function(){return Ju=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ju.apply(this,arguments)},V8=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),q8=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),H8=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&V8(r,e,t);return q8(r,e),r},Ce=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Ie=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Zf=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},Ct=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},jb=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gd,"__esModule",{value:!0});var qe=H,x_=H8(Vr),z8=no,Y8=jb(Vc),G8=jb(nu),K8=Qt,Ht=qc,Z8=Nt,Cu=qe.error.SERVICE_UNAVAILABLE,Ro=qe.error.SESSION_EXPIRED,Q8=qe.internal.bookmarks.Bookmarks,so=qe.internal.constants,W_=so.ACCESS_MODE_READ,Iu=so.ACCESS_MODE_WRITE,X8=so.BOLT_PROTOCOL_V3,J8=so.BOLT_PROTOCOL_V4_0,ex=so.BOLT_PROTOCOL_V4_4,tx=so.BOLT_PROTOCOL_V5_1,rx="Neo.ClientError.Procedure.ProcedureNotFound",nx="Neo.ClientError.Database.DatabaseNotFound",ox="Neo.ClientError.Transaction.InvalidBookmark",ix="Neo.ClientError.Transaction.InvalidBookmarkMixture",ax="Neo.ClientError.Security.AuthorizationExpired",ux="Neo.ClientError.Statement.ArgumentError",sx="Neo.ClientError.Request.Invalid",cx="Neo.ClientError.Statement.TypeError",lx="N/A",fx="system",jo=null,dx=(0,qe.int)(3e4),hx=function(e){W8(r,e);function r(t){var n=t.id,o=t.address,i=t.routingContext,a=t.hostNameResolver,s=t.config,c=t.log,u=t.userAgent,l=t.boltAgent,h=t.authTokenManager,_=t.routingTablePurgeDelay,y=t.newPool,b=e.call(this,{id:n,config:s,log:c,userAgent:u,boltAgent:l,authTokenManager:h,newPool:y},function(O){return(0,Ht.createChannelConnection)(O,b._config,b._createConnectionErrorHandler(),b._log,b._routingContext)})||this;return b._routingContext=Ju(Ju({},i),{address:o.toString()}),b._seedRouter=o,b._rediscovery=new x_.default(b._routingContext),b._loadBalancingStrategy=new K8.LeastConnectedLoadBalancingStrategy(b._connectionPool),b._hostNameResolver=a,b._dnsResolver=new z8.HostNameResolver,b._log=c,b._useSeedRouter=!0,b._routingTableRegistry=new vx(_?(0,qe.int)(_):dx),b._refreshRoutingTable=Z8.functional.reuseOngoingRequest(b._refreshRoutingTable,b),b}return r.prototype._createConnectionErrorHandler=function(){return new Ht.ConnectionErrorHandler(Ro)},r.prototype._handleUnavailability=function(t,n,o){return this._log.warn("Routing driver ".concat(this._id," will forget ").concat(n," for database '").concat(o,"' because of an error ").concat(t.code," '").concat(t.message,"'")),this.forget(n,o||jo),t},r.prototype._handleSecurityError=function(t,n,o,i){return this._log.warn("Routing driver ".concat(this._id," will close connections to ").concat(n," for database '").concat(i,"' because of an error ").concat(t.code," '").concat(t.message,"'")),e.prototype._handleSecurityError.call(this,t,n,o,i)},r.prototype._handleWriteFailure=function(t,n,o){return this._log.warn("Routing driver ".concat(this._id," will forget writer ").concat(n," for database '").concat(o,"' because of an error ").concat(t.code," '").concat(t.message,"'")),this.forgetWriter(n,o||jo),(0,qe.newError)("No longer possible to write to server at "+n,Ro,t)},r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t,o=n.accessMode,i=n.database,a=n.bookmarks,s=n.impersonatedUser,c=n.onDatabaseNameResolved,u=n.auth;return Ce(this,void 0,void 0,function(){var l,h,_,y,b,O,P,I,j=this;return Ie(this,function(S){switch(S.label){case 0:return _={database:i||jo},y=new Ht.ConnectionErrorHandler(Ro,function(A,T){return j._handleUnavailability(A,T,_.database)},function(A,T){return j._handleWriteFailure(A,T,_.database)},function(A,T,F){return j._handleSecurityError(A,T,F,_.database)}),[4,this._freshRoutingTable({accessMode:o,database:_.database,bookmarks:a,impersonatedUser:s,auth:u,onDatabaseNameResolved:function(A){_.database=_.database||A,c&&c(A)}})];case 1:if(b=S.sent(),o===W_)h=this._loadBalancingStrategy.selectReader(b.readers),l="read";else if(o===Iu)h=this._loadBalancingStrategy.selectWriter(b.writers),l="write";else throw(0,qe.newError)("Illegal mode "+o);if(!h)throw(0,qe.newError)("Failed to obtain connection towards ".concat(l," server. Known routing table is: ").concat(b),Ro);S.label=2;case 2:return S.trys.push([2,6,,7]),[4,this._connectionPool.acquire({auth:u},h)];case 3:return O=S.sent(),u?[4,this._verifyStickyConnection({auth:u,connection:O,address:h})]:[3,5];case 4:return S.sent(),[2,O];case 5:return[2,new Ht.DelegateConnection(O,y)];case 6:throw P=S.sent(),I=y.handleAndTransformError(P,h),I;case 7:return[2]}})})},r.prototype._hasProtocolVersion=function(t){return Ce(this,void 0,void 0,function(){var n,o,i,a,s,c;return Ie(this,function(u){switch(u.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:n=u.sent(),i=0,u.label=2;case 2:if(!(i<n.length))return[3,8];u.label=3;case 3:return u.trys.push([3,6,,7]),[4,(0,Ht.createChannelConnection)(n[i],this._config,this._createConnectionErrorHandler(),this._log)];case 4:return a=u.sent(),s=a.protocol()?a.protocol().version:null,[4,a.close()];case 5:return u.sent(),s?[2,t(s)]:[2,!1];case 6:return c=u.sent(),o=c,[3,7];case 7:return i++,[3,2];case 8:if(o)throw o;return[2,!1]}})})},r.prototype.supportsMultiDb=function(){return Ce(this,void 0,void 0,function(){return Ie(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=J8})];case 1:return[2,t.sent()]}})})},r.prototype.supportsTransactionConfig=function(){return Ce(this,void 0,void 0,function(){return Ie(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=X8})];case 1:return[2,t.sent()]}})})},r.prototype.supportsUserImpersonation=function(){return Ce(this,void 0,void 0,function(){return Ie(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=ex})];case 1:return[2,t.sent()]}})})},r.prototype.supportsSessionAuth=function(){return Ce(this,void 0,void 0,function(){return Ie(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=tx})];case 1:return[2,t.sent()]}})})},r.prototype.getNegotiatedProtocolVersion=function(){var t=this;return new Promise(function(n,o){t._hasProtocolVersion(n).catch(o)})},r.prototype.verifyAuthentication=function(t){var n=t.database,o=t.accessMode,i=t.auth;return Ce(this,void 0,void 0,function(){var a=this;return Ie(this,function(s){return[2,this._verifyAuthentication({auth:i,getAddress:function(){return Ce(a,void 0,void 0,function(){var c,u,l;return Ie(this,function(h){switch(h.label){case 0:return c={database:n||jo},[4,this._freshRoutingTable({accessMode:o,database:c.database,auth:i,onDatabaseNameResolved:function(_){c.database=c.database||_}})];case 1:if(u=h.sent(),l=o===Iu?u.writers:u.readers,l.length===0)throw(0,qe.newError)("No servers available for database '".concat(c.database,"' with access mode '").concat(o,"'"),Cu);return[2,l[0]]}})})}})]})})},r.prototype.verifyConnectivityAndGetServerInfo=function(t){var n=t.database,o=t.accessMode;return Ce(this,void 0,void 0,function(){var i,a,s,c,u,l,h,_,y,b,O,P;return Ie(this,function(I){switch(I.label){case 0:return i={database:n||jo},[4,this._freshRoutingTable({accessMode:o,database:i.database,onDatabaseNameResolved:function(j){i.database=i.database||j}})];case 1:a=I.sent(),s=o===Iu?a.writers:a.readers,c=(0,qe.newError)("No servers available for database '".concat(i.database,"' with access mode '").concat(o,"'"),Cu),I.label=2;case 2:I.trys.push([2,9,10,11]),u=Zf(s),l=u.next(),I.label=3;case 3:if(l.done)return[3,8];h=l.value,I.label=4;case 4:return I.trys.push([4,6,,7]),[4,this._verifyConnectivityAndGetServerVersion({address:h})];case 5:return _=I.sent(),[2,_];case 6:return y=I.sent(),c=y,[3,7];case 7:return l=u.next(),[3,3];case 8:return[3,11];case 9:return b=I.sent(),O={error:b},[3,11];case 10:try{l&&!l.done&&(P=u.return)&&P.call(u)}finally{if(O)throw O.error}return[7];case 11:throw c}})})},r.prototype.forget=function(t,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(o){return o.forget(t)}}),this._connectionPool.purge(t).catch(function(){})},r.prototype.forgetWriter=function(t,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(o){return o.forgetWriter(t)}})},r.prototype._freshRoutingTable=function(t){var n=t===void 0?{}:t,o=n.accessMode,i=n.database,a=n.bookmarks,s=n.impersonatedUser,c=n.onDatabaseNameResolved,u=n.auth,l=this._routingTableRegistry.get(i,function(){return new x_.RoutingTable({database:i})});return l.isStaleFor(o)?(this._log.info('Routing table is stale for database: "'.concat(i,'" and access mode: "').concat(o,'": ').concat(l)),this._refreshRoutingTable(l,a,s,u).then(function(h){return c(h.database),h})):l},r.prototype._refreshRoutingTable=function(t,n,o,i){var a=t.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(a,t,n,o,i):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(a,t,n,o,i)},r.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(t,n,o,i,a){return Ce(this,void 0,void 0,function(){var s,c,u,l,h,_,y;return Ie(this,function(b){switch(b.label){case 0:return s=[],[4,this._fetchRoutingTableUsingSeedRouter(s,this._seedRouter,n,o,i,a)];case 1:return c=Ct.apply(void 0,[b.sent(),2]),u=c[0],l=c[1],u?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(t,n,o,i,a)];case 3:h=Ct.apply(void 0,[b.sent(),2]),_=h[0],y=h[1],u=_,l=y||l,b.label=4;case 4:return[4,this._applyRoutingTableIfPossible(n,u,l)];case 5:return[2,b.sent()]}})})},r.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(t,n,o,i,a){return Ce(this,void 0,void 0,function(){var s,c,u,l;return Ie(this,function(h){switch(h.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(t,n,o,i,a)];case 1:return s=Ct.apply(void 0,[h.sent(),2]),c=s[0],u=s[1],c?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(t,this._seedRouter,n,o,i,a)];case 2:l=Ct.apply(void 0,[h.sent(),2]),c=l[0],u=l[1],h.label=3;case 3:return[4,this._applyRoutingTableIfPossible(n,c,u)];case 4:return[2,h.sent()]}})})},r.prototype._fetchRoutingTableUsingKnownRouters=function(t,n,o,i,a){return Ce(this,void 0,void 0,function(){var s,c,u,l;return Ie(this,function(h){switch(h.label){case 0:return[4,this._fetchRoutingTable(t,n,o,i,a)];case 1:return s=Ct.apply(void 0,[h.sent(),2]),c=s[0],u=s[1],c?[2,[c,null]]:(l=t.length-1,r._forgetRouter(n,t,l),[2,[null,u]])}})})},r.prototype._fetchRoutingTableUsingSeedRouter=function(t,n,o,i,a,s){return Ce(this,void 0,void 0,function(){var c,u;return Ie(this,function(l){switch(l.label){case 0:return[4,this._resolveSeedRouter(n)];case 1:return c=l.sent(),u=c.filter(function(h){return t.indexOf(h)<0}),[4,this._fetchRoutingTable(u,o,i,a,s)];case 2:return[2,l.sent()]}})})},r.prototype._resolveSeedRouter=function(t){return Ce(this,void 0,void 0,function(){var n,o,i=this;return Ie(this,function(a){switch(a.label){case 0:return[4,this._hostNameResolver.resolve(t)];case 1:return n=a.sent(),[4,Promise.all(n.map(function(s){return i._dnsResolver.resolve(s)}))];case 2:return o=a.sent(),[2,[].concat.apply([],o)]}})})},r.prototype._fetchRoutingTable=function(t,n,o,i,a){return Ce(this,void 0,void 0,function(){var s=this;return Ie(this,function(c){return[2,t.reduce(function(u,l,h){return Ce(s,void 0,void 0,function(){var _,y,b,O,P,I,j;return Ie(this,function(S){switch(S.label){case 0:return[4,u];case 1:return _=Ct.apply(void 0,[S.sent(),1]),y=_[0],y?[2,[y,null]]:(b=h-1,r._forgetRouter(n,t,b),[4,this._createSessionForRediscovery(l,o,i,a)]);case 2:if(O=Ct.apply(void 0,[S.sent(),2]),P=O[0],I=O[1],!P)return[3,8];S.label=3;case 3:return S.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(P,n.database,l,i)];case 4:return[2,[S.sent(),null]];case 5:return j=S.sent(),[2,this._handleRediscoveryError(j,l)];case 6:return P.close(),[7];case 7:return[3,9];case 8:return[2,[null,I]];case 9:return[2]}})})},Promise.resolve([null,null]))]})})},r.prototype._createSessionForRediscovery=function(t,n,o,i){return Ce(this,void 0,void 0,function(){var a,s,c,u,l,h,_=this;return Ie(this,function(y){switch(y.label){case 0:return y.trys.push([0,4,,5]),[4,this._connectionPool.acquire({auth:i},t)];case 1:return a=y.sent(),i?[4,this._verifyStickyConnection({auth:i,connection:a,address:t})]:[3,3];case 2:y.sent(),y.label=3;case 3:return s=Ht.ConnectionErrorHandler.create({errorCode:Ro,handleSecurityError:function(b,O,P){return _._handleSecurityError(b,O,P)}}),c=a._sticky?new Ht.DelegateConnection(a):new Ht.DelegateConnection(a,s),u=new Y8.default(c),l=a.protocol().version,l<4?[2,[new qe.Session({mode:Iu,bookmarks:Q8.empty(),connectionProvider:u}),null]]:[2,[new qe.Session({mode:W_,database:fx,bookmarks:n,connectionProvider:u,impersonatedUser:o}),null]];case 4:return h=y.sent(),[2,this._handleRediscoveryError(h,t)];case 5:return[2]}})})},r.prototype._handleRediscoveryError=function(t,n){if(_x(t)||px(t))throw t;if(t.code===rx)throw(0,qe.newError)("Server at ".concat(n.asHostPort()," can't perform routing. Make sure you are connecting to a causal cluster"),Cu,t);return this._log.warn("unable to fetch routing table because of an error ".concat(t)),[null,t]},r.prototype._applyRoutingTableIfPossible=function(t,n,o){return Ce(this,void 0,void 0,function(){return Ie(this,function(i){switch(i.label){case 0:if(!n)throw(0,qe.newError)("Could not perform discovery. No routing servers available. Known routing table: ".concat(t),Cu,o);return n.writers.length===0&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(n)];case 1:return i.sent(),[2,n]}})})},r.prototype._updateRoutingTable=function(t){return Ce(this,void 0,void 0,function(){return Ie(this,function(n){switch(n.label){case 0:return[4,this._connectionPool.keepAll(t.allServers())];case 1:return n.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(t),this._log.info("Updated routing table ".concat(t)),[2]}})})},r._forgetRouter=function(t,n,o){var i=n[o];t&&i&&t.forgetRouter(i)},r}(G8.default);Gd.default=hx;var vx=function(){function e(r){this._tables=new Map,this._routingTablePurgeDelay=r}return e.prototype.register=function(r){return this._tables.set(r.database,r),this},e.prototype.apply=function(r,t){var n=t===void 0?{}:t,o=n.applyWhenExists,i=n.applyWhenDontExists,a=i===void 0?function(){}:i;return this._tables.has(r)?o(this._tables.get(r)):typeof r=="string"||r===null?a():this._forEach(o),this},e.prototype.get=function(r,t){return this._tables.has(r)?this._tables.get(r):typeof t=="function"?t():t},e.prototype.removeExpired=function(){var r=this;return this._removeIf(function(t){return t.isExpiredFor(r._routingTablePurgeDelay)})},e.prototype._forEach=function(r){var t,n;try{for(var o=Zf(this._tables),i=o.next();!i.done;i=o.next()){var a=Ct(i.value,2),s=a[1];r(s)}}catch(c){t={error:c}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return this},e.prototype._remove=function(r){return this._tables.delete(r),this},e.prototype._removeIf=function(r){var t,n;try{for(var o=Zf(this._tables),i=o.next();!i.done;i=o.next()){var a=Ct(i.value,2),s=a[0],c=a[1];r(c)&&this._remove(s)}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return this},e}();function _x(e){return[nx,ox,ix,ux,sx,cx,lx].includes(e.code)}function px(e){return e.code.startsWith("Neo.ClientError.Security.")&&![ax].includes(e.code)}(function(e){var r=f&&f.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.RoutingConnectionProvider=e.DirectConnectionProvider=e.PooledConnectionProvider=e.SingleConnectionProvider=void 0;var t=Vc;Object.defineProperty(e,"SingleConnectionProvider",{enumerable:!0,get:function(){return r(t).default}});var n=nu;Object.defineProperty(e,"PooledConnectionProvider",{enumerable:!0,get:function(){return r(n).default}});var o=Yd;Object.defineProperty(e,"DirectConnectionProvider",{enumerable:!0,get:function(){return r(o).default}});var i=Gd;Object.defineProperty(e,"RoutingConnectionProvider",{enumerable:!0,get:function(){return r(i).default}})})(gb);(function(e){var r=f&&f.__createBinding||(Object.create?function(i,a,s,c){c===void 0&&(c=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(i,c,u)}:function(i,a,s,c){c===void 0&&(c=s),i[c]=a[s]}),t=f&&f.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),n=f&&f.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var s in i)s!=="default"&&Object.prototype.hasOwnProperty.call(i,s)&&r(a,i,s);return t(a,i),a},o=f&&f.__exportStar||function(i,a){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&r(a,i,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.pool=e.packstream=e.channel=e.buf=e.bolt=e.loadBalancing=void 0,e.loadBalancing=n(Qt),e.bolt=n(yd),e.buf=n(Xr),e.channel=n(no),e.packstream=n(xe),e.pool=n(xd),o(gb,e)})(zm);(function(e){var r=f&&f.__awaiter||function(U,K,$,q){function Y(D){return D instanceof $?D:new $(function(N){N(D)})}return new($||($=Promise))(function(D,N){function Z(oe){try{W(q.next(oe))}catch(E){N(E)}}function ge(oe){try{W(q.throw(oe))}catch(E){N(E)}}function W(oe){oe.done?D(oe.value):Y(oe.value).then(Z,ge)}W((q=q.apply(U,K||[])).next())})},t=f&&f.__generator||function(U,K){var $={label:0,sent:function(){if(D[0]&1)throw D[1];return D[1]},trys:[],ops:[]},q,Y,D,N;return N={next:Z(0),throw:Z(1),return:Z(2)},typeof Symbol=="function"&&(N[Symbol.iterator]=function(){return this}),N;function Z(W){return function(oe){return ge([W,oe])}}function ge(W){if(q)throw new TypeError("Generator is already executing.");for(;N&&(N=0,W[0]&&($=0)),$;)try{if(q=1,Y&&(D=W[0]&2?Y.return:W[0]?Y.throw||((D=Y.return)&&D.call(Y),0):Y.next)&&!(D=D.call(Y,W[1])).done)return D;switch(Y=0,D&&(W=[W[0]&2,D.value]),W[0]){case 0:case 1:D=W;break;case 4:return $.label++,{value:W[1],done:!1};case 5:$.label++,Y=W[1],W=[0];continue;case 7:W=$.ops.pop(),$.trys.pop();continue;default:if(D=$.trys,!(D=D.length>0&&D[D.length-1])&&(W[0]===6||W[0]===2)){$=0;continue}if(W[0]===3&&(!D||W[1]>D[0]&&W[1]<D[3])){$.label=W[1];break}if(W[0]===6&&$.label<D[1]){$.label=D[1],D=W;break}if(D&&$.label<D[2]){$.label=D[2],$.ops.push(W);break}D[2]&&$.ops.pop(),$.trys.pop();continue}W=K.call(U,$)}catch(oe){W=[6,oe],Y=0}finally{q=D=0}if(W[0]&5)throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}},n=f&&f.__importDefault||function(U){return U&&U.__esModule?U:{default:U}};Object.defineProperty(e,"__esModule",{value:!0}),e.Path=e.UnboundRelationship=e.Relationship=e.Node=e.Record=e.ServerInfo=e.Notification=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.ResultSummary=e.RxResult=e.RxManagedTransaction=e.RxTransaction=e.RxSession=e.EagerResult=e.Result=e.ManagedTransaction=e.Transaction=e.Session=e.Driver=e.temporal=e.spatial=e.graph=e.error=e.routing=e.session=e.types=e.logging=e.auth=e.isRetryableError=e.Neo4jError=e.integer=e.isUnboundRelationship=e.isRelationship=e.isPathSegment=e.isPath=e.isNode=e.isDateTime=e.isLocalDateTime=e.isDate=e.isTime=e.isLocalTime=e.isDuration=e.isPoint=e.isInt=e.int=e.hasReachableServer=e.driver=e.authTokenManagers=void 0,e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationCategory=e.resultTransformers=e.bookmarkManager=e.DateTime=e.LocalDateTime=e.Date=e.Time=e.LocalTime=e.Duration=e.Integer=e.Point=e.PathSegment=void 0;var o=Rt;Object.defineProperty(e,"Driver",{enumerable:!0,get:function(){return o.Driver}});var i=n(_d),a=H;Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return a.authTokenManagers}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return a.Neo4jError}}),Object.defineProperty(e,"isRetryableError",{enumerable:!0,get:function(){return a.isRetryableError}}),Object.defineProperty(e,"error",{enumerable:!0,get:function(){return a.error}}),Object.defineProperty(e,"Integer",{enumerable:!0,get:function(){return a.Integer}}),Object.defineProperty(e,"int",{enumerable:!0,get:function(){return a.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return a.isInt}}),Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return a.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return a.Point}}),Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return a.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return a.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return a.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return a.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return a.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return a.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return a.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return a.isLocalTime}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return a.isNode}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return a.isPath}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return a.isPathSegment}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return a.isRelationship}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return a.isTime}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return a.isUnboundRelationship}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return a.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return a.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return a.Time}}),Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return a.Node}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return a.Path}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return a.PathSegment}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return a.Relationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return a.UnboundRelationship}}),Object.defineProperty(e,"Record",{enumerable:!0,get:function(){return a.Record}}),Object.defineProperty(e,"ResultSummary",{enumerable:!0,get:function(){return a.ResultSummary}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return a.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return a.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return a.QueryStatistics}}),Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return a.Notification}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return a.ServerInfo}}),Object.defineProperty(e,"Result",{enumerable:!0,get:function(){return a.Result}}),Object.defineProperty(e,"EagerResult",{enumerable:!0,get:function(){return a.EagerResult}}),Object.defineProperty(e,"auth",{enumerable:!0,get:function(){return a.auth}}),Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return a.Session}}),Object.defineProperty(e,"Transaction",{enumerable:!0,get:function(){return a.Transaction}}),Object.defineProperty(e,"ManagedTransaction",{enumerable:!0,get:function(){return a.ManagedTransaction}}),Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return a.bookmarkManager}}),Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return a.routing}}),Object.defineProperty(e,"resultTransformers",{enumerable:!0,get:function(){return a.resultTransformers}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return a.notificationCategory}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return a.notificationSeverityLevel}}),Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return a.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return a.notificationFilterMinimumSeverityLevel}});var s=zm,c=n(hs);e.RxSession=c.default;var u=n(Za);e.RxTransaction=u.default;var l=n(Ks);e.RxManagedTransaction=l.default;var h=n(ro);e.RxResult=h.default;var _=a.internal.util,y=_.ENCRYPTION_ON,b=_.assertString,O=_.isEmptyObjectOrNull,P=a.internal.serverAddress.ServerAddress,I=a.internal.urlUtil,j="neo4j-javascript/"+i.default;function S(U){return typeof U=="object"&&U!=null&&"getToken"in U&&"handleSecurityException"in U&&typeof U.getToken=="function"&&typeof U.handleSecurityException=="function"}function A(U){if(S(U))return U;var K=U;return K=K||{},K.scheme=K.scheme||"none",(0,a.staticAuthTokenManager)({authToken:K})}function T(U,K,$){$===void 0&&($={}),b(U,"Bolt URL");var q=I.parseDatabaseUrl(U),Y=!1,D=!1,N;switch(q.scheme){case"bolt":break;case"bolt+s":D=!0,N="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":D=!0,N="TRUST_ALL_CERTIFICATES";break;case"neo4j":Y=!0;break;case"neo4j+s":D=!0,N="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",Y=!0;break;case"neo4j+ssc":D=!0,N="TRUST_ALL_CERTIFICATES",Y=!0;break;default:throw new Error("Unknown scheme: ".concat(q.scheme))}if(D){if("encrypted"in $||"trust"in $)throw new Error("Encryption/trust can only be configured either through URL or config, not both");$.encrypted=y,$.trust=N}var Z=A(K);$.userAgent=$.userAgent||j,$.boltAgent=a.internal.boltAgent.fromVersion(i.default);var ge=P.fromUrl(q.hostAndPort),W={address:ge,typename:Y?"Routing":"Direct",routing:Y};return new o.Driver(W,$,oe());function oe(){if(Y)return function(E,R,M,B){return new s.RoutingConnectionProvider({id:E,config:R,log:M,hostNameResolver:B,authTokenManager:Z,address:ge,userAgent:R.userAgent,boltAgent:R.boltAgent,routingContext:q.query})};if(!O(q.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(U,"'"));return function(E,R,M){return new s.DirectConnectionProvider({id:E,config:R,log:M,authTokenManager:Z,address:ge,userAgent:R.userAgent,boltAgent:R.boltAgent})}}}e.driver=T;function F(U,K){return r(this,void 0,void 0,function(){var $;return t(this,function(q){switch(q.label){case 0:$=T(U,{scheme:"none",principal:"",credentials:""},K),q.label=1;case 1:return q.trys.push([1,,3,5]),[4,$.getNegotiatedProtocolVersion()];case 2:return q.sent(),[2,!0];case 3:return[4,$.close()];case 4:return q.sent(),[7];case 5:return[2]}})})}e.hasReachableServer=F;var z={console:function(U){return{level:U,logger:function(K,$){return console.log("".concat(f.Date.now()," ").concat(K.toUpperCase()," ").concat($))}}}};e.logging=z;var x={Node:a.Node,Relationship:a.Relationship,UnboundRelationship:a.UnboundRelationship,PathSegment:a.PathSegment,Path:a.Path,Result:a.Result,EagerResult:a.EagerResult,ResultSummary:a.ResultSummary,Record:a.Record,Point:a.Point,Date:a.Date,DateTime:a.DateTime,Duration:a.Duration,LocalDateTime:a.LocalDateTime,LocalTime:a.LocalTime,Time:a.Time,Integer:a.Integer};e.types=x;var re={READ:o.READ,WRITE:o.WRITE};e.session=re;var le={toNumber:a.toNumber,toString:a.toString,inSafeRange:a.inSafeRange};e.integer=le;var be={isPoint:a.isPoint};e.spatial=be;var ne={isDuration:a.isDuration,isLocalTime:a.isLocalTime,isTime:a.isTime,isDate:a.isDate,isLocalDateTime:a.isLocalDateTime,isDateTime:a.isDateTime};e.temporal=ne;var me={isNode:a.isNode,isPath:a.isPath,isPathSegment:a.isPathSegment,isRelationship:a.isRelationship,isUnboundRelationship:a.isUnboundRelationship};e.graph=me;var X={authTokenManagers:a.authTokenManagers,driver:T,hasReachableServer:F,int:a.int,isInt:a.isInt,isPoint:a.isPoint,isDuration:a.isDuration,isLocalTime:a.isLocalTime,isTime:a.isTime,isDate:a.isDate,isLocalDateTime:a.isLocalDateTime,isDateTime:a.isDateTime,isNode:a.isNode,isPath:a.isPath,isPathSegment:a.isPathSegment,isRelationship:a.isRelationship,isUnboundRelationship:a.isUnboundRelationship,integer:le,Neo4jError:a.Neo4jError,isRetryableError:a.isRetryableError,auth:a.auth,logging:z,types:x,session:re,routing:a.routing,error:a.error,graph:me,spatial:be,temporal:ne,Driver:o.Driver,Session:a.Session,Transaction:a.Transaction,ManagedTransaction:a.ManagedTransaction,Result:a.Result,EagerResult:a.EagerResult,RxSession:c.default,RxTransaction:u.default,RxManagedTransaction:l.default,RxResult:h.default,ResultSummary:a.ResultSummary,Plan:a.Plan,ProfiledPlan:a.ProfiledPlan,QueryStatistics:a.QueryStatistics,Notification:a.Notification,ServerInfo:a.ServerInfo,Record:a.Record,Node:a.Node,Relationship:a.Relationship,UnboundRelationship:a.UnboundRelationship,Path:a.Path,PathSegment:a.PathSegment,Point:a.Point,Integer:a.Integer,Duration:a.Duration,LocalTime:a.LocalTime,Time:a.Time,Date:a.Date,LocalDateTime:a.LocalDateTime,DateTime:a.DateTime,bookmarkManager:a.bookmarkManager,resultTransformers:a.resultTransformers,notificationCategory:a.notificationCategory,notificationSeverityLevel:a.notificationSeverityLevel,notificationFilterDisabledCategory:a.notificationFilterDisabledCategory,notificationFilterMinimumSeverityLevel:a.notificationFilterMinimumSeverityLevel};e.default=X})(Y_);const V_=Vg(Y_);const $b=e=>(H_("data-v-257c3daa"),e=e(),z_(),e),mx={id:"grid"},yx=$b(()=>ye("div",{class:"left"},null,-1)),bx=$b(()=>ye("div",{class:"center"},null,-1)),gx={class:"right"},Ox={__name:"index",setup(e){let r=Ve([]);const t=Hg(["Perfume","Alias","Year","Brand","Degree","Gender","Note","TopNote","MiddleNote","BaseNote","Fragrance","Scenarios","Vision","Sentiment","Feeling","Smell","Feature","ShopUrl"],["#81C7D4","#e09533","#e8e417","#1cbf9e","#5762e0","#7642bf","#ab02d1","#9e9e9e","#c44659","#e88a5f","#efcc40","#1fe08c","#6f54ce","#9d56c4","#f25df7","#0f0f0f","#a01652","#bf7c09"]);async function n(l){r.value=[];const _=V_.driver("neo4j://192.168.50.209",V_.auth.basic("neo4j","welcome")).session();_.run(l).then(y=>{y.records.forEach(b=>{r.value.push(b.get("p"))})}).catch(y=>{console.error(y)}).then(()=>{console.log(new Date,"获取完成，共获得数据条数:",r.value.length),_.close(),c()})}let o=ju(()=>{console.log(new Date,"computed被触发了，开始计算nodes, graphData数据是",r.value);let l=new Map;r.value.forEach(_=>{const y=_.end.properties.name,b=_.end.labels[0],O=_.start.properties.name,P=_.start.labels[0];_.segments[0].relationship.elementId,l.has(y)||l.set(y,{id:y,type:b}),l.has(O)||l.set(O,{id:O,type:P})});const h=Array.from(l.values());return console.log(new Date,"computed计算完毕，返回nodes,一共收集到了",h.length,"个节点"),h}),i=ju(()=>{console.log(new Date,"computed被触发了，开始计算links");let l=[];return r.value.forEach(h=>{const _=h.end.properties.name;h.end.labels[0];const y=h.start.properties.name;h.start.labels[0],h.segments[0].relationship.elementId,l.push({source:y,target:_})}),console.log(new Date,"computed计算完毕，返回edges,一共收集到了",l.length,"条边"),l});async function a(l){if(console.log("子组件传回的数据",l),l.func_name==="neo4j"){const h=l.func_params;await n(h)}else l.func_name==="price sort"&&u()}const s=ju(()=>{console.log(new Date,"computed被触发了，开始获取香水价格，如果提到了价格");let l=[];return r.value.forEach(h=>{let _=h.start.properties.price;_===0&&(_=Math.random()*1e3);const y=h.start.properties.name;l.push({name:y,price:_})}),console.log(new Date,"computed计算完毕，返回prices信息,一共收集到了",l.length,"条",l),l});function c(){console.log(new Date,`数据获取完成，共获取了${r.value.length}条数据，开始渲染`);const l=new Set;r.value.forEach(S=>{S.segments.forEach(A=>{A.start.labels.forEach(T=>l.add(T)),A.end.labels.forEach(T=>l.add(T))})}),console.log(new Date,"节点的类型有",l),console.log(new Date,"节点link和nodes信息",o.value,i.value);const h=928,_=680;function y(S){return`
      M${S.source.x},${S.source.y}
      A0,0 0 0,1 ${S.target.x},${S.target.y}
    `}const b=S=>{function A(z,x){z.active||S.alphaTarget(.3).restart(),x.fx=x.x,x.fy=x.y}function T(z,x){x.fx=z.x,x.fy=z.y}function F(z,x){z.active||S.alphaTarget(0),x.fx=null,x.fy=null}return r0().on("start",A).on("drag",T).on("end",F)},O=Qg(o.value).force("link",Jg(i.value).id(S=>S.id)).force("charge",Xg().strength(-6e3)).force("x",e0(h/2)).force("y",t0(_/2)),P=eh("svg").attr("viewBox",[-h/2,-_/2,h*2,_*2]).style("font","10px sans-serif");P.append("defs").selectAll("marker").data(l).join("marker").attr("id",S=>`arrow-${S}`).attr("viewBox","0 -5 10 10").attr("refX",53).attr("refY",-.5).attr("markerWidth",10).attr("markerHeight",10).attr("orient","auto").append("path").attr("fill",t).attr("d","M0,-5L10,0L0,5");const I=P.append("g").attr("fill","none").attr("stroke-width",1.5).selectAll("path").data(i.value).join("path").attr("stroke",S=>t(S.type)).attr("marker-end",S=>`url(${new URL(`#arrow-${S.type}`,location)})`),j=P.selectAll("a").data(o.value).join("a").attr("xlink:href",I==null?null:S=>`https://www.baidu.com/s?wd=${S.id.replace(/\./g,"/")}`).attr("target",I==null?null:"_blank").call(b(O));j.append("circle").attr("stroke","white").attr("stroke-width",1.5).data(o.value).attr("r",40).attr("fill",S=>t(S.type)),j.append("text").text(S=>S.id.replace(" ",`
`)).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("fill","white").attr("stroke","white").attr("stroke-width",.5),O.on("tick",()=>{I.attr("d",y),j.attr("transform",S=>`translate(${S.x},${S.y})`)}),su(".center").select("svg").remove(),su(".center").append(()=>P.node())}function u(){const P=Math.ceil((s.value.length+.1)*25)+30+10,I=zg().domain([0,Yg(s.value,T=>T.price)]).range([150,400-0]),j=Gg().domain(L0(s.value,T=>-T.price).map(T=>T.name)).rangeRound([30,P-10]).padding(.1),S=I.tickFormat(20,".1f"),A=eh("svg").attr("width",400).attr("height",P).attr("viewBox",[0,0,400,P]).attr("style","max-width: 100%; height: auto; font: 10px sans-serif;");A.append("g").attr("fill","steelblue").selectAll().data(s.value).join("rect").attr("x",I(0)).attr("y",T=>j(T.name)).attr("width",T=>I(T.price)-I(0)).attr("height",j.bandwidth()),A.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(s.value).join("text").attr("x",T=>I(T.price)).attr("y",T=>j(T.name)+j.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(T=>S(T.price)).call(T=>T.filter(F=>I(F.price)-I(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),A.append("g").attr("transform","translate(0,30)").call(Kg(I).ticks(400/80,["$",".1f"])).call(T=>T.select(".domain").remove()),A.append("g").attr("transform","translate(150,0)").call(Zg(j).tickSizeOuter(0)),su(".left").select("svg").remove(),su(".left").append(()=>A.node())}return(l,h)=>(ke(),Le("div",mx,[yx,bx,ye("div",gx,[Pt(N0,{onCustomEvent:a})])]))}},kx=Qf(Ox,[["__scopeId","data-v-257c3daa"]]);export{kx as default};
