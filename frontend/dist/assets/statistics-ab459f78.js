import{d as x,g as l,h as k,o as B,b as C,f as j,a as t,t as u,A as D,B as A,F as L}from"./index-f50d6d08.js";import{_ as z}from"./navHeader.vue_vue_type_script_setup_true_lang-f1ba1dcd.js";import{i as S}from"./index-cbf34b5d.js";import{i as M,a as N,b as O,j as v}from"./api-a3faf747.js";import"./axios-a342f982.js";const V={class:"main"},E={class:"stats shadow"},F={class:"stat"},q=t("div",{class:"stat-figure text-primary"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"inline-block w-8 h-8 stroke-current"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})])],-1),I=t("div",{class:"stat-title"},"总量",-1),P={class:"stat-value text-secondary"},Q=t("div",{class:"stat-desc"},"标注的总数量",-1),T={class:"stat"},$=t("div",{class:"stat-figure text-secondary"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"inline-block w-8 h-8 stroke-current"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1),G=t("div",{class:"stat-title"},"工具数量",-1),H={class:"stat-value text-secondary"},J=t("div",{class:"stat-desc"},"总得工具数量",-1),K={class:"stat"},R=t("div",{class:"stat-figure text-secondary"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"inline-block w-8 h-8 stroke-current"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1),U=t("div",{class:"stat-title"},"Sample数量",-1),W={class:"stat-value text-secondary"},X=t("div",{class:"stat-desc"},"问题样本数量",-1),Y=t("div",{class:"text-xl font-mono font-bold pt-0.5"}," 标注数量统计 ",-1),Z=[Y],tt={id:"labelCount",class:"w-full h-96 my-10"},it=x({__name:"statistics",setup(et){const g=l([]),m=l(0),_=l(0),h=l(0),p=l(!1);async function f(){p.value=!0;const e=await b();console.log(e);const s=e.map(n=>n.prompt_name),a=[...new Set(s)];console.log("标注数量用到的prompts是：",a);const o={};for(let n of e){for(let c of a)o[c]||(o[c]=0);const i=n.prompt_name;a.includes(i)&&(o[i]+=1)}console.log("得到的标注数量统计绘图数据是：",o);const r=Object.keys(o),d=Object.values(o);w(r,d)}const w=(e,s)=>{document.getElementById("labelCount").setAttribute("_echarts_instance_","");var a=document.getElementById("labelCount"),o=S(a);const r=["red","green","blue","yellow","purple","pink","orange","gray","black","brown","cyan","magenta","olive","lime","teal","navy","fuchsia","maroon","aqua","gold","silver"],d=s.map((i,c)=>({value:i,itemStyle:{color:r[c]}})),n={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:e},series:[{name:"统计",type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:d}]};n&&o.setOption(n),window.onresize=()=>{o.resize()}};async function b(){try{return(await v({mode:"full",limit:-1})).data}catch(e){console.log(e)}}async function y(e){const s=await v({mode:"sample",limit:e});console.log(s),g.value=s.data}return k(async()=>{await y(200);const e=await M();m.value=e.data;const s=await N();console.log(s),_.value=Object.keys(s.data).length;const a=await O({keyword:"empty"});console.log(a),h.value=a.data.length}),(e,s)=>(B(),C(L,null,[j(z),t("div",V,[t("div",E,[t("div",F,[q,I,t("div",P,u(m.value),1),Q]),t("div",T,[$,G,t("div",H,u(_.value),1),J]),t("div",K,[R,U,t("div",W,u(h.value),1),X])]),t("div",{class:"flex items-center flex-row justify-center h-20 from-teal-100 via-teal-200 to-teal-300 bg-gradient-to-br"},[t("div",{className:"rounded-3xl m-4 text-center flex flex-row w-full "},[t("button",{type:"button",onClick:f,class:"text-white bg-[#25D366] hover:bg-green-500 focus:ring-4 focus:outline-none focus:ring-[#3b5998]/50 font-medium rounded-2xl text-sm px-5 py-2.5 text-center inline-flex items-center dark:focus:ring-[#3b5998]/55 mr-2 mb-2"},Z)])]),D(t("div",tt,null,512),[[A,p.value]])])],64))}});export{it as default};
