import{I as C}from"./index-f50d6d08.js";var M={exports:{}};(function(x){function b(r,t){if(t=t||{},r=u(r),r===null)throw new TypeError("Invalid AudioData");var n=!!(t.floatingPoint||t.float),e=n?32:t.bitDepth|0||16,o=e>>3,h=r.length*r.numberOfChannels*o,i=new DataView(new Uint8Array(44+h).buffer),s=y(i),c={formatId:n?3:1,floatingPoint:n,numberOfChannels:r.numberOfChannels,sampleRate:r.sampleRate,bitDepth:e};g(s,c,i.buffer.byteLength-8);var f=F(s,c,h,r,t);if(f instanceof Error)throw f;return i.buffer}function a(r,t){return new Promise(function(n){n(b(r,t))})}function u(r){var t={};return typeof r.sampleRate!="number"||!Array.isArray(r.channelData)||!(r.channelData[0]instanceof Float32Array)?null:(t.numberOfChannels=r.channelData.length,t.length=r.channelData[0].length|0,t.sampleRate=r.sampleRate|0,t.channelData=r.channelData,t)}function g(r,t,n){var e=t.bitDepth>>3;r.string("RIFF"),r.uint32(n),r.string("WAVE"),r.string("fmt "),r.uint32(16),r.uint16(t.floatingPoint?3:1),r.uint16(t.numberOfChannels),r.uint32(t.sampleRate),r.uint32(t.sampleRate*t.numberOfChannels*e),r.uint16(t.numberOfChannels*e),r.uint16(t.bitDepth)}function F(r,t,n,e,o){var h=t.bitDepth,i=t.floatingPoint?"f":o.symmetric?"s":"",s="pcm"+h+i;if(!r[s])return new TypeError("Not supported bit depth: "+h);var c=r[s].bind(r),f=t.numberOfChannels,D=e.channelData;r.string("data"),r.uint32(n);for(var m=0,U=e.length;m<U;m++)for(var p=0;p<f;p++)c(D[p][m])}function y(r){var t=0;return{int16:function(n){r.setInt16(t,n,!0),t+=2},uint16:function(n){r.setUint16(t,n,!0),t+=2},uint32:function(n){r.setUint32(t,n,!0),t+=4},string:function(n){for(var e=0,o=n.length;e<o;e++)r.setUint8(t++,n.charCodeAt(e))},pcm8:function(n){n=Math.max(-1,Math.min(n,1)),n=(n*.5+.5)*255,n=Math.round(n)|0,r.setUint8(t,n,!0),t+=1},pcm8s:function(n){n=Math.round(n*128)+128,n=Math.max(0,Math.min(n,255)),r.setUint8(t,n,!0),t+=1},pcm16:function(n){n=Math.max(-1,Math.min(n,1)),n=n<0?n*32768:n*32767,n=Math.round(n)|0,r.setInt16(t,n,!0),t+=2},pcm16s:function(n){n=Math.round(n*32768),n=Math.max(-32768,Math.min(n,32767)),r.setInt16(t,n,!0),t+=2},pcm24:function(n){n=Math.max(-1,Math.min(n,1)),n=n<0?16777216+n*8388608:n*8388607,n=Math.round(n)|0;var e=n>>0&255,o=n>>8&255,h=n>>16&255;r.setUint8(t+0,e),r.setUint8(t+1,o),r.setUint8(t+2,h),t+=3},pcm24s:function(n){n=Math.round(n*8388608),n=Math.max(-8388608,Math.min(n,8388607));var e=n>>0&255,o=n>>8&255,h=n>>16&255;r.setUint8(t+0,e),r.setUint8(t+1,o),r.setUint8(t+2,h),t+=3},pcm32:function(n){n=Math.max(-1,Math.min(n,1)),n=n<0?n*2147483648:n*2147483647,n=Math.round(n)|0,r.setInt32(t,n,!0),t+=4},pcm32s:function(n){n=Math.round(n*2147483648),n=Math.max(-2147483648,Math.min(n,2147483647)),r.setInt32(t,n,!0),t+=4},pcm32f:function(n){r.setFloat32(t,n,!0),t+=4}}}x.exports.encode=a,x.exports.encode.sync=b})(M);var O=M.exports;const I=C(O);export{I as W};
