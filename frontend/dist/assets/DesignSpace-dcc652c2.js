import{_ as Y}from"./navbar.vue_vue_type_script_setup_true_lang-6e8001dc.js";import{s as R}from"./transform-4a56bf00.js";import{d as F,g as v,h as G,k as H,o as S,b as T,n as L,t as U,z as I,f as X,a as y,c as Z,F as J,E as M,q as K,s as Q,_ as q}from"./index-f50d6d08.js";import{c as V,q as ee,j as E,s as te,m as ne}from"./manyBody-52170d67.js";import{c as ae}from"./center-5b19297c.js";import{p as oe}from"./pointer-b52b12f8.js";import"./axios-a342f982.js";function se(s){return s.x+s.vx}function re(s){return s.y+s.vy}function le(s){var i,c,d,_=1,h=1;typeof s!="function"&&(s=V(s==null?1:+s));function r(){for(var e,o=i.length,m,u,g,b,x,C,z=0;z<h;++z)for(m=ee(i,se,re).visitAfter(j),e=0;e<o;++e)u=i[e],x=c[u.index],C=x*x,g=u.x+u.vx,b=u.y+u.vy,m.visit(B);function B(D,N,w,k,A){var f=D.data,t=D.r,a=x+t;if(f){if(f.index>u.index){var n=g-f.x-f.vx,l=b-f.y-f.vy,p=n*n+l*l;p<a*a&&(n===0&&(n=E(d),p+=n*n),l===0&&(l=E(d),p+=l*l),p=(a-(p=Math.sqrt(p)))/p*_,u.vx+=(n*=p)*(a=(t*=t)/(C+t)),u.vy+=(l*=p)*a,f.vx-=n*(a=1-a),f.vy-=l*a)}return}return N>g+a||k<g-a||w>b+a||A<b-a}}function j(e){if(e.data)return e.r=c[e.data.index];for(var o=e.r=0;o<4;++o)e[o]&&e[o].r>e.r&&(e.r=e[o].r)}function $(){if(i){var e,o=i.length,m;for(c=new Array(o),e=0;e<o;++e)m=i[e],c[m.index]=+s(m,e,i)}}return r.initialize=function(e,o){i=e,d=o,$()},r.iterations=function(e){return arguments.length?(h=+e,r):h},r.strength=function(e){return arguments.length?(_=+e,r):_},r.radius=function(e){return arguments.length?(s=typeof e=="function"?e:V(+e),$(),r):s},r}const ie={class:"w-full h-full"},ce=["width","height"],P=50,ue=F({__name:"SemanticScale",props:{data:{type:Node,required:!0}},setup(s){const i=v(!1),c=v(""),d=v(0),_=v(0),h=(t,a)=>t.length>a?t.slice(0,a)+"...":t,r=(t,a,n)=>{c.value=t,d.value=a,_.value=n,i.value=!0},j=()=>{i.value=!1},$=s,e=v(null),o=v($.data),m=v(window.innerWidth),u=v(window.innerHeight);let g;const b=t=>{t.children&&(o.value=t)},x=()=>{const t=C($.data,o.value);t&&(o.value=t)},C=(t,a)=>{if(!t.children)return null;for(const n of t.children){if(n.id===a.id)return t;const l=C(n,a);if(l)return l}return null},z=t=>{g=te(t).force("charge",ne().strength(-300)).force("center",ae(m.value/2,u.value/2)).force("collision",le().radius(P*1.5)).alpha(1).alphaDecay(.05).on("tick",()=>{B()})},B=()=>{if(!e.value)return;const t=R(e.value);t.selectAll("*").remove();const a=t.selectAll("g").data(o.value.children||[]).enter().append("g").attr("transform",n=>`translate(${n.x},${n.y})`);a.append("circle").attr("r",P).attr("fill",n=>n.children?"#2b6cb0":"#4299e1").attr("stroke",n=>n.children?"#2b6cb0":"#4299e1").attr("stroke-width",n=>n.children?10:1).attr("class","fill-blue-500 opacity-80 cursor-pointer hover:fill-blue-600 transition-colors"),a.append("text").text(n=>h(n.topic,8)).attr("class","text-sm fill-white text-center pointer-events-none").attr("dy","0.3em").attr("text-anchor","middle"),a.on("click",(n,l)=>{n.stopPropagation(),b(l)}),a.on("mouseenter",(n,l)=>{const[p,W]=oe(n);r(l.topic,p,W)}).on("mouseleave",j)},D=t=>{t.target===e.value&&x()};let N=100,w=0,k=1;const A=t=>{t.preventDefault(),w+=t.deltaY,k=1+Math.abs(w)/N,f(k),Math.abs(w)>=N&&(w<0?o.value.children&&o.value.children.length>0&&(o.value=o.value.children[0]):x(),k=1,w=0,f(k))},f=t=>{if(!e.value)return;R(e.value).selectAll("g").attr("transform",n=>`translate(${n.x}, ${n.y}) scale(${t})`)};return G(()=>{o.value.children&&z(o.value.children)}),H(o,()=>{o.value.children&&(g.nodes(o.value.children),g.alpha(1).restart())}),(t,a)=>(S(),T("div",ie,[(S(),T("svg",{ref_key:"svgRef",ref:e,width:m.value,height:u.value,onClick:D,onWheel:A,class:"bg-gray-900"},null,40,ce)),i.value?(S(),T("div",{key:0,style:L({top:_.value+"px",left:d.value+"px"}),class:"absolute bg-gray-800 text-white text-sm px-2 py-1 rounded shadow-lg"},U(c.value),5)):I("",!0)]))}});const O=s=>(K("data-v-f653ce24"),s=s(),Q(),s),de={class:"min-h-screen bg-gray-50 py-2"},fe={class:"container relative"},pe={class:"flex flex-col items-center justify-center mb-4"},he=["disabled"],ve={key:0,class:"flex items-center justify-center space-x-2"},me=O(()=>y("svg",{class:"w-8 h-8 animate-spin text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[y("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",class:"opacity-25"}),y("path",{fill:"currentColor",d:"M4 12a8 8 0 0116 0",class:"opacity-75"})],-1)),_e=O(()=>y("span",{class:"text-xl font-semibold text-blue-500"},"Loading...",-1)),ge=[me,_e],ye=F({__name:"DesignSpace",setup(s){const i="https://open.minitool.fun:15314",c=v(),d=v(!1),_=async()=>{c.value=null;try{d.value=!0;const h=await fetch(`${i}/api/space_design`,{method:"POST",headers:{"Content-Type":"application/json"}}),r=await h.json();h.ok&&r.code==0?(M({title:"成功",message:"获取数据成功",type:"success"}),c.value=r.data):M({title:"失败",message:r.msg||"获取内容失败",type:"error"})}catch{M({title:"失败",message:"请求失败，请检查网络连接",type:"error"})}finally{d.value=!1}};return(h,r)=>(S(),T(J,null,[X(Y),y("div",de,[y("div",fe,[y("div",pe,[y("button",{class:"button mx-auto z-20",disabled:d.value,onClick:_},"开始体验",8,he)]),d.value?(S(),T("div",ve,ge)):I("",!0),c.value?(S(),Z(ue,{key:1,data:c.value,class:"w-full h-full"},null,8,["data"])):I("",!0)])])],64))}});const Te=q(ye,[["__scopeId","data-v-f653ce24"]]);export{Te as default};
