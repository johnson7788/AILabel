import{a as m}from"./axios-a342f982.js";import{s as g}from"./store-1a8c456b.js";import{L as h,E as a}from"./index-f50d6d08.js";const{ME:d,username:w,edit_minds:y}=h(g()),u="https://ai.minitool.fun:15554",l=localStorage.getItem("access_token")||"",r={"Content-Type":"application/json"};l&&(r.Authorization="Bearer "+l);function M(){const n=S(24);window.location.href=`/mind/edit/${n}`}async function k(n=!0){if(d.value){const i=d.value.getData(),e=window.location.href;if(e.includes("/mind/edit")){const t=e.split("/").pop(),s=y.value;if(t&&s&&s[t]){const c=s[t],f=i.nodeData.topic,p={_id:t,content:i,author:w.value,date:c.date,name:f,updateat:new Date,openStatus:c.openStatus};try{const o=await m.post(`${u}/mind/save`,{mind_data:p},{headers:r});console.log("保存mind的结果是",o),o.data.code==0?n&&a({title:"保存成功",message:"保存成功",type:"success"}):a({title:"保存失败",message:"保存失败",type:"error"})}catch{a({title:"保存失败",message:"未登录状态不能保存mind",type:"error"})}}else a({title:"保存失败",message:"保存失败，没有找到mind的信息",type:"error"})}else{a.warning({title:"不是edit页面",message:"当前页面不是edit页面，无法保存"});return}}else a.warning({title:"无思维导图",message:"思维导图还没有创建呢"})}function S(n){let i="";const e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",t=e.length;for(let s=0;s<n;s++)i+=e.charAt(Math.floor(Math.random()*t));return i}async function E(){try{return(await m.post(`${u}/mind/check`,null,{headers:r})).data.code!==0?(a({title:"未登录",message:"当前是匿名用户",type:"warning"}),!1):!0}catch{return a({title:"服务器错误",message:"服务器无法连接",type:"warning"}),!1}}function R(n,...i){let e=new URL(n);return i.forEach(t=>{t.startsWith("/")&&(t=t.slice(1)),e.pathname.endsWith("/")||(e.pathname+="/"),e.pathname+=t}),e.toString()}export{E as C,M as N,k as S,r as h,R as j};
