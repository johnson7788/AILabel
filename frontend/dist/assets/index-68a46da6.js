import{o as x,b as D,a as e,_ as ee,g as b,k as he,h as Te,v as We,F as oe,e as ce,n as Ye,x as Ke,y as Ie,d as de,L as R,r as Ne,p as Qe,t as j,f as Me,c as W,w as qe,j as Ve,z,i as f,A as U,C as $e,D as Je,E as pe,K as Oe,q as Se,s as Ae,a1 as Ze,P as Xe,O as Q,M as Z,J as et}from"./index-f50d6d08.js";import{a as Ce}from"./axios-a342f982.js";import{f as tt}from"./fetch-e5abe7a9.js";import{s as He}from"./transform-4a56bf00.js";import{c as st}from"./create-8bd90eea.js";import{i as ot}from"./index-cbf34b5d.js";import{o as je}from"./ordinal-0ac01f5e.js";import{w as at,c as Y,a as nt}from"./array-4492e866.js";const Ee=Math.abs,K=Math.atan2,ke=Math.cos,lt=Math.max,Ge=Math.min,re=Math.sin,Pe=Math.sqrt,X=1e-12,Le=Math.PI,ze=Le/2,Ue=2*Le;function rt(t){return t>1?0:t<-1?Le:Math.acos(t)}function Fe(t){return t>=1?ze:t<=-1?-ze:Math.asin(t)}function it(t){return t.innerRadius}function ct(t){return t.outerRadius}function dt(t){return t.startAngle}function ut(t){return t.endAngle}function pt(t){return t&&t.padAngle}function ht(t,a,v,d,w,u,i,s){var y=v-t,n=d-a,o=i-w,_=s-u,r=_*y-o*n;if(!(r*r<X))return r=(o*(a-u)-_*(t-w))/r,[t+r*y,a+r*n]}function Be(t,a,v,d,w,u,i){var s=t-v,y=a-d,n=(i?u:-u)/Pe(s*s+y*y),o=n*y,_=-n*s,r=t+o,l=a+_,p=v+o,h=d+_,$=(r+p)/2,m=(l+h)/2,T=p-r,P=h-l,B=T*T+P*P,V=w-u,q=r*h-p*l,J=(P<0?-1:1)*Pe(lt(0,V*V*B-q*q)),G=(q*P-T*J)/B,L=(-q*T-P*J)/B,g=(q*P+T*J)/B,c=(-q*T+P*J)/B,O=G-$,k=L-m,S=g-$,te=c-m;return O*O+k*k>S*S+te*te&&(G=g,L=c),{cx:G,cy:L,x01:-o,y01:-_,x11:G*(w/V-1),y11:L*(w/V-1)}}function mt(){var t=it,a=ct,v=Y(0),d=null,w=dt,u=ut,i=pt,s=null,y=at(n);function n(){var o,_,r=+t.apply(this,arguments),l=+a.apply(this,arguments),p=w.apply(this,arguments)-ze,h=u.apply(this,arguments)-ze,$=Ee(h-p),m=h>p;if(s||(s=o=y()),l<r&&(_=l,l=r,r=_),!(l>X))s.moveTo(0,0);else if($>Ue-X)s.moveTo(l*ke(p),l*re(p)),s.arc(0,0,l,p,h,!m),r>X&&(s.moveTo(r*ke(h),r*re(h)),s.arc(0,0,r,h,p,m));else{var T=p,P=h,B=p,V=h,q=$,J=$,G=i.apply(this,arguments)/2,L=G>X&&(d?+d.apply(this,arguments):Pe(r*r+l*l)),g=Ge(Ee(l-r)/2,+v.apply(this,arguments)),c=g,O=g,k,S;if(L>X){var te=Fe(L/r*re(G)),me=Fe(L/l*re(G));(q-=te*2)>X?(te*=m?1:-1,B+=te,V-=te):(q=0,B=V=(p+h)/2),(J-=me*2)>X?(me*=m?1:-1,T+=me,P-=me):(J=0,T=P=(p+h)/2)}var ae=l*ke(T),ne=l*re(T),_e=r*ke(V),ge=r*re(V);if(g>X){var fe=l*ke(P),ve=l*re(P),xe=r*ke(B),le=r*re(B),E;if($<Le)if(E=ht(ae,ne,xe,le,fe,ve,_e,ge)){var ye=ae-E[0],be=ne-E[1],I=fe-E[0],M=ve-E[1],A=1/re(rt((ye*I+be*M)/(Pe(ye*ye+be*be)*Pe(I*I+M*M)))/2),C=Pe(E[0]*E[0]+E[1]*E[1]);c=Ge(g,(r-C)/(A-1)),O=Ge(g,(l-C)/(A+1))}else c=O=0}J>X?O>X?(k=Be(xe,le,ae,ne,l,O,m),S=Be(fe,ve,_e,ge,l,O,m),s.moveTo(k.cx+k.x01,k.cy+k.y01),O<g?s.arc(k.cx,k.cy,O,K(k.y01,k.x01),K(S.y01,S.x01),!m):(s.arc(k.cx,k.cy,O,K(k.y01,k.x01),K(k.y11,k.x11),!m),s.arc(0,0,l,K(k.cy+k.y11,k.cx+k.x11),K(S.cy+S.y11,S.cx+S.x11),!m),s.arc(S.cx,S.cy,O,K(S.y11,S.x11),K(S.y01,S.x01),!m))):(s.moveTo(ae,ne),s.arc(0,0,l,T,P,!m)):s.moveTo(ae,ne),!(r>X)||!(q>X)?s.lineTo(_e,ge):c>X?(k=Be(_e,ge,fe,ve,r,-c,m),S=Be(ae,ne,xe,le,r,-c,m),s.lineTo(k.cx+k.x01,k.cy+k.y01),c<g?s.arc(k.cx,k.cy,c,K(k.y01,k.x01),K(S.y01,S.x01),!m):(s.arc(k.cx,k.cy,c,K(k.y01,k.x01),K(k.y11,k.x11),!m),s.arc(0,0,r,K(k.cy+k.y11,k.cx+k.x11),K(S.cy+S.y11,S.cx+S.x11),m),s.arc(S.cx,S.cy,c,K(S.y11,S.x11),K(S.y01,S.x01),!m))):s.arc(0,0,r,V,B,m)}if(s.closePath(),o)return s=null,o+""||null}return n.centroid=function(){var o=(+t.apply(this,arguments)+ +a.apply(this,arguments))/2,_=(+w.apply(this,arguments)+ +u.apply(this,arguments))/2-Le/2;return[ke(_)*o,re(_)*o]},n.innerRadius=function(o){return arguments.length?(t=typeof o=="function"?o:Y(+o),n):t},n.outerRadius=function(o){return arguments.length?(a=typeof o=="function"?o:Y(+o),n):a},n.cornerRadius=function(o){return arguments.length?(v=typeof o=="function"?o:Y(+o),n):v},n.padRadius=function(o){return arguments.length?(d=o==null?null:typeof o=="function"?o:Y(+o),n):d},n.startAngle=function(o){return arguments.length?(w=typeof o=="function"?o:Y(+o),n):w},n.endAngle=function(o){return arguments.length?(u=typeof o=="function"?o:Y(+o),n):u},n.padAngle=function(o){return arguments.length?(i=typeof o=="function"?o:Y(+o),n):i},n.context=function(o){return arguments.length?(s=o??null,n):s},n}function _t(t,a){return a<t?-1:a>t?1:a>=t?0:NaN}function gt(t){return t}function ft(){var t=gt,a=_t,v=null,d=Y(0),w=Y(Ue),u=Y(0);function i(s){var y,n=(s=nt(s)).length,o,_,r=0,l=new Array(n),p=new Array(n),h=+d.apply(this,arguments),$=Math.min(Ue,Math.max(-Ue,w.apply(this,arguments)-h)),m,T=Math.min(Math.abs($)/n,u.apply(this,arguments)),P=T*($<0?-1:1),B;for(y=0;y<n;++y)(B=p[l[y]=y]=+t(s[y],y,s))>0&&(r+=B);for(a!=null?l.sort(function(V,q){return a(p[V],p[q])}):v!=null&&l.sort(function(V,q){return v(s[V],s[q])}),y=0,_=r?($-n*P)/r:0;y<n;++y,h=m)o=l[y],B=p[o],m=h+(B>0?B*_:0)+P,p[o]={data:s[o],index:y,value:B,startAngle:h,endAngle:m,padAngle:T};return p}return i.value=function(s){return arguments.length?(t=typeof s=="function"?s:Y(+s),i):t},i.sortValues=function(s){return arguments.length?(a=s,v=null,i):a},i.sort=function(s){return arguments.length?(v=s,a=null,i):v},i.startAngle=function(s){return arguments.length?(d=typeof s=="function"?s:Y(+s),i):d},i.endAngle=function(s){return arguments.length?(w=typeof s=="function"?s:Y(+s),i):w},i.padAngle=function(s){return arguments.length?(u=typeof s=="function"?s:Y(+s),i):u},i}const vt=["stroke","fill"],xt=e("path",{d:"m617.24 354a126.36 126.36 0 0 0 -10.86-103.79 127.8 127.8 0 0 0 -137.65-61.32 126.36 126.36 0 0 0 -95.31-42.49 127.81 127.81 0 0 0 -121.92 88.49 126.4 126.4 0 0 0 -84.5 61.3 127.82 127.82 0 0 0 15.72 149.86 126.36 126.36 0 0 0 10.86 103.79 127.81 127.81 0 0 0 137.65 61.32 126.36 126.36 0 0 0 95.31 42.49 127.81 127.81 0 0 0 121.96-88.54 126.4 126.4 0 0 0 84.5-61.3 127.82 127.82 0 0 0 -15.76-149.81zm-190.66 266.49a94.79 94.79 0 0 1 -60.85-22c.77-.42 2.12-1.16 3-1.7l101-58.34a16.42 16.42 0 0 0 8.3-14.37v-142.39l42.69 24.65a1.52 1.52 0 0 1 .83 1.17v117.92a95.18 95.18 0 0 1 -94.97 95.06zm-204.24-87.23a94.74 94.74 0 0 1 -11.34-63.7c.75.45 2.06 1.25 3 1.79l101 58.34a16.44 16.44 0 0 0 16.59 0l123.31-71.2v49.3a1.53 1.53 0 0 1 -.61 1.31l-102.1 58.95a95.16 95.16 0 0 1 -129.85-34.79zm-26.57-220.49a94.71 94.71 0 0 1 49.48-41.68c0 .87-.05 2.41-.05 3.48v116.68a16.41 16.41 0 0 0 8.29 14.36l123.31 71.19-42.69 24.65a1.53 1.53 0 0 1 -1.44.13l-102.11-59a95.16 95.16 0 0 1 -34.79-129.81zm350.74 81.62-123.31-71.2 42.69-24.64a1.53 1.53 0 0 1 1.44-.13l102.11 58.95a95.08 95.08 0 0 1 -14.69 171.55c0-.88 0-2.42 0-3.49v-116.68a16.4 16.4 0 0 0 -8.24-14.36zm42.49-63.95c-.75-.46-2.06-1.25-3-1.79l-101-58.34a16.46 16.46 0 0 0 -16.59 0l-123.31 71.2v-49.3a1.53 1.53 0 0 1 .61-1.31l102.1-58.9a95.07 95.07 0 0 1 141.19 98.44zm-267.11 87.87-42.7-24.65a1.52 1.52 0 0 1 -.83-1.17v-117.92a95.07 95.07 0 0 1 155.9-73c-.77.42-2.11 1.16-3 1.7l-101 58.34a16.41 16.41 0 0 0 -8.3 14.36zm23.19-50 54.92-31.72 54.92 31.7v63.42l-54.92 31.7-54.92-31.7z"},null,-1),yt=[xt],bt={__name:"IconOpenAI",props:{color:{type:String,default:"#00DC82"}},setup(t){return(a,v)=>(x(),D("svg",{width:"100%",height:"100%",stroke:t.color,fill:t.color,"stroke-width":"0",viewBox:"140 140 520 520",xmlns:"http://www.w3.org/2000/svg"},yt,8,vt))}},wt=["fill","stroke"],kt=e("path",{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"},null,-1),$t=e("path",{"fill-rule":"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"},null,-1),Ct=[kt,$t],Dt={__name:"IconPerson",props:{color:{type:String,default:"#00DC82"}},setup(t){return(a,v)=>(x(),D("svg",{fill:t.color,stroke:t.color,width:"100%",height:"100%","stroke-width":"0",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},Ct,8,wt))}},Mt=["width","height"],Pt=e("defs",null,[e("symbol",{id:"mshd-file-upload",viewBox:"0 0 1024 1024"},[e("path",{d:"M791.970909 978.525091H232.029091a110.312727 110.312727 0 0 1-110.173091-110.173091V155.648A110.312727 110.312727 0 0 1 232.029091 45.474909h409.460364c39.005091 0 76.148364 16.756364 101.934545 45.986909l124.788364 141.684364c21.876364 24.808727 33.978182 56.738909 33.931636 89.786182v545.419636a110.312727 110.312727 0 0 1-110.173091 110.173091zM232.029091 118.504727a37.143273 37.143273 0 0 0-37.096727 37.143273v712.704c0 20.48 16.616727 37.143273 37.096727 37.143273h559.941818c20.48 0 37.096727-16.663273 37.096727-37.143273V322.932364c0-15.266909-5.585455-30.021818-15.639272-41.518546l-124.834909-141.637818a62.836364 62.836364 0 0 0-47.104-21.271273H232.029091z"}),e("path",{d:"M867.467636 360.541091h-150.434909a110.312727 110.312727 0 0 1-110.173091-110.173091V79.592727h73.076364v170.821818c0 20.48 16.616727 37.143273 37.096727 37.143273h150.434909v73.076364zM363.706182 613.888a36.538182 36.538182 0 0 0 51.665454 0l60.509091-60.509091v175.662546a36.538182 36.538182 0 0 0 73.029818 0v-174.917819l59.764364 59.764364a36.538182 36.538182 0 1 0 51.665455-51.665455l-122.135273-122.135272a36.398545 36.398545 0 0 0-26.205091-10.705455 36.398545 36.398545 0 0 0-26.205091 10.705455L363.706182 562.269091a36.538182 36.538182 0 0 0 0 51.665454z"})])],-1),St=["fill"],At={__name:"IconFileUpload",props:{color:{type:String,default:"#00DC82"},width:{type:String,default:"40"},height:{type:String,default:"40"}},setup(t){return(a,v)=>(x(),D("svg",{"xmlns:xlink":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/svg",stroke:"black","stroke-width":"2",fill:"red","aria-hidden":"true",focusable:"false",class:"",width:t.width,height:t.height},[Pt,e("use",{"xlink:href":"#mshd-file-upload",fill:t.color},null,8,St)],8,Mt))}},It=["width","height"],Lt=e("defs",null,[e("symbol",{id:"mshd-send",viewBox:"0 0 1024 1024"},[e("path",{d:"M525.952 537.514667l-313.557333 31.274666-82.474667 272.256a43.093333 43.093333 0 0 0 12.288 44.714667 39.936 39.936 0 0 0 44.672 5.973333l687.146667-343.338666a40.490667 40.490667 0 0 0 21.973333-36.266667c0-15.402667-8.533333-29.482667-21.973333-36.266667L187.349333 132.266667a39.893333 39.893333 0 0 0-44.672 5.973333c-12.373333 11.008-17.237333 28.586667-12.330666 44.672l82.517333 272.256 312.96 31.317333c12.629333 1.28 22.272 12.288 22.272 25.386667a25.258667 25.258667 0 0 1-22.272 25.386667l0.128 0.256z"})])],-1),Tt=["fill"],Bt={__name:"IconSend",props:{color:{type:String,default:"#00DC82"},width:{type:String,default:"40"},height:{type:String,default:"40"}},setup(t){return(a,v)=>(x(),D("svg",{"xmlns:xlink":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/svg",fill:"red","aria-hidden":"true",focusable:"false",class:"",width:t.width,height:t.height},[Lt,e("use",{"xlink:href":"#mshd-send","fill-opacity":"1",fill:t.color},null,8,Tt)],8,It))}};const qt={class:"load-texture-container"},Ut={class:"inner"},Vt={__name:"LoadingText",setup(t){const a=b(new Array(7).fill(0)),v=b(!1),d=b(null);return he(v,w=>{if(w){let u=0;d.value=setInterval(()=>{a.value=a.value.map((i,s)=>2*Math.sin(u+2*Math.PI*((s+1)/8))),u++},100)}else clearInterval(d.value)}),Te(()=>{v.value=!0}),We(()=>{v.value=!1}),(w,u)=>(x(),D("div",qt,[e("div",Ut,[(x(!0),D(oe,null,ce(a.value,(i,s)=>(x(),D("div",{key:s,class:"item",style:Ye({transform:`translateY(${i}px)`})},null,4))),128))])]))}},zt=ee(Vt,[["__scopeId","data-v-4ee1b855"]]);var ie=(t=>(t[t.survey=0]="survey",t[t.chat=1]="chat",t[t.setting=2]="setting",t))(ie||{}),se=(t=>(t[t.none=0]="none",t[t.note=1]="note",t[t.component=2]="component",t[t.package=3]="package",t[t.all=4]="all",t))(se||{});const H=Ke("knowledgeBase",()=>{const t=b(""),a=I=>{t.value=I},v=b("survey_prompt"),d=I=>{v.value=I},w=b(["zumalong"]),u=b([]),i=I=>{u.value=I},s=b(""),y=I=>{s.value=I},n=b([]),o=I=>{n.value=I},_=b(1),r=I=>{_.value=I},l=Ie(()=>_.value),p=b(0),h=I=>{p.value=I},$=Ie(()=>p.value),m=b(!1),T=I=>{m.value=I},P=b([{question:"Firstly, let's confirm your product category. Please select one from the list below?",answer:"",options:["Detergent Liquid","Scented Beads","Capsule","Home Spray","Fabric Conditioner","Perfume"],placeholder:"Please select an option or input your answer here."},{question:"Secondly, who's your target audience?",answer:"",options:["Gen Z","Super Mom","Small Town Youth","White Collar","Silver Gen"],placeholder:"Please select an option or input your answer here."},{question:"We will design a product scent together. Let’s describe an ideal scent and this will include notes, scent feeling and scent moods! Could you pick the note for me first?",answer:"",options:["Woody","Floral","Green","Citrus","Oriental/Spicy","Fruity"],placeholder:"Please select an option or input your answer here."},{question:"Could you describe the scent feeling?",answer:"",options:["Fresh","Sweet","Pure","Mysterious","Warm","Gentle"],placeholder:"Please select an option or input your answer here."},{question:"Which mood would you like the scent to evoke?",answer:"",options:["Relaxing","Enjoyable","Confident","Positive","Energising","Comforting","Caring"],placeholder:"Please select an option or input your answer here."}]),B=b(!1),V=I=>{B.value=I},q=Ie(()=>P.value.every(M=>M.answer!=="")&&B.value===!1);function J(I,M){P.value[I].placeholder=M}function G(I){P.value[I].placeholder="Please select an option or input your answer here."}function L(I,M){P.value[I].answer=M}const g=b(""),c=b([]),O=I=>{c.value=I,console.log("设置了plotMetaData",c.value)},k=b(""),S=b("merge"),te=b("Your name is Lavector's fragrance design AI, Below is a survey about fragrance, include question and user's answer, please combine with context data from database and survey result answer like this style: appreciate your survey, base on our consumer database, we recommend fragrance smell xxx, and fragrance sentiment is xxx, the reason is xxx, and top notes is xxx, middle notes is xxx, end notes is xxx, the reason is xxx."),me=b(`Reference context：
    {context}
    ---
    Survey result：
    {question}
    ---
    Answer Now:`),ae=b("openai"),ne=b("As a seasoned creative copy writer, you will write a vivid and captivating product description that perfectly encapsulates the charm of a product and makes it attractive for the target customer. The paragraph should include the olfactive identity, the  imagery, feelings, and the perfect occasions."),_e=b("mixtral"),ge=["design_response","all_notes","questionaire","style_template"],fe=b(["all_notes","style_template"]),ve=b("Synthesize the product description below into a one-sentence slogan. It should be crisp, attractive and distinctive. Give three slogans."),xe=b("mixtral"),le=b("Please generate a complete brief based on the following perfume brief template and reference information.The template provides the basic format and content requirements for each section, with the requirements for each section indicated in square brackets. Some of the data required may come from the reference information. If not available in the reference information, please provide reasonable content"),E=b("mixtral"),ye=b("You are a tool that generates Stable Diffusion drawing prompts. The drawing prompts should lead to imaginary or artistic images evoked in the minds of consumers when using a product described in a product brief.  Please write a Stable Diffusion drawing prompt for it, and then explain your rationale.  Do not mention Stable Diffusion or Prompt in your explanations"),be=b("mixtral");return{product_description:g,design_prompt:te,design_prompt_tail:me,design_llm:ae,description_prompt:ne,description_input:ge,description_llm:_e,description_materials:fe,slogan_prompt:ve,brief_prompt:le,brief_llm:E,slogan_llm:xe,image_prompt:ye,image_llm:be,search_mode:S,processedPlotData:k,plotMetaData:c,setPlotMetaData:O,showPlotStatus:p,setPlotStatus:h,currentPlotStatus:$,kbNames:w,currentPrompt:v,setCurrentPrompt:d,finishedSurvey:B,setFinishedSurvey:V,startAnswerSurvey:q,surveyQuestions:P,setSurveyQuestionPlaceholder:J,setSurveyDefaultPlaceholder:G,setSurveyAnswer:L,currentPageStatus:l,currentId:t,setCurrentId:a,knowledgeBaseList:n,setKnowledgeBaseList:o,showDeleteModal:m,setShowDeleteModal:T,showDefault:_,setDefaultPage:r,currentKbName:s,setCurrentKbName:y,selectList:u,setSelectList:i}}),ue=Ke("useChat",()=>{const t={role:"ai",message:"Hello, I'm your ScentAI consultant. I can help you design the perfect scent that’s pursued by real consumers. Would you like to start now?      ",options:["Yes","No"]},a=b([t]),v=()=>{a.value=[t]},d=Ie(()=>a.value[a.value.length-1].message),w=b(!1),u=b(""),i=b("");return{lastMessage:d,QA_List:a,clearQAList:v,showModal:w,lastNote:u,lastComponents:i}});class Rt{constructor(a){this.onConsume=a,this.queue=[],this.consuming=!1}dynamicSpeed(){const a=2e3/this.queue.length;return a>200?200:a}add(a){a&&this.queue.push(...a.split(""))}consume(){if(this.queue.length>0){const a=this.queue.shift();a&&this.onConsume(a)}}next(){this.consume(),this.timmer=setTimeout(()=>{this.consume(),this.consuming&&this.next()},this.dynamicSpeed())}start(){this.consuming=!0,this.next()}done(){this.consuming=!1,clearTimeout(this.timmer),this.onConsume(this.queue.join("")),this.queue=[]}}const Gt=t=>(Se("data-v-72010725"),t=t(),Ae(),t),Nt={class:"relative h-screen flex flex-col"},Qt={class:"relative w-20 shrink-0 flex flex-col items-center box-border"},Ot={key:0,class:"fill-blue-100 h-8"},jt={key:1,class:"h-8"},Et={class:"text-ellipsis overflow-hidden w-full text-center leading-none"},Ft={class:"text-sm"},Kt={key:0,class:"flex justify-center items-center mt-3"},Ht={key:1},Wt=["src"],Yt={key:0,class:"relative px-0 py-1.5"},Jt={class:"float-right text-sm my-2.5"},Zt={class:"relative h-14 box-border bg-neutral-200 rounded-lg border-solid border-2 focus:border-neutral-900"},Xt={class:"flex items-center absolute right-0 top-0 h-full"},es={class:"h-8 mt-2"},ts=["disabled"],ss=Gt(()=>e("div",{class:"footer"},null,-1)),os=de({__name:"chatbox",setup(t){const{QA_List:a}=R(ue()),{setDefaultPage:v,setFinishedSurvey:d,setCurrentPrompt:w,setPlotStatus:u,setPlotMetaData:i}=H(),{startAnswerSurvey:s,currentPrompt:y,surveyQuestions:n,kbNames:o,plotMetaData:_,processedPlotData:r,finishedSurvey:l,design_prompt:p,design_prompt_tail:h,design_llm:$}=R(H()),m=new Rt(M=>{M&&(a.value[a.value.length-1].message+=M||"")}),T="https://ai.minitool.fun:18778";let P="/api/questionnaire";const B="https://ai.minitool.fun:16367";B.split("/api")[0];const V=b(""),q=b(null),J=b("zzp"),G=b(""),L=b(!1),g=["primary","success","warning"],c=b(""),O=b(null);b(!1);const k=Ie(()=>{let M=[],A=[];return a.value.map((C,N)=>{N!==0&&(A.push(C.message),A.length===2&&(M.push(A),A=[]))}),M});let S;function te(M){M==="Yes"&&v(ie.survey),a.value[0].options=[]}const me=M=>{console.log(new Date().toLocaleString(),"开始上传文件，收到的组件传入参数是",M);const A=M.file;console.log(new Date().toLocaleString(),"文件名称是",A.name);const C=new FileReader;C.onloadend=()=>{const N=C.result;console.log(new Date().toLocaleString(),"文件base64内容是",N),c.value=N},C.readAsDataURL(A)},ae=M=>{},ne=()=>{pe({message:"最多只能上传一个文件！",type:"warning"})},_e=()=>{pe({message:"上传文件失败！",type:"error"})},ge=()=>{pe({message:"上传文件成功",type:"success"})},fe=M=>{a.value.push({message:M,role:"user"}),E()},ve=()=>{a.value.push({message:"",role:"ai",copied:!1,like:!1,unlike:!1,source:[],showTools:!1})};function xe(M){const A=M.toLowerCase(),C=["sorry","apologies","apologize"];for(let N=0;N<C.length;N++)if(A.includes(C[N]))return!1;return!0}const le=()=>{if(!G.value.length||L.value)return;console.log(new Date().toLocaleString(),"用户开始发送消息");const M=G.value;G.value="",fe(M),L.value=!0,S=new AbortController,tt(T+P,{method:"POST",headers:{"Content-Type":"application/json",Accept:["text/event-stream","application/json"]},body:JSON.stringify({user_id:J.value,history:k.value,kb_names:o.value,question:M,streaming:!0,prompt:p.value+h.value,llm:$.value}),signal:S.signal,onopen(A){if(console.log("开始连接服务器"),A.ok&&A.headers.get("content-type")==="text/event-stream")console.log("everything's good"),ve(),m.start();else if(A.headers.get("content-type")==="application/json")return L.value=!1,A.json().then(C=>{C.msg!=="success"&&pe({message:"出错了,请稍后刷新重试。",type:"error"})}).catch(C=>{console.log(C),pe({message:"出错了,请稍后刷新重试。",type:"error"})})},onmessage(A){var N;console.log("开始接收服务器消息");const C=JSON.parse(A.data);if(console.log(C),(C==null?void 0:C.code)==200&&(C!=null&&C.response)&&(m.add(C==null?void 0:C.response),E()),(N=C==null?void 0:C.source_documents)!=null&&N.length){a.value[a.value.length-1].source=C==null?void 0:C.source_documents;const F=a.value[a.value.length-1].message,De=C==null?void 0:C.source_documents;let we=[];for(let Re of De)Re.meta_info&&we.push(Re.meta_info);xe(F)&&!l.value&&(pe({message:"后台正在进行绘图数据计算，请稍后...",type:"warning"}),i(we),I(),d(!0))}},onclose(A){console.log("关闭连接,错误信息是",A),m.done(),S.abort(),L.value=!1,a.value[a.value.length-1].showTools=!0,Oe(()=>{E()})},onerror(A){throw console.log("发生了错误!",A),m==null||m.done(),S==null||S.abort(),L.value=!1,a.value[a.value.length-1].showTools=!0,pe({message:"出错了",type:"error"}),Oe(()=>{E()}),A}})};function E(){console.log(new Date().toLocaleString(),"滚动屏幕"),setTimeout(()=>{q.value.scrollTop=q.value.scrollHeight},300)}function ye(M){M.value=M,le()}async function be(M,A,C){try{return(await Ce.post(B+"/api/process",{survey:M,meta:C,answer:A,generate_image:!1,generate_material:!1})).data.data}catch(N){console.log(N),pe({title:"Error",message:"处理元数据的接口请求失败"})}}async function I(){console.log("开始处理plotData",a.value),console.log("开始处理plotData",n.value),console.log("开始处理plotData",_.value),console.log("plotMetaData数据收到了",_.value);let M="";a.value.length>0&&(M=a.value[a.value.length-1].message),console.log("处理plotData参数last_message",M);let A=[];for(let N of n.value)N.answer!==""&&A.push([N.question,N.answer]);if(A.length===0||M===""||_.value.length===0)return"";console.log("处理完成plotData参数survey",A);const C=await be(A,M,_.value);console.log("处理完成plotData参数data,存储到processedPlotData",C),r.value=C,pe({message:"后台处理成功，正在进行绘图...",type:"warning"})}return Te(async()=>{if(s.value){w("survey_prompt");const M=n.value[n.value.length-1].answer;n.value.forEach((A,C)=>{a.value.push({role:"ai",message:A.question}),C!==n.value.length-1&&a.value.push({role:"user",message:A.answer})}),G.value=M,le(),console.log("输出:",a.value),w("design_prompt"),u(se.all)}}),(M,A)=>{const C=Ne("el-button"),N=Ne("el-upload");return x(),D("div",Nt,[e("div",{class:"scroll-smooth bg-white relative overflow-auto flex-grow",ref_key:"messageRef",ref:q},[(x(!0),D(oe,null,ce(f(a),(F,De)=>(x(),D("div",{class:"box-border flex flex-col pt-4 pb-0 px-4 last:pb-4",key:De},[e("div",{class:Qe(F.role==="user"?"flex flex-row justify-end":"flex flex-row-reverse justify-end")},[e("div",{class:Qe(["whitespace-pre-wrap rounded-md p-3 border",F.role=="user"?"bg-blue-200":""])},j(F.message),3),e("div",Qt,[F.role==="user"?(x(),D("div",Ot,[Me(Dt)])):(x(),D("div",jt,[Me(bt)])),e("div",Et,[e("span",Ft,j(F.role),1)])])],2),F.options?(x(),D("div",Kt,[(x(!0),D(oe,null,ce(F.options,(we,Re)=>(x(),W(C,{type:"danger",key:we,onClick:Fa=>te(we)},{default:qe(()=>[Ve(j(we),1)]),_:2},1032,["onClick"]))),128))])):z("",!0),F.image?(x(),D("div",Ht,[e("img",{src:F.image,class:"w-full object-cover h-52"},null,8,Wt)])):z("",!0)]))),128)),L.value?(x(),D("div",Yt,[Me(zt)])):z("",!0)],512),e("div",Jt,[(x(!0),D(oe,null,ce(V.value,(F,De)=>(x(),W(C,{key:De,type:g[De],onClick:we=>ye(F)},{default:qe(()=>[Ve(j(F),1)]),_:2},1032,["type","onClick"]))),128))]),e("div",Zt,[U(e("input",{onKeyup:Je(le,["enter"]),placeholder:"输入问题",class:"h-full w-full border-transparent text-inherit appearance-none text-base grow m-0 px-4 p-0 border-0",type:"text","onUpdate:modelValue":A[0]||(A[0]=F=>G.value=F)},null,544),[[$e,G.value]]),e("div",Xt,[Me(N,{class:"ml-3 mr-3","show-file-list":!0,limit:1,"http-request":me,"before-upload":ae,ref_key:"uploadFile",ref:O,"on-exceed":ne,"on-success":ge,"on-error":_e,accept:"image/*"},{default:qe(()=>[e("div",es,[Me(At)])]),_:1},512),e("button",{disabled:!G.value||L.value,onClick:le,class:"text-inherit block appearance-none text-base cursor-pointer mr-3 p-0 border-0 active:opacity-100 disabled:opacity-30 duration-200"},[Me(Bt)],8,ts)])]),ss])}}});const as=ee(os,[["__scopeId","data-v-72010725"]]),ns={class:"main overflow-auto scroll-smooth h-screen"},ls={class:"text-lg ml-3 text-lime-800"},rs=["placeholder","onUpdate:modelValue"],is={class:"flex flex-row shrink-0 grow-0"},cs=["onMouseover","onMouseleave","onClick"],ds=de({__name:"survey",setup(t){const{surveyQuestions:a}=R(H()),{setSurveyQuestionPlaceholder:v,setSurveyDefaultPlaceholder:d,setSurveyAnswer:w,setDefaultPage:u}=H();function i(){u(ie.chat),console.log(a.value)}return(s,y)=>(x(),D("div",ns,[(x(!0),D(oe,null,ce(f(a),(n,o)=>(x(),D("div",{class:"flex flex-col mt-5 space-y-4",key:o},[e("div",ls,j(o+1)+": "+j(n.question),1),U(e("input",{type:"text",placeholder:n.placeholder,"onUpdate:modelValue":_=>n.answer=_,class:"block p-2 px-4 text-black border-b border-transparent focus:border-blue-500 placeholder:text-sm focus:outline-none"},null,8,rs),[[$e,n.answer]]),e("div",is,[(x(!0),D(oe,null,ce(n.options,_=>(x(),D("button",{class:"block text-sm ml-3 bg-slate-300 w-40 truncate hover:bg-slate-400",key:_,onMouseover:r=>f(v)(o,_),onMouseleave:r=>f(d)(o),onClick:r=>f(w)(o,_)},j(_),41,cs))),128))])]))),128)),e("button",{onClick:i,class:"block mx-auto px-5 py-3 text-xs rounded-md text-zinc-800 bg-lime-500 hover:bg-lime-700 hover:text-white duration-500"}," 确认 ")]))}});const us=ee(ds,[["__scopeId","data-v-35a18115"]]);const ps={id:"chartNote"},hs={__name:"notePlot",setup(t){R(ue());const{plotMetaData:a,processedPlotData:v}=R(H()),d="https://ai.minitool.fun:16367";function w(u,i){const n=st("svg").attr("width",1e3).attr("height",600).attr("transform","scale(0.5) translate(-200, -300)"),o=n.append("defs");u.forEach((r,l)=>{o.append("pattern").attr("id",`bg${l+1}`).attr("patternUnits","userSpaceOnUse").attr("width",1e3).attr("height",600).append("image").attr("xlink:href",r).attr("width",1e3).attr("height",600).attr("preserveAspectRatio","none")});const _=[{x:550,y:200},{x:550,y:350},{x:550,y:500}];n.append("polygon").attr("points","550,100 450,250 650,250").style("fill","url(#bg1)").style("stroke","yellow").style("stroke-width","1"),n.append("polygon").attr("points","450,250 350,400 750,400 650,250").style("fill","url(#bg2)").style("stroke","yellow").style("stroke-width","1"),n.append("polygon").attr("points","350,400 250,550 850,550 750,400").style("fill","url(#bg3)").style("stroke","yellow").style("stroke-width","1"),_.forEach((r,l)=>{n.append("text").attr("x",r.x).attr("y",r.y).text(i[l]).attr("text-anchor","middle").attr("dominant-baseline","central").style("font-size","24px").style("fill","white")}),He("#chartNote").append(()=>n.node())}return he(v,async u=>{if(console.log("plot数据更新，开始绘图",u),u){let i=d.split("/api")[0];const s=u.display_data,y=s.related_top_notes;console.log("first_top_note",y);let n=[s.related_top_notes[0].name,s.related_middle_notes[0].name,s.related_base_notes[0].name],o=[s.related_top_notes[0].image,s.related_middle_notes[0].image,s.related_base_notes[0].image];o=o.map(_=>`${i}/${_}`),w(o,n)}},{deep:!0}),(u,i)=>(x(),D("div",ps))}},ms=ee(hs,[["__scopeId","data-v-0376be20"]]),_s=e("div",{id:"histogram",style:{width:"100%",height:"80vh"}},null,-1),gs={__name:"barPlot",setup(t){const{processedPlotData:a}=R(H());R(ue());const v=(d,w,u)=>{document.getElementById("histogram").setAttribute("_echarts_instance_","");var i=document.getElementById("histogram"),s=ot(i);let y={xAxis:{data:d,axisLabel:{interval:0,rotate:45}},yAxis:{},series:[{type:"bar",data:w}]};y&&s.setOption(y),window.onresize=()=>{s.resize()}};return he(a,async d=>{var w;if(console.log("plot数据更新",d),d){const u=(w=d.display_data)==null?void 0:w.related_ingredients,i=u.map(y=>y.name),s=u.map(y=>y.score);console.log("barplot:xlabel",i),console.log("barplot:ydata",s),i.length>0&&s.length>0&&setTimeout(()=>{v(i,s)},1e3)}},{deep:!0}),(d,w)=>{const u=Ne("el-card");return x(),W(u,{style:{height:"85vh"}},{default:qe(()=>[_s]),_:1})}}},fs={class:"main"},vs={class:"image-gallery"},xs=["href"],ys=["src","alt"],bs=["href"],ws={class:"image-price"},ks=de({__name:"productPlot",setup(t){const v="https://ai.minitool.fun:16367".split("/api")[0],{plotMetaData:d}=R(H());return b([]),Te(()=>{}),(w,u)=>(x(),D("div",fs,[e("div",vs,[(x(!0),D(oe,null,ce(f(d),i=>(x(),D("div",{key:i.english_name,class:"image-item"},[e("a",{href:i.link},[e("img",{src:`${f(v)}/product/${i.product_image}`,alt:i.english_name,class:"image"},null,8,ys)],8,xs),e("a",{class:"image-title",href:i.link},j(i.english_name),9,bs),e("a",ws,"Price: "+j(i.price.replace("元","￥")),1)]))),128))])]))}});const $s=ee(ks,[["__scopeId","data-v-762a5dc6"]]);const Cs={id:"chartCom"},Ds={__name:"componentPlot",setup(t){return toRefs(ue()),Te(()=>{const d=Math.min(400,400)/2,w=je(["#1f77b4","#ff7f0e","#2ca02c"]),u=je(["#d62728","#9467bd"]),i=[40,30,30],s=[20,80],y=He("#chartCom").append("svg").attr("width",400).attr("height",400).append("g").attr("transform","translate("+400/2+","+400/2+")"),n=ft().sort(null),o=mt().innerRadius(d-100).outerRadius(d-50);y.selectAll(".arcOuter").data(n(i)).enter().append("g").attr("class","arcOuter").append("path").attr("d",o).style("fill",function(l,p){return w(p)}),o.innerRadius(d-50).outerRadius(d),y.selectAll(".arcInner").data(n(s)).enter().append("g").attr("class","arcInner").append("path").attr("d",o).style("fill",function(l,p){return u(p)})}),(a,v)=>(x(),D("div",Cs))}},Ms=ee(Ds,[["__scopeId","data-v-a554c6b0"]]),Ps={key:0,class:"main p-6 border-2 border-gray-200 rounded-md"},Ss=["src"],As={class:"text-center mt-4 bg-slate-200"},Is=de({__name:"generateIMGPlot",setup(t){const{processedPlotData:a,surveyQuestions:v,plotMetaData:d,image_prompt:w,image_llm:u}=R(H()),{QA_List:i}=R(ue()),s="https://ai.minitool.fun:16367",y=s.split("/api")[0],n=b(""),o=b("");async function _(r,l,p,h){try{return(await Ce.post(s+"/api/last_generate",{survey:r,meta:l,answer:p,display_data:h,prompt:w.value,llm:u.value})).data.data}catch($){console.log($)}}return he(a,async r=>{var l,p;if(console.log("plot数据更新，开始绘图",r),r){let h=r.display_data;if(!h.generate_image){let m="";i.value.length>0&&(m=i.value[i.value.length-1].message),console.log("处理plotData参数last_message",m);let T=[];for(let P of v.value)P.answer!==""&&T.push([P.question,P.answer]);if(T.length===0||m===""||d.value.length===0)return"";console.log("处理完成plotData参数survey",T),h=await _(T,d.value,m,h)}console.log("处理完成plotData参数display_data",h);const $=(l=h.generate_image)==null?void 0:l.image_path;n.value=y+$,o.value=(p=h.generate_image)==null?void 0:p.positive_prompt}},{deep:!0}),(r,l)=>n.value?(x(),D("div",Ps,[e("img",{src:n.value,alt:"package_design",class:"w-1/2 mx-auto"},null,8,Ss),e("div",As,j(o.value),1)])):z("",!0)}});const Ls=ee(Is,[["__scopeId","data-v-00f714a6"]]),Ts=t=>(Se("data-v-f79a2594"),t=t(),Ae(),t),Bs={key:0,class:"main p-6 border-2 border-gray-200 rounded-md"},qs={class:"text-gray-600 body-font"},Us={class:"container px-5 py-24 mx-auto"},Vs={class:"flex flex-wrap -m-4"},zs={class:"p-4 lg:w-1/2"},Rs={class:"h-full bg-gray-100 bg-opacity-75 px-8 pt-16 pb-24 rounded-lg overflow-hidden text-center relative"},Gs={class:"tracking-widest text-xs title-font font-medium text-gray-400 mb-1"},Ns={class:"title-font sm:text-2xl text-xl font-medium text-gray-900 mb-3"},Qs={class:"leading-relaxed mb-3"},Os=["href"],js=Ts(()=>e("svg",{class:"w-4 h-4 ml-2",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M5 12h14"}),e("path",{d:"M12 5l7 7-7 7"})],-1)),Es=de({__name:"generateMaterials",setup(t){const{processedPlotData:a,surveyQuestions:v,plotMetaData:d,search_mode:w}=R(H()),{QA_List:u}=R(ue()),i="https://ai.minitool.fun:16367";i.split("/api")[0];const s=b();async function y(n,o,_,r){try{return(await Ce.post(i+"/api/generate_material",{survey:n,meta:o,answer:_,display_data:r,mode:w.value})).data.data}catch(l){console.log(l)}}return he(a,async n=>{if(console.log("plot数据更新，开始绘图",n),n){let o=n.display_data;if(!o.materials_data){let _="";u.value.length>0&&(_=u.value[u.value.length-1].message),console.log("处理plotData参数last_message",_);let r=[];for(let l of v.value)l.answer!==""&&r.push([l.question,l.answer]);if(r.length===0||_===""||d.value.length===0)return"";console.log("处理完成plotData参数survey",r),o=await y(r,d.value,_,o)}console.log("处理完成plotData参数display_data",o),s.value=o.materials_data}},{deep:!0}),(n,o)=>s.value?(x(),D("div",Bs,[e("section",qs,[e("div",Us,[e("div",Vs,[(x(!0),D(oe,null,ce(s.value,_=>(x(),D("div",zs,[e("div",Rs,[e("h2",Gs,j(_.olfactive_note),1),e("h1",Ns,j(_.title),1),e("p",Qs,j(_.ingredient_intro),1),e("a",{class:"text-indigo-500 inline-flex items-center",href:_.url},[Ve("Learn More "),js],8,Os)])]))),256))])])])])):z("",!0)}});const Fs=ee(Es,[["__scopeId","data-v-f79a2594"]]),Ks=t=>(Se("data-v-c26b9241"),t=t(),Ae(),t),Hs={key:0,class:"main p-6 border-2 border-gray-200 rounded-md"},Ws={class:"card card-compact w-96 bg-base-100 shadow-xl"},Ys={class:"card-body"},Js=Ks(()=>e("h2",{class:"card-title"},"Claims",-1)),Zs={class:"whitespace-pre-wrap text-lg bg-teal-50"},Xs=de({__name:"generateClaim",setup(t){const{processedPlotData:a,surveyQuestions:v,plotMetaData:d,search_mode:w,slogan_prompt:u,slogan_llm:i,product_description:s}=R(H()),{QA_List:y}=R(ue()),n="https://ai.minitool.fun:16367";n.split("/api")[0];const o=b();async function _(r,l,p,h,$){try{return(await Ce.post(n+"/api/generate_claim",{survey:r,meta:l,answer:p,display_data:h,product_description:$,prompt:u.value,llm:i.value})).data.data}catch(m){console.log(m)}}return he(s,async r=>{const l=a.value;if(console.log("产品描述生成完成，开始生成宣称",l),l){let p=l.display_data;if(!p.materials_data){let h="";y.value.length>0&&(h=y.value[y.value.length-1].message),console.log("处理plotData参数last_message",h);let $=[];for(let m of v.value)m.answer!==""&&$.push([m.question,m.answer]);if($.length===0||h===""||d.value.length===0)return"";console.log("处理完成plotData参数survey",$),p=await _($,d.value,h,p,r)}console.log("处理完成plotData参数display_data",p),o.value=p.claim}},{deep:!0}),(r,l)=>o.value?(x(),D("div",Hs,[e("div",Ws,[e("div",Ys,[Js,e("p",Zs,j(o.value),1)])])])):z("",!0)}});const eo=ee(Xs,[["__scopeId","data-v-c26b9241"]]),to=t=>(Se("data-v-6ced207c"),t=t(),Ae(),t),so={key:0,class:"main p-6 border-2 border-gray-200 rounded-md"},oo={class:"h-full bg-gray-100 bg-opacity-75 px-8 pt-16 pb-24 rounded-lg overflow-hidden text-center relative"},ao=to(()=>e("h1",{class:"title-font sm:text-2xl text-xl font-medium text-gray-900 mb-3"},"Brief",-1)),no={class:"leading-relaxed mb-3 whitespace-pre-wrap"},lo=de({__name:"generateBrief",setup(t){const{processedPlotData:a,surveyQuestions:v,plotMetaData:d,search_mode:w,brief_prompt:u,brief_llm:i,product_description:s}=R(H()),{QA_List:y}=R(ue()),n="https://ai.minitool.fun:16367";n.split("/api")[0];const o=b();async function _(r,l,p,h,$){try{return(await Ce.post(n+"/api/generate_brief",{survey:r,meta:l,answer:p,display_data:h,product_description:$,prompt:u.value,llm:i.value})).data.data}catch(m){console.log(m)}}return he(s,async r=>{const l=a.value;if(console.log("产品描述生成完成，开始生成Brief",l),l){let p=l.display_data;if(!p.materials_data){let h="";y.value.length>0&&(h=y.value[y.value.length-1].message),console.log("处理plotData参数last_message",h);let $=[];for(let m of v.value)m.answer!==""&&$.push([m.question,m.answer]);if($.length===0||h===""||d.value.length===0)return"";console.log("处理完成plotData参数survey",$),p=await _($,d.value,h,p,r)}console.log("处理完成plotData参数display_data",p),o.value=p.brief}},{deep:!0}),(r,l)=>o.value?(x(),D("div",so,[e("div",oo,[ao,e("p",no,j(o.value),1)])])):z("",!0)}});const ro=ee(lo,[["__scopeId","data-v-6ced207c"]]),io=t=>(Se("data-v-b975cead"),t=t(),Ae(),t),co={key:0,class:"main p-6 border-2 border-gray-200 rounded-md"},uo={class:"p-4"},po={class:"h-full bg-gray-100 bg-opacity-75 px-8 pt-16 pb-24 rounded-lg overflow-hidden text-center relative"},ho=io(()=>e("h1",{class:"title-font sm:text-2xl text-xl font-medium text-gray-900 mb-3"},"Description",-1)),mo={class:"leading-relaxed mb-3"},_o=de({__name:"generateDescription",setup(t){const{processedPlotData:a,surveyQuestions:v,plotMetaData:d,search_mode:w,product_description:u,description_prompt:i,description_llm:s,description_materials:y}=R(H()),{QA_List:n}=R(ue()),o="https://ai.minitool.fun:16367";o.split("/api")[0];async function _(r,l,p,h){try{return(await Ce.post(o+"/api/generate_description",{survey:r,meta:l,answer:p,display_data:h,prompt:i.value,llm:s.value,materials:y.value})).data.data}catch($){console.log($)}}return he(a,async r=>{if(console.log("plot数据更新，开始生成描述",r),r){let l=r.display_data;if(!l.materials_data){let p="";n.value.length>0&&(p=n.value[n.value.length-1].message),console.log("处理plotData参数last_message",p);let h=[];for(let $ of v.value)$.answer!==""&&h.push([$.question,$.answer]);if(h.length===0||p===""||d.value.length===0)return"";console.log("处理完成plotData参数survey",h),l=await _(h,d.value,p,l)}console.log("处理完成plotData参数display_data",l),u.value=l.description}},{deep:!0}),(r,l)=>f(u)?(x(),D("div",co,[e("div",uo,[e("div",po,[ho,e("p",mo,j(f(u)),1)])])])):z("",!0)}});const go=ee(_o,[["__scopeId","data-v-b975cead"]]),fo={class:"main"},vo=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),xo=[vo],yo={class:"text-gray-600 body-font overflow-hidden"},bo={class:"container px-5 py-24 mx-auto"},wo={class:"-my-8 divide-y-2 divide-gray-100"},ko={class:"py-8 flex flex-wrap md:flex-nowrap"},$o=e("div",{class:"md:w-64 md:mb-0 mb-6 flex-shrink-0 flex flex-col"},[e("span",{class:"font-semibold title-font text-gray-700"},"知识库"),e("span",{class:"mt-1 text-gray-500 text-sm"},"使用哪个知识库进行回答")],-1),Co={class:"md:flex-grow"},Do=e("option",{disabled:"",selected:""},"选择1个知识库",-1),Mo=e("p",{class:"text-xs text-gray-500 mt-2"},"zumalong是只有祖玛珑数据, english是现有的供客户使用的产品的知识库",-1),Po={class:"py-8 flex flex-wrap md:flex-nowrap"},So=e("div",{class:"md:w-64 md:mb-0 mb-6 flex-shrink-0 flex flex-col"},[e("span",{class:"font-semibold title-font text-gray-700"},"Design prompt"),e("span",{class:"mt-1 text-gray-500 text-sm"},"在做问卷调查时的prompt")],-1),Ao={class:"md:flex-grow"},Io={class:"py-8 flex flex-wrap md:flex-nowrap"},Lo=e("div",{class:"md:w-64 md:mb-0 mb-6 flex-shrink-0 flex flex-col"},[e("span",{class:"font-semibold title-font text-gray-700"},"Design LLM"),e("span",{class:"mt-1 text-gray-500 text-sm"},"在做问卷调查时使用哪个LLM进行回答")],-1),To={class:"md:flex-grow"},Bo={class:"grid"},qo={class:"grid w-96 grid-cols-2 gap-2 rounded-xl bg-gray-200 p-2"},Uo=e("label",{for:"designDocChat",class:"block cursor-pointer select-none rounded-xl p-2 text-center peer-checked:bg-blue-500 peer-checked:font-bold peer-checked:text-white"},"DocChat",-1),Vo=e("label",{for:"designChatGPT",class:"block cursor-pointer select-none rounded-xl p-2 text-center peer-checked:bg-blue-500 peer-checked:font-bold peer-checked:text-white"},"ChatGPT",-1),zo={class:"py-8 flex flex-wrap md:flex-nowrap"},Ro=e("div",{class:"md:w-64 md:mb-0 mb-6 flex-shrink-0 flex flex-col"},[e("span",{class:"font-semibold title-font text-gray-700"},"Product Description prompt"),e("span",{class:"mt-1 text-gray-500 text-sm"},"在生成产品描述时的prompt")],-1),Go={class:"md:flex-grow"},No={class:"py-8 flex flex-wrap md:flex-nowrap"},Qo=e("div",{class:"md:w-64 md:mb-0 mb-6 flex-shrink-0 flex flex-col"},[e("span",{class:"font-semibold title-font text-gray-700"},"Product Description input"),e("span",{class:"mt-1 text-gray-500 text-sm"},"在生成产品描述时输入信息（多选）")],-1),Oo={class:"md:flex-grow"},jo={class:"flex items-center justify-center"},Eo={class:"w-full max-w-sm px-10 py-8 mx-auto bg-white rounded-lg shadow-xl"},Fo={class:"max-w-md mx-auto"},Ko={class:"relative flex items-start py-4 ml-2"},Ho=["id","name","value"],Wo=["for"],Yo={class:"flex items-center justify-center w-full"},Jo={class:"text-sm text-brand-black"},Zo={class:"py-8 flex flex-wrap md:flex-nowrap"},Xo=e("div",{class:"md:w-64 md:mb-0 mb-6 flex-shrink-0 flex flex-col"},[e("span",{class:"font-semibold title-font text-gray-700"},"Product Description LLM"),e("span",{class:"mt-1 text-gray-500 text-sm"},"在生成产品描述时使用哪个LLM进行回答")],-1),ea={class:"md:flex-grow"},ta={class:"grid"},sa={class:"grid w-96 grid-cols-3 gap-2 rounded-xl bg-gray-200 p-2"},oa=e("label",{for:"descDocChat",class:"block cursor-pointer select-none rounded-xl p-2 text-center peer-checked:bg-blue-500 peer-checked:font-bold peer-checked:text-white"},"DocChat",-1),aa=e("label",{for:"descChatGPT",class:"block cursor-pointer select-none rounded-xl p-2 text-center peer-checked:bg-blue-500 peer-checked:font-bold peer-checked:text-white"},"ChatGPT",-1),na=e("label",{for:"descMixtral",class:"block cursor-pointer select-none rounded-xl p-2 text-center peer-checked:bg-blue-500 peer-checked:font-bold peer-checked:text-white"},"Mixtral",-1),la={class:"py-8 flex flex-wrap md:flex-nowrap"},ra=e("div",{class:"md:w-64 md:mb-0 mb-6 flex-shrink-0 flex flex-col"},[e("span",{class:"font-semibold title-font text-gray-700"},"slogan prompt"),e("span",{class:"mt-1 text-gray-500 text-sm"},"生成短的宣称时的prompt")],-1),ia={class:"md:flex-grow"},ca={class:"py-8 flex flex-wrap md:flex-nowrap"},da=e("div",{class:"md:w-64 md:mb-0 mb-6 flex-shrink-0 flex flex-col"},[e("span",{class:"font-semibold title-font text-gray-700"},"slogan LLM"),e("span",{class:"mt-1 text-gray-500 text-sm"},"在生成宣称时使用哪个LLM进行回答")],-1),ua={class:"md:flex-grow"},pa={class:"grid"},ha={class:"grid w-96 grid-cols-3 gap-2 rounded-xl bg-gray-200 p-2"},ma=e("label",{for:"sloganDocChat",class:"block cursor-pointer select-none rounded-xl p-2 text-center peer-checked:bg-blue-500 peer-checked:font-bold peer-checked:text-white"},"DocChat",-1),_a=e("label",{for:"sloganChatGPT",class:"block cursor-pointer select-none rounded-xl p-2 text-center peer-checked:bg-blue-500 peer-checked:font-bold peer-checked:text-white"},"ChatGPT",-1),ga=e("label",{for:"sloganMixtral",class:"block cursor-pointer select-none rounded-xl p-2 text-center peer-checked:bg-blue-500 peer-checked:font-bold peer-checked:text-white"},"Mixtral",-1),fa={class:"py-8 flex flex-wrap md:flex-nowrap"},va=e("div",{class:"md:w-64 md:mb-0 mb-6 flex-shrink-0 flex flex-col"},[e("span",{class:"font-semibold title-font text-gray-700"},"image prompt"),e("span",{class:"mt-1 text-gray-500 text-sm"},"生成图片时的prompt")],-1),xa={class:"md:flex-grow"},ya={class:"py-8 flex flex-wrap md:flex-nowrap"},ba=e("div",{class:"md:w-64 md:mb-0 mb-6 flex-shrink-0 flex flex-col"},[e("span",{class:"font-semibold title-font text-gray-700"},"image LLM"),e("span",{class:"mt-1 text-gray-500 text-sm"},"生成图片时的prompt的llm")],-1),wa={class:"md:flex-grow"},ka={class:"grid"},$a={class:"grid w-96 grid-cols-3 gap-2 rounded-xl bg-gray-200 p-2"},Ca=e("label",{for:"imageDocChat",class:"block cursor-pointer select-none rounded-xl p-2 text-center peer-checked:bg-blue-500 peer-checked:font-bold peer-checked:text-white"},"DocChat",-1),Da=e("label",{for:"imageChatGPT",class:"block cursor-pointer select-none rounded-xl p-2 text-center peer-checked:bg-blue-500 peer-checked:font-bold peer-checked:text-white"},"ChatGPT",-1),Ma=e("label",{for:"imageMixtral",class:"block cursor-pointer select-none rounded-xl p-2 text-center peer-checked:bg-blue-500 peer-checked:font-bold peer-checked:text-white"},"Mixtral",-1),Pa={class:"py-8 flex flex-wrap md:flex-nowrap"},Sa=e("div",{class:"md:w-64 md:mb-0 mb-6 flex-shrink-0 flex flex-col"},[e("span",{class:"font-semibold title-font text-gray-700"},"Brief prompt"),e("span",{class:"mt-1 text-gray-500 text-sm"},"生成Brief时的prompt")],-1),Aa={class:"md:flex-grow"},Ia={class:"py-8 flex flex-wrap md:flex-nowrap"},La=e("div",{class:"md:w-64 md:mb-0 mb-6 flex-shrink-0 flex flex-col"},[e("span",{class:"font-semibold title-font text-gray-700"},"Brief LLM"),e("span",{class:"mt-1 text-gray-500 text-sm"},"生成图片时的Brief的llm")],-1),Ta={class:"md:flex-grow"},Ba={class:"grid"},qa={class:"grid w-96 grid-cols-3 gap-2 rounded-xl bg-gray-200 p-2"},Ua=e("label",{for:"briefDocChat",class:"block cursor-pointer select-none rounded-xl p-2 text-center peer-checked:bg-blue-500 peer-checked:font-bold peer-checked:text-white"},"DocChat",-1),Va=e("label",{for:"briefChatGPT",class:"block cursor-pointer select-none rounded-xl p-2 text-center peer-checked:bg-blue-500 peer-checked:font-bold peer-checked:text-white"},"ChatGPT",-1),za=e("label",{for:"briefMixtral",class:"block cursor-pointer select-none rounded-xl p-2 text-center peer-checked:bg-blue-500 peer-checked:font-bold peer-checked:text-white"},"Mixtral",-1),Ra=de({__name:"setting",setup(t){const a="https://ai.minitool.fun:18778",{setDefaultPage:v}=H(),{currentPageStatus:d,currentPlotStatus:w,kbNames:u,finishedSurvey:i,design_prompt:s,design_prompt_tail:y,design_llm:n,description_prompt:o,description_input:_,description_materials:r,description_llm:l,slogan_prompt:p,slogan_llm:h,brief_prompt:$,brief_llm:m,image_prompt:T,image_llm:P}=R(H()),{QA_List:B}=R(ue()),V=b([]),q=b("");function J(){v(ie.chat);const L={role:"ai",message:"Hello, I'm your ScentAI consultant. I can help you design the perfect scent that’s pursued by real consumers. Would you like to start now?      ",options:["Yes","No"]};B.value=[L],i.value=!1}Ze(()=>{console.log("design_prompt:",s.value),console.log("design_llm:",n.value),console.log("description_prompt:",o.value),console.log("description_input:",_.value),console.log("description_materials:",r.value),console.log("description_llm:",l.value),console.log("slogan_prompt:",p.value),console.log("slogan_llm:",h.value),console.log("image_prompt:",T.value),console.log("image_llm:",P.value)}),he(q,(L,g)=>{console.log("改变知识库从",g,"to",L),u.value=[L]});async function G(){try{return(await Ce.post(a+"/api/local_doc_qa/list_knowledge_base",{user_id:"zzp"})).data.data}catch(L){console.log(L)}}return Te(async()=>{console.log("默认知识库:",u.value);const L=await G();console.log("获取所有的知识库名称",L),V.value=L,q.value=u.value[0]}),(L,g)=>(x(),D("div",fo,[e("button",{class:"btn btn-circle",onClick:J},xo),e("section",yo,[e("div",bo,[e("div",wo,[e("div",ko,[$o,e("div",Co,[U(e("select",{class:"select w-full max-w-xs","onUpdate:modelValue":g[0]||(g[0]=c=>q.value=c)},[Do,(x(!0),D(oe,null,ce(V.value,(c,O)=>(x(),D("option",{key:c.kb_name},j(c.kb_name),1))),128))],512),[[Xe,q.value]]),Mo])])]),e("div",Po,[So,e("div",Ao,[U(e("textarea",{class:"textarea textarea-accent w-full h-40",placeholder:"Something","onUpdate:modelValue":g[1]||(g[1]=c=>Q(s)?s.value=c:null)},null,512),[[$e,f(s)]])])]),e("div",Io,[Lo,e("div",To,[e("div",Bo,[e("div",qo,[e("div",null,[U(e("input",{type:"radio",name:"designoption",id:"designDocChat",value:"local","onUpdate:modelValue":g[2]||(g[2]=c=>Q(n)?n.value=c:null),class:"peer hidden"},null,512),[[Z,f(n)]]),Uo]),e("div",null,[U(e("input",{type:"radio",name:"designoption",id:"designChatGPT",value:"openai","onUpdate:modelValue":g[3]||(g[3]=c=>Q(n)?n.value=c:null),class:"peer hidden"},null,512),[[Z,f(n)]]),Vo])])])])]),e("div",zo,[Ro,e("div",Go,[U(e("textarea",{class:"textarea textarea-accent w-full h-40",placeholder:"Bio","onUpdate:modelValue":g[4]||(g[4]=c=>Q(o)?o.value=c:null)},null,512),[[$e,f(o)]])])]),e("div",No,[Qo,e("div",Oo,[e("div",jo,[e("div",Eo,[e("div",Fo,[(x(!0),D(oe,null,ce(f(_),(c,O)=>(x(),D("div",Ko,[U(e("input",{id:c,type:"checkbox",class:"hidden peer",name:c,"onUpdate:modelValue":g[5]||(g[5]=k=>Q(r)?r.value=k:null),value:c},null,8,Ho),[[et,f(r)]]),e("label",{for:c,class:"inline-flex items-center justify-between w-auto p-2 font-medium tracking-tight border rounded-lg cursor-pointer bg-brand-light text-brand-black border-violet-500 peer-checked:border-violet-400 peer-checked:bg-violet-700 peer-checked:text-white peer-checked:font-semibold peer-checked:underline peer-checked:decoration-brand-dark decoration-2"},[e("div",Yo,[e("div",Jo,j(c),1)])],8,Wo)]))),256))])])])])]),e("div",Zo,[Xo,e("div",ea,[e("div",ta,[e("div",sa,[e("div",null,[U(e("input",{type:"radio",name:"descriptionoption",id:"descDocChat",value:"DocChat","onUpdate:modelValue":g[6]||(g[6]=c=>Q(l)?l.value=c:null),class:"peer hidden"},null,512),[[Z,f(l)]]),oa]),e("div",null,[U(e("input",{type:"radio",name:"descriptionoption",id:"descChatGPT",value:"openai","onUpdate:modelValue":g[7]||(g[7]=c=>Q(l)?l.value=c:null),class:"peer hidden"},null,512),[[Z,f(l)]]),aa]),e("div",null,[U(e("input",{type:"radio",name:"descriptionoption",id:"descMixtral",value:"mixtral","onUpdate:modelValue":g[8]||(g[8]=c=>Q(l)?l.value=c:null),class:"peer hidden"},null,512),[[Z,f(l)]]),na])])])])]),e("div",la,[ra,e("div",ia,[U(e("textarea",{class:"textarea textarea-accent w-full h-40",placeholder:"Bio","onUpdate:modelValue":g[9]||(g[9]=c=>Q(p)?p.value=c:null)},null,512),[[$e,f(p)]])])]),e("div",ca,[da,e("div",ua,[e("div",pa,[e("div",ha,[e("div",null,[U(e("input",{type:"radio",name:"sloganoption",id:"sloganDocChat",value:"DocChat","onUpdate:modelValue":g[10]||(g[10]=c=>Q(h)?h.value=c:null),class:"peer hidden"},null,512),[[Z,f(h)]]),ma]),e("div",null,[U(e("input",{type:"radio",name:"sloganoption",id:"sloganChatGPT",value:"openai","onUpdate:modelValue":g[11]||(g[11]=c=>Q(h)?h.value=c:null),class:"peer hidden"},null,512),[[Z,f(h)]]),_a]),e("div",null,[U(e("input",{type:"radio",name:"sloganoption",id:"sloganMixtral",value:"mixtral","onUpdate:modelValue":g[12]||(g[12]=c=>Q(h)?h.value=c:null),class:"peer hidden"},null,512),[[Z,f(h)]]),ga])])])])]),e("div",fa,[va,e("div",xa,[U(e("textarea",{class:"textarea textarea-accent w-full h-40",placeholder:"Bio","onUpdate:modelValue":g[13]||(g[13]=c=>Q(T)?T.value=c:null)},null,512),[[$e,f(T)]])])]),e("div",ya,[ba,e("div",wa,[e("div",ka,[e("div",$a,[e("div",null,[U(e("input",{type:"radio",name:"imageoption",id:"imageDocChat",value:"DocChat","onUpdate:modelValue":g[14]||(g[14]=c=>Q(P)?P.value=c:null),class:"peer hidden"},null,512),[[Z,f(P)]]),Ca]),e("div",null,[U(e("input",{type:"radio",name:"imageoption",id:"imageChatGPT",value:"openai","onUpdate:modelValue":g[15]||(g[15]=c=>Q(P)?P.value=c:null),class:"peer hidden"},null,512),[[Z,f(P)]]),Da]),e("div",null,[U(e("input",{type:"radio",name:"imageoption",id:"imageMixtral",value:"mixtral","onUpdate:modelValue":g[16]||(g[16]=c=>Q(P)?P.value=c:null),class:"peer hidden"},null,512),[[Z,f(P)]]),Ma])])])])]),e("div",Pa,[Sa,e("div",Aa,[U(e("textarea",{class:"textarea textarea-accent w-full h-40",placeholder:"Bio","onUpdate:modelValue":g[17]||(g[17]=c=>Q($)?$.value=c:null)},null,512),[[$e,f($)]])])]),e("div",Ia,[La,e("div",Ta,[e("div",Ba,[e("div",qa,[e("div",null,[U(e("input",{type:"radio",name:"briefoption",id:"briefDocChat",value:"DocChat","onUpdate:modelValue":g[18]||(g[18]=c=>Q(m)?m.value=c:null),class:"peer hidden"},null,512),[[Z,f(m)]]),Ua]),e("div",null,[U(e("input",{type:"radio",name:"briefoption",id:"briefChatGPT",value:"openai","onUpdate:modelValue":g[19]||(g[19]=c=>Q(m)?m.value=c:null),class:"peer hidden"},null,512),[[Z,f(m)]]),Va]),e("div",null,[U(e("input",{type:"radio",name:"briefoption",id:"briefMixtral",value:"mixtral","onUpdate:modelValue":g[20]||(g[20]=c=>Q(m)?m.value=c:null),class:"peer hidden"},null,512),[[Z,f(m)]]),za])])])])])])])]))}}),Ga=t=>(Se("data-v-7b428fe3"),t=t(),Ae(),t),Na={key:1,class:"h-full grid grid-cols-2 bg-slate-200"},Qa={class:"bg-white m-2 border-solid border-slate-200 rounded-2xl h-screen"},Oa=Ga(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"green"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})],-1)),ja={class:"bg-white m-2 border-solid border-slate-200 rounded-2xl overflow-auto h-screen scroll-smooth"},Ea=de({__name:"index",setup(t){const{setDefaultPage:a}=H(),{currentPageStatus:v,currentPlotStatus:d,kbNames:w}=R(H());function u(){a(ie.setting)}return(i,s)=>(x(),D(oe,null,[f(v)===f(ie).setting?(x(),W(Ra,{key:0})):z("",!0),f(v)!==f(ie).setting?(x(),D("div",Na,[e("div",Qa,[e("div",null,[f(v)===f(ie).chat?(x(),D("button",{key:0,class:"btn btn-sm",onClick:u},[Ve(" ScentAI "),Oa])):z("",!0),f(v)===f(ie).chat?(x(),W(as,{key:1})):f(v)===f(ie).survey?(x(),W(us,{key:2})):z("",!0)])]),e("div",ja,[f(d)===f(se).all?(x(),W(ms,{key:0})):z("",!0),f(d)===f(se).component?(x(),W(Ms,{key:1})):z("",!0),f(d)===f(se).all?(x(),W(gs,{key:2})):z("",!0),f(d)===f(se).all?(x(),W($s,{key:3})):z("",!0),f(d)===f(se).all?(x(),W(Ls,{key:4})):z("",!0),f(d)===f(se).all?(x(),W(Fs,{key:5})):z("",!0),f(d)===f(se).all?(x(),W(go,{key:6})):z("",!0),f(d)===f(se).all?(x(),W(eo,{key:7})):z("",!0),f(d)===f(se).all?(x(),W(ro,{key:8})):z("",!0)])])):z("",!0)],64))}});const tn=ee(Ea,[["__scopeId","data-v-7b428fe3"]]);export{tn as default};
