import{o,b as s,a as e,_ as Q,g as r,k as ue,h as D,v as pe,F as P,e as T,n as fe,d as he,L as E,E as S,r as N,f as v,A as z,J as H,t as U,C as R,z as L,D as K,G as _e,j as W,B as me,p as J,c as G,w as Y,N as ve,q as ge,s as be}from"./index-f50d6d08.js";import{a as we,u as xe,_ as ye}from"./navHeader.vue_vue_type_script_setup_true_lang-f1ba1dcd.js";import{_ as ke,a as Se}from"./IconPerson-61fc7cba.js";import{_ as Le}from"./neo4jGraph-41339b88.js";import{i as X}from"./index-cbf34b5d.js";import{a as Ce,z as Me}from"./api-a3faf747.js";import"./lodash-0e7c12dd.js";import"./brush-ad246980.js";import"./transform-4a56bf00.js";import"./value-0eb832c3.js";import"./pointer-b52b12f8.js";import"./nodrag-71d5223e.js";import"./zoom-558520b2.js";import"./manyBody-52170d67.js";import"./y-d5417789.js";import"./create-8bd90eea.js";import"./axios-a342f982.js";const $e=["width","height"],je=e("defs",null,[e("symbol",{id:"mshd-file-upload",viewBox:"0 0 1024 1024"},[e("path",{d:"M791.970909 978.525091H232.029091a110.312727 110.312727 0 0 1-110.173091-110.173091V155.648A110.312727 110.312727 0 0 1 232.029091 45.474909h409.460364c39.005091 0 76.148364 16.756364 101.934545 45.986909l124.788364 141.684364c21.876364 24.808727 33.978182 56.738909 33.931636 89.786182v545.419636a110.312727 110.312727 0 0 1-110.173091 110.173091zM232.029091 118.504727a37.143273 37.143273 0 0 0-37.096727 37.143273v712.704c0 20.48 16.616727 37.143273 37.096727 37.143273h559.941818c20.48 0 37.096727-16.663273 37.096727-37.143273V322.932364c0-15.266909-5.585455-30.021818-15.639272-41.518546l-124.834909-141.637818a62.836364 62.836364 0 0 0-47.104-21.271273H232.029091z"}),e("path",{d:"M867.467636 360.541091h-150.434909a110.312727 110.312727 0 0 1-110.173091-110.173091V79.592727h73.076364v170.821818c0 20.48 16.616727 37.143273 37.096727 37.143273h150.434909v73.076364zM363.706182 613.888a36.538182 36.538182 0 0 0 51.665454 0l60.509091-60.509091v175.662546a36.538182 36.538182 0 0 0 73.029818 0v-174.917819l59.764364 59.764364a36.538182 36.538182 0 1 0 51.665455-51.665455l-122.135273-122.135272a36.398545 36.398545 0 0 0-26.205091-10.705455 36.398545 36.398545 0 0 0-26.205091 10.705455L363.706182 562.269091a36.538182 36.538182 0 0 0 0 51.665454z"})])],-1),Be=["fill"],ze={__name:"IconFileUpload",props:{color:{type:String,default:"#00DC82"},width:{type:String,default:"40"},height:{type:String,default:"40"}},setup(l){return(i,c)=>(o(),s("svg",{"xmlns:xlink":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/svg",stroke:"black","stroke-width":"2",fill:"red","aria-hidden":"true",focusable:"false",class:"",width:l.width,height:l.height},[je,e("use",{"xlink:href":"#mshd-file-upload",fill:l.color},null,8,Be)],8,$e))}},Pe=["width","height"],Te=e("defs",null,[e("symbol",{id:"mshd-send",viewBox:"0 0 1024 1024"},[e("path",{d:"M525.952 537.514667l-313.557333 31.274666-82.474667 272.256a43.093333 43.093333 0 0 0 12.288 44.714667 39.936 39.936 0 0 0 44.672 5.973333l687.146667-343.338666a40.490667 40.490667 0 0 0 21.973333-36.266667c0-15.402667-8.533333-29.482667-21.973333-36.266667L187.349333 132.266667a39.893333 39.893333 0 0 0-44.672 5.973333c-12.373333 11.008-17.237333 28.586667-12.330666 44.672l82.517333 272.256 312.96 31.317333c12.629333 1.28 22.272 12.288 22.272 25.386667a25.258667 25.258667 0 0 1-22.272 25.386667l0.128 0.256z"})])],-1),De=["fill"],Ae={__name:"IconSend",props:{color:{type:String,default:"#00DC82"},width:{type:String,default:"40"},height:{type:String,default:"40"}},setup(l){return(i,c)=>(o(),s("svg",{"xmlns:xlink":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/svg",fill:"red","aria-hidden":"true",focusable:"false",class:"",width:l.width,height:l.height},[Te,e("use",{"xlink:href":"#mshd-send","fill-opacity":"1",fill:l.color},null,8,De)],8,Pe))}};const Ie={class:"load-texture-container"},Ue={class:"inner"},Ve={__name:"LoadingText",setup(l){const i=r(new Array(7).fill(0)),c=r(!1),g=r(null);return ue(c,u=>{if(u){let p=0;g.value=setInterval(()=>{i.value=i.value.map((f,d)=>2*Math.sin(p+2*Math.PI*((d+1)/8))),p++},100)}else clearInterval(g.value)}),D(()=>{c.value=!0}),pe(()=>{c.value=!1}),(u,p)=>(o(),s("div",Ie,[e("div",Ue,[(o(!0),s(P,null,T(i.value,(f,d)=>(o(),s("div",{key:d,class:"item",style:fe({transform:`translateY(${f}px)`})},null,4))),128))])]))}},Oe=Q(Ve,[["__scopeId","data-v-94b7eaea"]]),qe={class:"w-full h-96 border border-gray-100 bg-green-100"},Fe={__name:"Bar",props:{dataProps:{type:Object,required:!0,default:{data:{Mon:120,Tue:200,Wed:150,Thu:80,Fri:70,Sat:110,Sun:130},info:{title:"测试统计bar图",type:"Bar"}}}},setup(l){const i=r(null);let c=l;const g=(u,p,f)=>{var d=X(i.value);const M=["red","green","blue","yellow","purple","pink","orange","gray","black","brown","cyan","magenta","olive","lime","teal","navy","fuchsia","maroon","aqua","gold","silver"],w=p.map(($,h)=>({value:$,itemStyle:{color:M[h%M.length]}})),x={title:{text:f},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:u},series:[{name:"统计",type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:w}]};x&&d.setOption(x),window.onresize=()=>{d.resize()}};return D(()=>{const u=Object.keys(c.dataProps.data),p=Object.values(c.dataProps.data),f=c.dataProps.info.title;g(u,p,f)}),(u,p)=>(o(),s("div",qe,[e("div",{ref_key:"plotBarContainer",ref:i,class:"w-full h-96 my-10"},null,512)]))}},Ee={class:"w-full h-96 border border-gray-100 bg-green-100"},Ne={__name:"Pie",props:{dataProps:{type:Object,required:!0,default:{data:[{value:1048,name:"Search Engine"},{value:735,name:"Direct"},{value:580,name:"Email"},{value:484,name:"Union Ads"},{value:300,name:"Video Ads"}],title:"测试饼图"}}},setup(l){const i=r(null);let c=l;const g=(u,p)=>{var f=X(i.value);const d={title:{text:u,left:"center"},tooltip:{trigger:"item"},legend:{top:"5%",left:"center"},series:[{name:"Access From",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:40,fontWeight:"bold"}},labelLine:{show:!1},data:p}]};d&&f.setOption(d),window.onresize=()=>{f.resize()}};return D(()=>{g(c.dataProps.title,c.dataProps.data)}),(u,p)=>(o(),s("div",Ee,[e("div",{ref_key:"plotPieContainer",ref:i,class:"w-full h-96 my-10"},null,512)]))}},C=l=>(ge("data-v-1d0a695a"),l=l(),be(),l),He={key:0,class:"main"},Re=C(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),Ke=[Re],We={class:"text-gray-600 body-font overflow-hidden"},Je={class:"container px-5 py-10 mx-auto"},Ge={class:"py-2 divide-y-2 divide-gray-100"},Ye=C(()=>e("div",{class:"md:w-64 md:mb-0 mb-6 flex-shrink-0 flex flex-col"},[e("span",{class:"font-semibold title-font text-gray-700"},"选择可以使用的工具")],-1)),Qe={class:"md:flex-grow"},Xe={class:"py-8 flex flex-wrap"},Ze=["for"],et=["id","value"],tt=C(()=>e("div",{class:"pointer-events-none absolute top-2/4 left-2/4 -translate-y-2/4 -translate-x-2/4 text-white opacity-0 transition-opacity peer-checked:opacity-100"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor",stroke:"currentColor","stroke-width":"1"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])],-1)),ot=["for"],st={class:"py-8 flex flex-wrap md:flex-nowrap"},lt=C(()=>e("div",{class:"md:w-64 md:mb-0 mb-6 flex-shrink-0 flex flex-col"},[e("span",{class:"font-semibold title-font text-gray-700"},"system prompt"),e("span",{class:"mt-1 text-gray-500 text-sm"},"系统的prompt")],-1)),at={class:"md:flex-grow"},nt={class:"py-8 flex flex-wrap md:flex-nowrap"},rt=C(()=>e("span",{class:"font-semibold title-font text-gray-700 mr-4"},"中间过程详细模式:",-1)),it=["onKeyup"],ct={class:"relative m-2 h-screen flex flex-col"},dt=C(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"green"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})],-1)),ut=["innerHTML"],pt={class:"relative w-20 shrink-0 flex flex-col items-center box-border"},ft={key:0,class:"fill-blue-100 h-8"},ht={key:1,class:"h-8"},_t={class:"text-ellipsis overflow-hidden w-full text-center leading-none"},mt={class:"text-sm"},vt={key:0,class:"flex justify-center items-center mt-3"},gt={key:1},bt=["src"],wt={key:2,class:"my-4"},xt={key:0,class:"relative px-0 py-1.5"},yt={class:"relative h-14 box-border bg-neutral-200 rounded-lg border-solid border-2 focus:border-neutral-900"},kt={class:"flex items-center absolute right-0 top-0 h-full"},St={class:"h-8 mt-2"},Lt=["disabled"],Ct={class:"bg-white m-2 overflow-auto h-screen scroll-smooth"},Mt=he({__name:"ceshitest",setup(l){const{selectedLLM:i,usecache:c}=E(we()),{need_summary:g,display_neo4j_meta:u,display_plot_meta:p,select_nodes:f}=E(xe()),d=r("你是一个ai助手，使用中文回答用户问题。"),M=r([]),w=r(!1),x=r(["today_date","perfume_knowledge","food_information_extraction","food_neo4j_query","food_neo4j_stats","operate_mtdnn_model"]),$=r(null),h=r(""),j=r(!1),Z=r(null),B=r([]),A=r(!0),V=r(0),ee=a=>a==="Bar"?Fe:a==="Pie"?Ne:null;function te(){const a=["食品知识图谱中是否有关于大米饭的内容","适合约会氛围的香水香调该如何设计","食品知识图谱中是否有饭团相关的内容？","解释下选中的节点","打印一下当前知识图谱的状态",`提取下面食品评论中的知识和情感:
最近给屁孩儿找到了一种好吃的食物。本来让她米饭就着菜和肉吃，吃的不太好，不让喂，自己手抓不好入口。后来想了个办法把饭菜揉成一团，饭团挺爱吃。后来又不喜欢了，老母亲又把饭团压扁裹上蛋黄液做成烤饼吃。屁孩儿又重新喜欢了吃得很开心。一波几折，米，肉菜算是都吃上了`,"你好","帮我查询下ip地址42.236.9.70的位置信息","Song和Tang这2款汽车哪个价格更贵？","今天是星期几？","历史上的今天发生了什么事情"],n=a[V.value%a.length];V.value+=1,h.value=n,console.log(new Date().toLocaleString(),"随机生成消息",n)}function O(){w.value=!w.value}const q=async()=>{if(!h.value.length||j.value)return;console.log(new Date().toLocaleString(),"用户开始发送消息"),console.log("选中的节点包括: ",f.value);const a=h.value;B.value.push({content:a,role:"user"}),h.value="",oe(),j.value=!0;const n={neo4j:f.value},_=await Me({prompt:d.value,messages:B.value,llm:i.value[0],tools:x.value,usecache:c.value,additional:n});if(console.log("Chat response:",_),_.code===0){const b=_.data;for(let t of b){const y=t.role,m=t.tool_calls;if(y==="tool"||y==="assistant"&&m?t.middle_process=!0:t.middle_process=!1,m){let I=[];for(let F of m){const ie=F.function,ce=JSON.stringify(ie),de=F.id;I.push(`${de}: ${ce}`)}t.display_content=I.join(`
`)}const k=t.meta;y==="tool"&&k&&(k.plot==="neo4j"?u.value=k.data:k.plot==="echarts"&&(t.echarts=k)),B.value.push(t)}}else{const b=_.msg;S({message:`AI系统出错，请联系管理员！报错信息: ${b}`,type:"error"}),B.value.pop(),h.value=a}j.value=!1};function oe(){console.log(new Date().toLocaleString(),"滚动屏幕"),setTimeout(()=>{$.value.scrollTop=$.value.scrollHeight},300)}const se=a=>{console.log(new Date().toLocaleString(),"开始上传文件，收到的组件传入参数是",a);const n=a.file;console.log(new Date().toLocaleString(),"文件名称是",n.name);const _=new FileReader;_.onloadend=()=>{const b=_.result;console.log(new Date().toLocaleString(),"文件base64内容是",b)},_.readAsDataURL(n)},le=a=>{},ae=()=>{S({message:"最多只能上传一个文件！",type:"warning"})},ne=()=>{S({message:"上传文件失败！",type:"error"})},re=()=>{S({message:"上传文件成功",type:"success"})};return D(async()=>{const a=await Ce();M.value=Object.keys(a.data),i.value.length>1?S({message:"测试只能选择一个LLM，默认使用选中的第一个！",type:"warning"}):i.value.length==0&&S({message:"请选择一个LLM进行测试,您目前没有选择任何1个LLM！",type:"error"})}),(a,n)=>{const _=N("el-button"),b=N("el-upload");return o(),s(P,null,[v(ye),w.value?(o(),s("div",He,[e("button",{class:"btn btn-circle",onClick:O},Ke),e("section",We,[e("div",Je,[e("div",Ge,[Ye,e("div",Qe,[e("div",Xe,[(o(!0),s(P,null,T(M.value,(t,y)=>(o(),s("div",{class:"inline-flex items-center",key:t},[e("label",{class:"relative flex cursor-pointer items-center rounded-full p-3",for:t,"data-ripple-dark":"true"},[z(e("input",{id:t,type:"checkbox","onUpdate:modelValue":n[0]||(n[0]=m=>x.value=m),value:t,class:"before:content[''] peer relative h-5 w-5 cursor-pointer appearance-none rounded-md border border-blue-gray-200 transition-all before:absolute before:top-2/4 before:left-2/4 before:block before:h-12 before:w-12 before:-translate-y-2/4 before:-translate-x-2/4 before:rounded-full before:bg-blue-gray-500 before:opacity-0 before:transition-opacity checked:border-pink-500 checked:bg-pink-500 checked:before:bg-pink-500 hover:before:opacity-10"},null,8,et),[[H,x.value]]),tt],8,Ze),e("label",{class:"mt-px cursor-pointer select-none font-light text-gray-700",for:t},U(t),9,ot)]))),128))])])]),e("div",st,[lt,e("div",at,[z(e("textarea",{class:"textarea textarea-accent w-full h-40",placeholder:"Something","onUpdate:modelValue":n[1]||(n[1]=t=>d.value=t)},null,512),[[R,d.value]])])]),e("div",nt,[rt,z(e("input",{type:"checkbox",class:"toggle toggle-success",checked:"","onUpdate:modelValue":n[2]||(n[2]=t=>A.value=t)},null,512),[[H,A.value]])])])])])):L("",!0),w.value?L("",!0):(o(),s("div",{key:1,class:"h-full lg:grid lg:grid-cols-2 bg-blue-100 md:flex md:flex-col",onKeyup:K(_e(te,["ctrl"]),["1"]),tabindex:"0"},[e("div",ct,[e("div",{class:"bg-white"},[e("button",{class:"btn btn-sm w-32 h-10",onClick:O},[W(" AgentAI "),dt])]),e("div",{class:"scroll-smooth bg-white relative overflow-auto flex-grow",ref_key:"messageRef",ref:$},[(o(!0),s(P,null,T(B.value,(t,y)=>(o(),s("div",{class:"box-border flex flex-col pt-4 pb-0 px-4 last:pb-4",key:y},[z(e("div",{class:J(t.role==="user"?"flex flex-row justify-end":"flex flex-row-reverse justify-end")},[e("div",{class:J(["whitespace-pre-wrap rounded-md p-3 border",t.role=="user"?"bg-blue-200":""]),innerHTML:t.display_content?t.display_content:t.content},null,10,ut),e("div",pt,[t.role==="user"?(o(),s("div",ft,[v(ke)])):(o(),s("div",ht,[v(Se)])),e("div",_t,[e("span",mt,U(t.role),1)])])],2),[[me,A.value||!t.middle_process]]),t.options?(o(),s("div",vt,[(o(!0),s(P,null,T(t.options,(m,k)=>(o(),G(_,{type:"danger",key:m,onClick:I=>a.handleOptionClick(m)},{default:Y(()=>[W(U(m),1)]),_:2},1032,["onClick"]))),128))])):L("",!0),t.image?(o(),s("div",gt,[e("img",{src:t.image,class:"w-full object-cover h-52"},null,8,bt)])):L("",!0),t.echarts?(o(),s("div",wt,[(o(),G(ve(ee(t.echarts.info.type)),{dataProps:t.echarts},null,8,["dataProps"]))])):L("",!0)]))),128)),j.value?(o(),s("div",xt,[v(Oe)])):L("",!0)],512),e("div",yt,[z(e("input",{onKeyup:K(q,["enter"]),placeholder:"输入问题,ctrl+1随机问题",class:"h-full w-full border-transparent text-inherit appearance-none text-base grow m-0 px-4 p-0 border-0",type:"text","onUpdate:modelValue":n[3]||(n[3]=t=>h.value=t)},null,544),[[R,h.value]]),e("div",kt,[v(b,{class:"ml-3 mr-3","show-file-list":!0,limit:1,"http-request":se,"before-upload":le,ref_key:"uploadFile",ref:Z,"on-exceed":ae,"on-success":re,"on-error":ne,accept:"image/*"},{default:Y(()=>[e("div",St,[v(ze)])]),_:1},512),e("button",{disabled:!h.value||j.value,onClick:q,class:"text-inherit block appearance-none text-base cursor-pointer mr-3 p-0 border-0 active:opacity-100 disabled:opacity-30 duration-200"},[v(Ae)],8,Lt)])])]),e("div",Ct,[v(Le)])],40,it))],64)}}});const Rt=Q(Mt,[["__scopeId","data-v-1d0a695a"]]);export{Rt as default};
