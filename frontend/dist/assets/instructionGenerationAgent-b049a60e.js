import{d as y,L as C,g as l,k as A,h as B,o as u,b as c,f as M,a as e,A as m,P as E,F as g,e as L,t as p,B as N,p as P,C as Q,E as v}from"./index-f50d6d08.js";import{a as S}from"./axios-a342f982.js";import{a as V,_ as j}from"./navHeader.vue_vue_type_script_setup_true_lang-f1ba1dcd.js";import{f as D,n as $}from"./api-a3faf747.js";const z={class:"main flex flex-col w-full lg:flex-row"},F={class:"left w-3/5 grid card bg-lime-50 rounded-box place-items-center h-screen"},G=e("div",null,"选中1个prompt，修改，查看，或者生成更多问题, 当前选中的Agent是测试多个excel的Agent",-1),U={class:"w-full"},I={class:"flex flex-row justify-between items-center ml-2"},O=e("option",{disabled:"",selected:""},"所有prompt对应的问题指令",-1),R={class:"mr-10"},T=e("div",{class:"divider"},null,-1),H={class:"btn btn-square"},J={class:"flex flex-row justify-between items-center mt-2 w-72"},K=["disabled"],W=e("div",{class:"divider lg:divider-horizontal"},null,-1),X={class:"right w-2/5 h-screen grid flex-grow card bg-lime-50 rounded-box place-items-center p-6 overflow-auto"},oe=y({__name:"instructionGenerationAgent",setup(Y){const{selectedLLM:w,usecache:Z}=C(V()),i=l(),f=l(!1),a=l("生成后的结果双击可以修改,也可以直接修改，支持按行的纯文本和json的数组格式"),r=l(!1),d=l(!1),o=l("fragrence_agent"),_=l(0),b="https://ai.minitool.fun:15557";A(o,(s,n)=>{_.value=i.value.filter(t=>t.name===s)[0].number,console.log("total_question_num",_.value),a.value=i.value.filter(t=>t.name===s)[0].question_content});function h(){f.value=!0,d.value=!0}async function x(){(await $({prompt:o.value,question_content:a.value,llm:w.value})).code==0?(v.info("保存成功"),a.value="生成后的结果双击可以修改",d.value=!1):v.error("保存失败")}async function q(){if(o.value==""||o.value=="fragrence_agent"){v.error("请选择prompt或者选择的prompt不是agent的prompt，请在管理中进行修改对应的配置");return}r.value=!0;const s=i.value.filter(k=>k.name===o.value)[0].questions,n=s.length,t=await S.post(`${b}/api/generate_questions`,{questions:s,total_num:n+20});if(console.log("response:",t),t.data.code!==0){v.error("发生了错误，请联系管理员,"+t.data.data),r.value=!1;return}a.value=t.data.data.questions_content,r.value=!1,d.value=!0}return B(async()=>{const s=await D();console.log(s.data),i.value=s.data}),(s,n)=>(u(),c(g,null,[M(j),e("div",z,[e("div",F,[G,e("div",U,[e("div",I,[m(e("select",{class:"select select-bordered w-full max-w-xs","onUpdate:modelValue":n[0]||(n[0]=t=>o.value=t)},[O,(u(!0),c(g,null,L(i.value,t=>(u(),c("option",null,p(t.name),1))),256))],512),[[E,o.value]]),e("div",R,"问题数量: "+p(_.value),1)]),T]),m(e("button",H,[e("span",{class:P({"loading loading-spinner":r.value})},null,2)],512),[[N,r.value]]),e("div",J,[e("button",{class:"btn btn-warning",onClick:q},"生成"),e("button",{class:"btn btn-warning",disabled:!d.value,onClick:x},"保存",8,K)])]),W,e("div",X,[f.value?m((u(),c("textarea",{key:1,"onUpdate:modelValue":n[1]||(n[1]=t=>a.value=t),onBlur:n[2]||(n[2]=t=>f.value=!1),class:"w-full h-full"},null,544)),[[Q,a.value]]):(u(),c("div",{key:0,class:"whitespace-pre-wrap",onDblclick:h},p(a.value),33))])])],64))}});export{oe as default};
