import{a as h}from"./axios-a342f982.js";import{N as _}from"./navbar-5cab7afe.js";import{d as y,g as v,h as b,E as a,o as i,b as r,f as k,a as n,F as D,e as x,p as C,t as g,z as N}from"./index-f50d6d08.js";const $={class:"main p-4"},M=n("div",null,"说明: GR是机房新加服务器，地址是192.168.100.8,内网和外网都开启了相同的端口",-1),S={class:"flex justify-between items-center"},E={class:"text-lg font-semibold"},z={class:"text-sm"},B=["onMouseenter"],R=n("button",{class:"p-2 rounded-full hover:bg-white hover:bg-opacity-20"}," ⋮ ",-1),V={key:0,class:"absolute right-0 mt-2 w-40 bg-gray-800 text-white rounded-md shadow-lg z-10"},F={class:"py-1"},G=["onClick"],L=["onClick"],H=y({__name:"mtdnn",setup(j){const d="https://ai.minitool.fun:27002",l=v([{title:"119",host:"119",status:"unknown",description:"模型",service:"mtdnn",showDropdown:!1},{title:"139",host:"139",status:"unknown",description:"模型",service:"mtdnn",showDropdown:!1},{title:"189",host:"189",status:"unknown",description:"模型",service:"mtdnn",showDropdown:!1},{title:"209",host:"209",status:"unknown",description:"模型",service:"mtdnn",showDropdown:!1},{title:"GR",host:"wgr",status:"unknown",description:"模型",service:"mtdnn",showDropdown:!1},{title:"169",host:"169",status:"unknown",description:"模型",service:"mtdnn",showDropdown:!1},{title:"179",host:"179",status:"unknown",description:"模型",service:"mtdnn",showDropdown:!1}]);function w(t){t.showDropdown=!0}function f(){l.value.forEach(t=>{t.showDropdown=!1})}async function c(t,o){const s=await h.post(`${d}/api/is_running`,{service:t,host:o});if(console.log("对服务器的状态获取结果是",s),s.data.code==0){const e=s.data.data;return console.log("操作成功，返回的数据是:",e),e}else return a({title:"获取状态失败",message:s.data.data,type:"error"}),!1}async function u(t,o){o=="running"?await p(t.service,t.host,"start")&&(await c(t.service,t.host)?t.status=o:a({title:"启动失败",message:"请联系管理员",type:"error"})):await p(t.service,t.host,"stop")&&(await c(t.service,t.host)?a({title:"停止失败",message:"请联系管理员",type:"error"}):t.status=o),t.showDropdown=!1}async function p(t,o,s){const e=await h.post(`${d}/api/operator`,{service:t,host:o,action:s});if(console.log("对服务器的操作结果是",e),e.data.code==0){const m=e.data.data;return console.log("操作成功，返回的数据是:",m),!0}else return a({title:"操作失败",message:e.data.msg,type:"error"}),!1}return b(async()=>{console.log("检查每个服务的状态");for(let t of l.value)try{await c(t.service,t.host)?t.status="running":t.status="stopped"}catch(o){a({title:"获取服务状态失败，请联系管理员",message:o.message,type:"error"})}}),(t,o)=>(i(),r("div",$,[k(_),M,n("div",{class:"grid grid-cols-6 gap-4 mt-4",onMouseleave:o[0]||(o[0]=s=>f())},[(i(!0),r(D,null,x(l.value,s=>(i(),r("div",{key:s.title,class:C(["relative p-6 rounded-lg shadow-md text-white",{"bg-blue-500":s.status==="unknown","bg-green-500":s.status==="running","bg-red-500":s.status==="stopped"}])},[n("div",S,[n("div",null,[n("h3",E,g(s.title),1),n("p",z,g(s.description),1)])]),n("div",{class:"absolute top-2 right-2",onMouseenter:e=>w(s)},[R,s.showDropdown?(i(),r("div",V,[n("ul",F,[n("li",{onClick:e=>u(s,"running"),class:"px-4 py-2 text-sm hover:bg-gray-700 cursor-pointer"}," 运行 ",8,G),n("li",{onClick:e=>u(s,"stopped"),class:"px-4 py-2 text-sm hover:bg-gray-700 cursor-pointer"}," 停止 ",8,L)])])):N("",!0)],40,B)],2))),128))],32)]))}});export{H as default};
